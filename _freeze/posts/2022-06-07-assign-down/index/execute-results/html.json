{
  "hash": "20a768ec23f0d3c68aaa0c9c6245f2b1",
  "result": {
    "markdown": "---\ntitle: Down with R's assignment flamewars!\ndate: 2022-06-07\nslug: assign-down\ncategories:\n  - explodeAssign\n  - hot-takes\n  - flamewar\n  - r\n---\n\n\n![](resources/cmm2.png){fig-alt=\"The 'change my mind' meme. A man sits at a table with a banner showing a made-up downward-pointing R assignment operator composed of a vertical pipe symbol with a letter v below it, and underneath it says 'absolutely no need to change my mind'.\" width=\"100%\"}\n\n## tl;dr\n\nAll `<-` vs `=` flamewars are nullified forever with the introduction of my new 'down assign' operator for the R language:\n\n```\n|\nv\n```\n\n<div class=\"tip\"> ❗️ <b>Update</b>\n\nFolks, [nerdsniping](https://xkcd.com/356/) works:\n\n* [Matthew Kay](https://twitter.com/mjskay) has now written [the {explodeAssign} package](https://github.com/mjskay/explodeAssign), which lets you use special (weaponised) down-assign arrows in an interactive session\n* [Antoine Fabri has followed up](https://twitter.com/antoine_fabri/status/1534587056902512640) with [a coded implementation](https://gist.github.com/moodymudskipper/bf8599cb5c539fb45b58d0c85f49c051) for making this possible with a just a `v` operator ('vassign')\n\nAs Matthew says, this is a 'terrible idea' and you should use at your own risk, lol.\n\n</div>\n\n## Get down\n\nI no longer set my calendar by the movement of the Earth around the hottest _point_ in the solar system. I now set it by the recurrent emergence of the hottest _take_ in the solar system: that R's assignment operator `<-` is garbage and R users should be ashamed of themselves.\n\nLast time I spoke about this I made clear that our Strong Pointy Lad was the One True Operator for assignment. In that post, like some kind of modern Prometheus, [I gave mortals the power to detect and destroy R scripts containing the weak and mundane equals assignment operator](https://www.rostrum.blog/2021/03/13/assign/).\n\nBut with deference, I have come to realise something profound: we shouldn't fight about this. It's not worth anyone's time to debate the relative merits of using `<-` or `=`. We should all relax. We can live in harmony.\n\n...Because I've invented a new assignment concept. Folks, say hello to the _down assign_ operator.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n|\nv\n```\n:::\n\n\nYes, it's still an 'arrow', but I think everyone will agree that it makes sense this time. Lateral assignment is unnatural and inefficient and is out of the natural order of things. \n\nNow the the value falls effortlessly down your script, under the weight of gravity, into the name of the object. If it's good enough Sir Isaac Newton, it's good enough for me. Or don't you believe in gravity? Exactly.\n\nSo `x <- 1` (or, shudder, `x = 1`) translates to:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n1\n|\nv\nx\n```\n:::\n\n\nElegant, isn't it?\n\nWhile R Core perform the trivial task of cementing this feature into base R, I've prepared a small function that will take care of rudimentary usage for now.\n\nNote that this function won't work in an interactive session; it takes the filepath to a script as its input. But that's okay: I think `<-` haters are often computer-scientist types and 1337 h4x0rz who never sully their code by playing around in filthy IDEs and notebooks anyway. Obviously we should emulate them.\n\nFirst I'll write a demo script to a temporary file. It assigns the values of `1` and `2` to `x` and `y`, respectively, then adds them together.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndemo_script <- \"\n1\n|\nv\nx\n\n2\n|\nv\ny\n\nx + y\n\"\n\ndemo_file <- tempfile(fileext = \".R\")\nwriteLines(demo_script, demo_file)\n```\n:::\n\n\nNow to define the function. It reads our script file, finds the down arrows, substitutes them, returns them back to the expression from whence they came, then executes the script.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoint_down <- function(file) {\n  \n  content <- readLines(file)\n  \n  for (i in seq(content)) {\n    \n    if (content[i] == \"|\" & content[i + 1] == \"v\") {\n      \n      combos <- paste0(\n        content[i - 1], content[i], content[i + 1], content[i + 2]\n      )\n      \n      rm_index <- c(i - 1, i, i + 1, i + 2)\n      \n      content[rm_index[1]] <- combos\n      content[rm_index[2:4]] <- \"\"\n      content <- gsub(\"\\\\|v\", \"->\", content)\n      \n    }\n    \n  }\n  \n  path <- tempfile(fileext = \".R\")\n  writeLines(content, path)\n  eval(parse(path))\n  \n}\n```\n:::\n\n\nAnd now we execute.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoint_down(demo_file)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3\n```\n:::\n:::\n\n\nSimply: wow.\n\n## Down and away\n\nMy next step for unifying the community around R operators is the 'down pipe':\n\n```\n_\nv\n```\n\nSome use the term 'down pipe' to mean the exterior drainage tube that takes wastewater away from their homes. I hope we can use the down pipe operator as a way of siphoning away all the bilge around the `%>%` vs `|>` arguments once and for all. You're welcome.\n\n## Environment {.appendix}\n\n<details><summary>Session info</summary>\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLast rendered: 2023-07-01 15:21:10 BST\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Ventura 13.2.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.2 compiler_4.3.1    fastmap_1.1.1     cli_3.6.1        \n [5] tools_4.3.1       htmltools_0.5.5   rstudioapi_0.14   yaml_2.3.7       \n [9] rmarkdown_2.22    knitr_1.43.1      jsonlite_1.8.5    xfun_0.39        \n[13] digest_0.6.31     rlang_1.1.1       evaluate_0.21    \n```\n:::\n:::\n\n</details>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}