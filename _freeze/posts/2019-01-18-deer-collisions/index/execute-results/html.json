{
  "hash": "2abac74c91aecd3451f8d46c581ad0f3",
  "result": {
    "markdown": "---\ntitle: Map deer-vehicle colisions with {shiny}\nauthor: Matt Dray\ndate: 2019-01-18\nslug: deer-collisions\ncategories:\n  - DT\n  - leaflet\n  - r\n  - shiny\n  - shinydashboard\n---\n\n\n![Oh dear, roe deer [(Marek Szczepanek](https://commons.wikimedia.org/wiki/Capreolus_capreolus#/media/File:Capreolus_capreolus_2_(Marek_Szczepanek).jpg), [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/))](resources/Capreolus_capreolus_2_(Marek_Szczepanek).jpg){fig-alt=\"A roe deer in profile.\" width=\"100%\"}\n\n## tl;dr\n\nI made [a Shiny app](https://github.com/matt-dray/scot-deer-collisions) with [open data](https://data.gov.uk/dataset/838b88d8-7509-435c-9649-90f1881b5ad7/deer-vehicle-collisions) about deerstrikes by cars in Scotland.\n\n## Open data\n\nDeer roam Scotland. So do humans. It's a problem when they meet at high speed.\n\n[The National Deer-Vehicle Collisions Project](http://www.deercollisions.co.uk/), administered by [The Deer Initiative](http://www.thedeerinitiative.co.uk/), has been monitoring data on deer-vehicle collisions in the UK.\n\nThe data are open. I found the data set when skimming through [data.gov.uk](https://data.gov.uk/dataset/838b88d8-7509-435c-9649-90f1881b5ad7/deer-vehicle-collisions) (a classic weekend activity for all the family). It links to the [SNH Natural Spaces site](https://gateway.snh.gov.uk/natural-spaces/dataset.jsp?dsid=DVC) where you can download the data as shapefile, GML or KML under the [Open Government Licence](http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/).\n\nI couldn't find an interactive visualisation of these data and I want to spend more time working with the {shiny} package,[^wc-18] so why not.\n\n## A simple Shiny app\n\nHere's a preview of the app in action:\n\n![](resources/deer-app.gif){fig-alt=\"A gif showing selections of some years, months and locations; hovering over points on the map; and showing the interactive datatable.\" width=\"100%\"}\n\nAlong with {shiny}, the app was built primarily with the R packages:\n\n* [{shinydashboard}](https://rstudio.github.io/shinydashboard/) for a nice layout and value boxes\n* [{leaflet}](https://rstudio.github.io/leaflet/) for the interactive map\n* [{DT}](https://rstudio.github.io/DT/) for the interactive datatable\n\nThe interface is a simple dashboard in three parts: a sidebar, a main panel and three value boxes.\n\nThe sidebar contains three collapsible sections with an 'about' section, a 'how to' section and a section with interactive filters. You can type or select collisions from a specified time (year and/or month) and place (the local authority in which it happened).\n\nThe main panel has two tabs. One is an interactive map that indicates the collisions with clickable markers. The second tab contains an interactive table. The data shown in these views is a result of the filters that have been applied via the sidebar. The interactive table also allows for further data filtering and you can download the results.\n\nThe value boxes each show one statistic related to the filtered data: the number of collisions; total collisions for the given local authorities and years; and the total collisions in the selected years. These update as you change your selections.\n\n## Run the app\n\nThe [code for the app is available on GitHub](https://github.com/matt-dray/scot-deer-collisions). You can also [download the cleaned data in CSV or RDS format](https://github.com/matt-dray/scot-deer-collisions/tree/master/data).\n\nYou can run the app from an R session by installing {shiny} from CRAN and then executing the following lines: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nshiny::runGitHub(\n  repo = \"scot-deer-collisions\", \n  username = \"matt-dray\"\n)\n```\n:::\n\n\n## Limitations\n\nI used to host the app for free on [shinyapps.io](https://www.shinyapps.io/), but it's since made way for other projects. That means you'll have to download it to run it. [The code will continue to exist on GitHub](https://www.github.com/matt-dray/scot-deer-collisions) though, where you can leave an issue or fork it to make it better.\n\nIn terms of app design, I limited the filters to year, month and local authority. I could have included deer species and road, but the data are sparse and the formatting wasn't great. I cleaned these variables up a bit and they're available as filterable columns in the interactive table.\n\nThere's also a large number of data points and it doesn't make sense to show them all at once because it slows the app down. There are methods for improving this, but I assume most people will be looking at specific local authorities or roads rather than the country as a whole.\n\n## Environment {.appendix}\n\n<details><summary>Session info</summary>\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLast rendered: 2023-08-04 08:43:46 BST\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Ventura 13.2.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.2 compiler_4.3.1    fastmap_1.1.1     cli_3.6.1        \n [5] tools_4.3.1       htmltools_0.5.5   rstudioapi_0.15.0 yaml_2.3.7       \n [9] rmarkdown_2.23    knitr_1.43.1      jsonlite_1.8.7    xfun_0.39        \n[13] digest_0.6.33     rlang_1.1.1       evaluate_0.21    \n```\n:::\n:::\n\n</details>\n\n[^wc-18]: But see [this post about a Shiny app](https://www.rostrum.blog/2018/07/17/world-cup-age-app/) I made that that one colleague described as 'very depressing'.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}