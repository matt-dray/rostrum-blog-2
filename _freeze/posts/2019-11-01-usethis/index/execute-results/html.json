{
  "hash": "04598ce12c2bcd802d684900cfdcde67",
  "result": {
    "markdown": "---\ntitle: Build an R package with {usethis}\ndate: 2019-11-01\nslug: usethis\ncategories:\n  - devtools\n  - git\n  - github\n  - pkgdown\n  - r\n  - roxygen2\n  - testthat\n  - usethis\n---\n\n\n![Ossie, a Cabinet Office cat (via @cabinetofficeuk on Twitter).](resources/ossie.jpeg){fig-alt=\"A black cat lounging across a large wooden table.\" width=\"100%\"}\n\n## tl;dr\n\n* I gave a talk ([slides](https://matt-dray.github.io/r-pkg-slides/#1), [source](https://github.com/matt-dray/cabinet)) about creating an R package with helper functions from [the {usethis} package](https://usethis.r-lib.org/).\n* In the session I created a new package from scratch called {cabinet} ([source](https://github.com/matt-dray/cabinet), [website](https://matt-dray.github.io/cabinet/)) for identifying the cats that live in the UK Government's [Cabinet Office](https://www.gov.uk/government/organisations/cabinet-office).\n\n## Coffee packaging\n\nI gave a talk at a [Cabinet Office Coffee & Coding session](https://co-analysis.github.io/co-coffee-and-coding/) about building R packages from scratch. The emphasis was on [the {usethis} package](https://usethis.r-lib.org/), which contains lots of package-setup functions that make your life easier.\n\nThe focus is on beginners who may never have written a package before.\n\nClick on the slides embedded below and cycle through with your arrow keys, or [you can open them fullscreen in a dedicated browser tab](https://matt-dray.github.io/r-pkg-slides/#1). Press the <kbd>P</kbd> button your keyboard to see the presenter notes.\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"shareagain\" style=\"min-width:300px;margin:1em auto;\" data-exeternal=\"1\">\n<iframe src=\"https://matt-dray.github.io/r-pkg-slides/\" width=\"400\" height=\"300\" style=\"border:2px solid currentColor;\" loading=\"lazy\" allowfullscreen></iframe>\n<script>fitvids('.shareagain', {players: 'iframe'});</script>\n</div>\n```\n:::\n:::\n\n\nI made the slides using [Yihui Xie's {xaringan} implementation of remark.js](https://slides.yihui.name/xaringan/) and I used my own {gdstheme} package for the theme ([read the blog](https://www.rostrum.blog/2019/05/24/xaringan-template/) or [see the source on GitHub](https://github.com/matt-dray/gdstheme)). \n\n## Talk summary\n\nBasically you can make a minimal R package with only:\n\n* `usethis::create_package()` to set up the minimal package structure\n* `usethis::create_r()` to set up a script for your functions\n* `devtools::document()` to generate minimal documentation from your files\n\nThe {usethis} package also helps you set up internal and long-form documentation, testing, version control, a GitHub repository and more. {pkgdown} even generates a website from your documentation to make it more user-friendly.\n\n## Cat-egorise\n\nIn the session I live-built a package called {cabinet}. You can:\n\n* look at the package's [source code on GitHub](https://github.com/matt-dray/cabinet/)\n* see the package's [website](https://matt-dray.github.io/cabinet/), made with {pkgdown}\n* install the package yourself\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"remotes\")  # if not yet installed\nremotes::install_github(\"matt-dray/cabinet\")\n```\n:::\n\n\nThe package only has one (very important) function, `cabinet_cat()`, which checks whether a supplied character string matches the name of either of [the Cabinet Office's cats](https://www.bbc.co.uk/news/uk-politics-38262832).\n\nLike:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cabinet)\ncabinet_cat(\"Ossie\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOssie is a good Cabinet Office kitty.\n```\n:::\n\n```{.r .cell-code}\ncabinet_cat(\"Larry\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nLarry isn't a Cabinet Office cat!\n```\n:::\n\n```{.r .cell-code}\ncabinet_cat(\"Garfield\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYou've much to learn about government cats.\n```\n:::\n:::\n\n\n## Excellent resources {#resources}\n\nThere are some really good resources out there already. I like the following:\n\n* Hilary Parker's [post](https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/) to write a package from scratch (beginner)\n* Tomas Westlake's [update](https://r-mageddon.netlify.com/post/writing-an-r-package-from-scratch/) to Hilary's post (beginner)\n* Emil Hvitfeldt's [post](https://www.hvitfeldt.me/blog/usethis-workflow-for-package-development/), focusing on {usethis} (beginner/intermediate)\n* Karl Broman's [site](https://kbroman.org/pkg_primer/), a primer for package developement (intermediate)\n* Hadley Wickham's [book](http://r-pkgs.had.co.nz/) (intermediate/advanced)\n\nTom's post is probably the best place to start if you want to create a package with {usethis} from scratch as a beginner.\n\n## Environment {.appendix}\n\n<details><summary>Session info</summary>\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLast rendered: 2023-07-24 20:07:32 BST\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Ventura 13.2.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] cabinet_0.0.0.9000\n\nloaded via a namespace (and not attached):\n [1] digest_0.6.33       fastmap_1.1.1       xfun_0.39          \n [4] glue_1.6.2          knitr_1.43.1        htmltools_0.5.5    \n [7] rmarkdown_2.23      cli_3.6.1           compiler_4.3.1     \n[10] rstudioapi_0.15.0   tools_4.3.1         xaringanExtra_0.7.0\n[13] evaluate_0.21       yaml_2.3.7          crayon_1.5.2       \n[16] rlang_1.1.1         jsonlite_1.8.7      htmlwidgets_1.6.2  \n```\n:::\n:::\n\n</details>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/fitvids-2.1.1/fitvids.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}