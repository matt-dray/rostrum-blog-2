{
  "hash": "c394c8b35133bd32f2599c4cafa59429",
  "result": {
    "markdown": "---\ntitle: Make a README badge with {badgr}\ndate: 2020-05-08\nslug: readme-badge\ncategories:\n  - badgr\n  - r\n---\n\n\n![The {badgr} package is no bodge, I assure you!](https://media.giphy.com/media/ieUMCm9IJhTX4oHqIF/giphy.gif){fig-alt=\"Badger from children's TV show Bodger & Badger making a mess with instant mashed potato.\" width=\"100%\"}\n\n## tl;dr\n\nI've written [{badgr}, a very simple package](https://github.com/matt-dray/badgr) with a single very simple function---`get_badge()`---that generates a URL for a [shields.io](https://shields.io) badge, which can then be placed in a repo's README. For example, here's one for this blog:\n\n![](https://img.shields.io/badge/rostrum.blog-post-008900?style=flat&labelColor=black&logo=data:image/gif;base64,R0lGODlhEAAQAPEAAAAAABWCBAAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkISIiEoQQQgghRBBCiCAIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiESIoQQQgghhAhCBCEIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAA7){fig-align=\"left\"}\n\n<div class=\"tip\"> ℹ️ <b>Note</b>\n\nSomehow I missed the existence of [the {badger} package by Guangchuang Yu](https://github.com/GuangchuangYu/badger) on CRAN, which also uses [shields.io](https://shields.io/).\n\nAs of 2023, there's also [{badgen} by Jeroen Ooms](https://github.com/jeroen/badgen), which is based on [the badgen library](https://www.npmjs.com/package/badgen) and lets you make badges without an internet connection.\n</div><p>\n\n## What's a badge?\n\nYou'll see badges in the README files of code repositories on sites like GitHub and GitLab. They communicate something about the code at-a-glance and usually contain metadata or a link to further information.\n\n![Examples of badges in the repo README for {data.table}.](resources/data-table-badges.png){fig-alt=\"Part of the README for the data.table package showing a number of badges, including test checks and download count.\" width=\"NA\"}\n\nDynamic metadata badges help you judge the status of the repo. For example, a common badge is one that indicates whether the code has passed testing via a continuous integration service like Travis. So 'build passing' means that the code in the latest update is working. Clicking the badge will take you to the associated site to get more information.\n\nOther badges are static and can act as a handy link. For example, some repos have badges for services like [Ko-Fi](https://help.ko-fi.com/hc/en-us/articles/360021025553-How-to-add-a-Ko-fi-button-to-GitHub) for donations, or perhaps to [open the repo in a cloud-based instance of Binder](https://mybinder.readthedocs.io/en/latest/howto/badges.html).[^mikefc]\n\n## Roll your own\n\nYou can create your own badges for whatever purpose.\n\nI want people to know if one of my GitHub repositories is related to a post on this blog so they can find out more. I could just link to the post in the README---I often do---but the badge sits at the top of the README and is eye-catching. It's also a useful at-a-glance reminder for me when I'm looking over my repos.\n\nThe rest of this post lays out how you can build one for yourself.\n\n### shields.io\n\nFortunately, There's a service called [shields.io](https://shields.io/) that makes it easy to create a simple badge. It works by exposing a badge with parameters you provide in a URL string.\n\nYou can generate a simple static badge by modifying a URL string in the form `https://img.shields.io/badge/<LABEL>-<MESSAGE>-<COLOR>`.\n\nSo `![](https://img.shields.io/badge/label-message-red)` results in this:\n\n![](https://img.shields.io/badge/label-message-red){fig-align=\"left\"}\n\nYou could build on this by providing an alternative style and an image from [Simple Icons](https://simpleicons.org/).\n\nFor example, `![](https://img.shields.io/badge/label-message-181717?style=for-the-badge&logo=github)` results in this:\n\n![](https://img.shields.io/badge/label-message-181717?style=for-the-badge&logo=github){fig-align=\"left\"}\n\nSo you can see that additional 'arguments' to the basic call are added after a `?` and then additional parts added with an `&`.\n\n### {badgr}\n\nThis got me thinking about a quick R function to build up a badge URL. This became [the `get_badge()` function in the {badgr} package](https://github.com/matt-dray/badgr). This is currently a bit janky and untested, but so far it does what I want it to do.\n\nYou can install it with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"remotes\")  # if not yet installed\nremotes::install_githb(\"matt-dray/badgr\")\n```\n:::\n\n\n`get_badge()` builds up the components of a shields.io-valid URL given the arguments you provide. For example, you can specify the text (`label` and `message` arguments) and background colour to go on either side of the badge (`label_color` and `color`). You can also include a logo from [simpleicons.org](http://simpleicons.org/) (`logo_simple`) or a custom icon of your choosing (`logo_path`).\n\nThe most complex part is that the path to the custom logo has to be base64-encoded, which is done with `base64enc::base64encode()`. The output from that is then passed into the shields.io URL.\n\nBy default, the function wraps your badge in Markdown in the form `[![](<shields.io URL>)](<provided link>)` and copies it to your clipboard, ready for you to paste it into a README somewhere. It also sends the URL to your browser for a preview.\n\n### A rostrum.blog badge\n\nSo, I made a badge that has:\n\n* 'rostrum.blog' on the left side, with a black background\n* 'post' on the right side with a green background (to match the green used on this site)\n* the rostrum.blog 'bug' logo gif (used as the favicon for the site)[^icon]\n\nI achieved that with the following code:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set path to custom logo (a gif in this case)\nlogo <- \"https://raw.githubusercontent.com/matt-dray/rostrum-blog/master/static/images/favicon.gif\"\n\n# Set underlying badge link (where the badge-click will take you)\nlink <- \"https://www.rostrum.blog/\"\n\nblog_badge <- badgr::get_badge(\n  label = \"rostrum.blog\",   # left-side text\n  message = \"post\",         # right-side text\n  color = \"008900\",         # left-side colour (green)\n  label_color = \"black\",    # right_side colour\n  md_link = link,           # where to go when clicked\n  logo_path = logo,         # path to my logo\n  browser_preview = FALSE,  # don't open preview\n  to_clipboard = FALSE      # don't copy to clipboard\n)\n```\n:::\n\n\nThat results in the following string output:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblog_badge\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"[![](https://img.shields.io/badge/rostrum.blog-post-008900?style=flat&labelColor=black&logo=data:image/gif;base64,R0lGODlhEAAQAPEAAAAAABWCBAAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkISIiEoQQQgghRBBCiCAIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiESIoQQQgghhAhCBCEIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAA7)](https://www.rostrum.blog/)\"\n```\n:::\n:::\n\n\nThis is a shields.io-valid URL encased in some Markdown that allows it to be pasted directly into a GitHub README, for example.\n\nIt looks like this when rendered:\n\n[![](https://img.shields.io/badge/rostrum.blog-post-008900?style=flat&labelColor=black&logo=data:image/gif;base64,R0lGODlhEAAQAPEAAAAAABWCBAAAAAAAACH5BAlkAAIAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAC55QkISIiEoQQQgghRBBCiCAIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAAh+QQJZAACACwAAAAAEAAQAAAC55QkIiESIoQQQgghhAhCBCEIgiAIgiAIQiAIgSAIgiAIQiAIgRAEQiAQBAQCgUAQEAQEgYAgIAgIBAKBQBAQCAKBQEAgCAgEAoFAIAgEBAKBIBAQCAQCgUAgEAgCgUBAICAgICAgIBAgEBAgEBAgEBAgECAgICAgECAQIBAQIBAgECAgICAgICAgECAQECAQICAgICAgICAgEBAgEBAgEBAgICAgICAgECAQIBAQIBAgECAgICAgIBAgECAQECAQIBAgICAgIBAgIBAgEBAgECAgECAgICAgICAgECAgECAgQIAAAQIKAAA7){fig-align=\"left\"}](https://www.rostrum.blog/)\n\nNote that clicking the badge in a README will link to wherever you set in the `md_link` argument.\n\nNote that the icon is subtly animated (the bug antennae open and close) because the source image was a gif.\n\n<div class=\"tip\"> \n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;\"><path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z\"/></svg>`{=html} <b>Note</b>\n\nMore recently I've realised that it would be handy to have a README badge to indicate that one of my repos contains a Shiny app and whether it's available on the internet. The right-hand side of the badge can point out whether the app is live (e.g. on shinyapps.io) or 'not hosted'. For example:\n\n![](https://img.shields.io/badge/Shiny-shinyapps.io-blue?style=flat&labelColor=white&logo=RStudio&logoColor=blue)\n</div><p>\n\n## Environment {.appendix}\n\n<details><summary>Session info</summary>\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLast rendered: 2023-07-22 11:32:29 BST\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Ventura 13.2.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] crayon_1.5.2      vctrs_0.6.3       cli_3.6.1         knitr_1.43.1     \n [5] rlang_1.1.1       xfun_0.39         stringi_1.7.12    purrr_1.0.1      \n [9] generics_0.1.3    assertthat_0.2.1  jsonlite_1.8.7    glue_1.6.2       \n[13] badgr_0.1.1       clipr_0.8.0       htmltools_0.5.5   rmarkdown_2.23   \n[17] emo_0.0.0.9000    evaluate_0.21     fontawesome_0.5.1 fastmap_1.1.1    \n[21] base64enc_0.1-3   yaml_2.3.7        lifecycle_1.0.3   stringr_1.5.0    \n[25] compiler_4.3.1    htmlwidgets_1.6.2 timechange_0.2.0  rstudioapi_0.15.0\n[29] digest_0.6.33     magrittr_2.0.3    tools_4.3.1       lubridate_1.9.2  \n```\n:::\n:::\n\n</details>\n\n[^icon]: Bear in mind that a very large image might not be that effective when squashed down to fit into the badge. The icon I've used is only 16x16, so is already small and looks fine in the badge.\n[^mikefc]: And others are just for fun. I was particularly amused to see a '[cool | useless](https://github.com/coolbutuseless/dplyr-cli/blob/master/README.md)' badge in repos by [mikefc](https://coolbutuseless.github.io/) ([\\@coolbutuseless](https://twitter.com/coolbutuseless)).",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}