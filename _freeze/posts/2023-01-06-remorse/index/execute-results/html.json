{
  "hash": "d12c72701b71738bfe258906bf918561",
  "result": {
    "markdown": "---\ntitle: .-././--/---/.-./.../.\ndate: 2023-01-06\nslug: remorse\ncategories:\n  - r\n  - remorse\n  - sonify\nresources: \n  - \"resources/remorse.wav\"\n---\n\n\n![You may not believe it, but I am releasing this art under CC0.](resources/morse.png){fig-alt=\"Crudely drawn lineart of a Morse Code tapping machine with text saying 'dit' and 'dah' above it.\" width=\"100%\"}\n\n## tl;dr\n\nOn a whim, I've written [{remorse}](https://github.com/matt-dray/remorse): a tiny R package that converts text to [Morse Code](https://en.wikipedia.org/wiki/Morse_code) to audio.\n\n## Beat a dead morse\n\nIn [the last post](https://www.rostrum.blog/2023/01/04/rogue-sfx/) I mentioned [{sonify}](https://cran.r-project.org/package=sonify) for making R do little audible beeps and boops.\n\nIt reminded me of one (of many) unwritten micro-projects I've got kicking around in my brain: obviously you could use {sonify} to communicate Morse Code. And why not translate from text to Morse (and back) while you're at it?[^translate]\n\nTo be honest this was a classic case of name-driven development (NDD): I thought {remorse} was a funny name for a package and worked backwards from there. \n\nObviously it says 'Morse' in the name, but also 'remorse' is usually what I feel after putting together a small pointless package; pointless-package existentialism (PPE) is something I have [a track history](https://matt-dray.github.io/projects/) with.\n\nBut of course, the true remorse is that I didn't find the better package-name pun: {morseinspector}. But maybe that's too long of a name and maybe non-Brits wouldn't understand [the reference](https://en.wikipedia.org/wiki/Inspector_Morse_(TV_series)). Maybe I'm thinking too hard.[^inspector]\n\n## Oh dit-dit-dahling\n\nConsider this highly plausible scenario: it's 20XX, the apocalypse has come, and the remaining humans on planet Earth communicate by Morse Code. For some reason.[^telegraph]\n\nWow, wouldn't it be handy to have a text-to-Morse translator? \n\nWell friend, if you've managed to find an electronic thinking box in the apocalyptic barren  wastelands (assuming electricity is still available (and the machine has R installed (and the {remorse} package was downloaded before the world's internet cut out (and you know how to use R (and you don't own a simpler, more portable Morse Code translation pamphlet))))), then you will have this incredible power at your fingertips.\n\nOr maybe you'd rather risk it? Pfft.\n\n## Use the Morse...\n\nThat's an awful lot of build-up for a very simple package. Let's take a look at what little it does.\n\nAs usual, {remorse} lives on GitHub[^edgy], so it can be downloaded with a little help from the typographically-adjacent {remotes} package:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.github(\"remotes\")\nremotes::install_github(\"matt-dray/remorse\")  # v0.1.1 here\n```\n:::\n\n\nThat'll install {sonify} as well, which is needed for the audio.\n\nRight so: text to Morse Code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntext_in <- \"Ahoy pal!\"\nmorse <- remorse::txt2morse(text_in)\nmorse\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \".-/..../---/-.-- .--./.-/.-../-.-.--\"\n```\n:::\n:::\n\n\nSo each letter has been translated to the relevant string of 'dits and dahs' ('dots' and 'dashes') that make up Morse Code. I've used a period (`.`) and hyphen (`-`) to represent these in {remorse}, with forward slashes (`/`) between Morse groups that represent individual characters, and a space for the spaces between words.\n\nNote that not all characters can be converted to Morse Code. I did some research (Wikipedia) to discover the mappings from letters, numbers and punctuation to Morse Code. This information is used internally as a lookup, but is also exported in `morse_lookup`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nremorse::morse_lookup\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       A        B        C        D        E        F        G        H \n    \".-\"   \"-...\"   \"-.-.\"    \"-..\"      \".\"   \"..-.\"    \"--.\"   \"....\" \n       I        J        K        L        M        N        O        P \n    \"..\"   \".---\"    \"-.-\"   \".-..\"     \"--\"     \"-.\"    \"---\"   \".--.\" \n       Q        R        S        T        U        V        W        X \n  \"--.-\"    \".-.\"    \"...\"      \"-\"    \"..-\"   \"...-\"    \".--\"   \"-..-\" \n       Y        Z        0        1        2        3        4        5 \n  \"-.--\"   \"--..\"  \"-----\"  \".----\"  \"..---\"  \"...--\"  \"....-\"  \".....\" \n       6        7        8        9        &        '        @        ) \n \"-....\"  \"--...\"  \"---..\"  \"----.\"  \".-...\" \".----.\" \".--.-.\" \"-.--.-\" \n       (        :        ,        =        !        .        -        * \n \"-.--.\" \"---...\" \"--..--\"  \"-...-\" \"-.-.--\" \".-.-.-\" \"-....-\"   \"-..-\" \n       +        \"        ?        /          \n \".-.-.\" \".-..-.\" \"..--..\"  \"-..-.\"      \" \" \n```\n:::\n:::\n\n\nOf course, this means we can map backwards from Morse Code to letters, numbers and punctuation:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntext_out <- remorse::morse2txt(morse)\ntext_out\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"AHOY PAL!\"\n```\n:::\n:::\n\n\nMorse Code has no sense of case, so it just converts it all to uppercase. Like you're shouting; the most clear form of communication.\n\nSo, you can argue justifiably that `txt2morse(\"yo\") |> morse2txt()` is just a worse version of `toupper()` that strips out certain unmappable characters.\n\nBut of course it does so much more. Well, one thing more. Let's go from Morse to audio.\n\nFirst a reminder of the code from earlier:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmorse\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \".-/..../---/-.-- .--./.-/.-../-.-.--\"\n```\n:::\n:::\n\n\nAnd to generate audio you just:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nremorse::morse2sfx(morse)\n```\n:::\n\n\nThe output sounds like this:\n\n<html><audio controls><source src=\"resources/remorse.wav\" type=\"audio/wav\"></audio></html>\n\nWow. It plays audible dits (one 'time unit', default is `dit_length = 0.05` in seconds), dahs (three), spaces between dits and dahs (one), spaces between Morse character groupings (three) and spaces between words (seven). Tell all your friends.\n\nSo, do I still feel remorse for writing {remorse}, even after demonstrating its incredible power? Yes. All I ask is that you think of me in those apocalyptic wastelands.\n\n<div class=\"tip\"> `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 512 512\" style=\"height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;\"><path d=\"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z\"/></svg>`{=html} <b>Note</b>\n\nI just realised you can turn Morse Code into... Morse Code. Mind blown.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nremorse::txt2morse(\"hi\") |>\n  remorse::txt2morse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \".-.-.-/.-.-.-/.-.-.-/.-.-.-/-..-./.-.-.-/.-.-.-\"\n```\n:::\n:::\n\n\n'Morsest Code'. Why? Absolutely.\n\nMaybe I've been watching [too much Tom7](https://www.youtube.com/watch?v=HLRdruqQfRk) recently.\n\n</div>\n\n## Environment {.appendix}\n\n<details><summary>Session info</summary>\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLast rendered: 2023-08-11 19:23:20 BST\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Ventura 13.2.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.2 compiler_4.3.1    fastmap_1.1.1     cli_3.6.1        \n [5] tools_4.3.1       htmltools_0.5.5   remorse_0.1.1     rstudioapi_0.15.0\n [9] yaml_2.3.7        rmarkdown_2.23    knitr_1.43.1      jsonlite_1.8.7   \n[13] xfun_0.39         digest_0.6.33     rlang_1.1.1       fontawesome_0.5.1\n[17] evaluate_0.21    \n```\n:::\n:::\n\n</details>\n\n[^inspector]: Not to mention that it's a bad pun: the package doesn't 'inspect' Morse; it translates it. Yep, definitely I'm thinking too hard about this.\n[^telegraph]: Personally I'd rather see [telegraphy](https://en.wikipedia.org/wiki/Telegraphy) make a comeback.\n[^edgy]: Wow, how edgy, maybe he's had a bad run in with the CRAN maintainers, or perhaps he's read the bit of [the CRAN repository policy](https://cran.r-project.org/web/packages/policies.html) that says 'a packageâ€™s contribution has to be non-trivial' ([whatever that means](https://fosstodon.org/@mattdray/109644645694966586)). Or he's just lazy.\n[^translate]: Which completes my hattrick of 'R translation' packages, I suppose. [The {r2eng} package](https://www.rostrum.blog/2020/11/14/hello-r2eng/) attempts to [translate R code to spoken English and have your computer speak it out loud](https://www.rostrum.blog/2020/11/14/hello-r2eng/). [The {dialga} package](https://www.github.com/matt-dray/dialga/) takes R code and [translates it to cron strings and those cron strings to English](https://www.rostrum.blog/2021/04/10/dialga/).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}