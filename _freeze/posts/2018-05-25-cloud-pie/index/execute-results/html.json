{
  "hash": "4139439692e3c4f8ba0763e9c913da56",
  "result": {
    "markdown": "---\ntitle: Cloudy with a chance of pie\ndate: 2018-05-25\nslug: cloud-pie\ncategories:\n  - dataviz\n  - plotrix\n  - r\n  - text\n---\n\n\n## tl;dr\n\nMultiple visualisation 'wrongs' come together to make a new and powerful 'right' way to visualise text data, lol.\n\n## The pinnacle of visualisation\n\nGreat news everyone: I've taken the best of two stellar data visualisations and smashed them together into something that can only be described as perfection.\n\nLet me set the scene. There's three things we can agree on:\n\n1. [Everyone loves pie charts](https://www.google.co.uk/search?q=pie+charts+suck), particularly when they're in 3D, exploded and tilted.\n2. [Word clouds aren't at all overused](https://www.google.co.uk/search?q=word+clouds+suck).\n3. I have too much time on my hands.\n\nWith that in mind, I've artfully melded clouds and pies into the function `cloud_pie()`, which I think sounds rather sweet.\n\nYou can find the function in my personal package {dray}, which I made following [Hilary Parker's excellent 'Writing an R Package from Scratch' blogpost](https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nremotes::install_github(\"matt-dray/dray\")\n```\n:::\n\n\n## Pie in the sky\n\n`cloud_pie()` depends on the {plotrix} and {wordcloud} packages and takes three arguments:\n\n* `data`: summary dataframe with two columns: categories, and counts for those categories\n* `name_col`: column containing the category names\n* `count_col`: column containing the counts for each category\n\n`data` must be a dataframe with a column of categories (i.e. `name_col`) and a column of count values associated with those categories (i.e. `count_col`). \n\nIt's also completely untested and will probably break if you actually try to use it. So let's try to use it.\n\n## Pokémon data, of course\n\nLet's use the same data as in the [Pokéballs in Super Smash Bros](https://www.rostrum.blog/2018/05/19/pokeballs-in-super-smash-bros/) blog post, which is [hosted on GitHub](https://github.com/matt-dray/draytasets).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr, warn.conflicts = FALSE)\n\npkmn_raw <- read.csv(\n  \"https://raw.githubusercontent.com/matt-dray/draytasets/master/ssb_pokeballs.csv\"\n)\n\npkmn_summary <- pkmn_raw %>%\n  group_by(pokemon) %>%\n  count() %>%\n  ungroup()\n\nglimpse(pkmn_summary)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 13\nColumns: 2\n$ pokemon <chr> \"beedrill\", \"blastoise\", \"chansey\", \"charizard\", \"clefairy\", \"…\n$ n       <int> 26, 25, 26, 23, 18, 26, 25, 24, 20, 3, 25, 26, 23\n```\n:::\n:::\n\n\n## The big reveal\n\nAccept your fate.\n\n\n::: {.cell warnings='false'}\n\n```{.r .cell-code}\ndray::cloud_pie(\n  data = pkmn_summary,\n  name_col = \"pokemon\",\n  count_col = \"n\"\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in wordcloud(words = data[[name_col]], freq = data[[count_col]], :\nchansey could not be fit on page. It will not be plotted.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in wordcloud(words = data[[name_col]], freq = data[[count_col]], :\nkoffing could not be fit on page. It will not be plotted.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in wordcloud(words = data[[name_col]], freq = data[[count_col]], :\nbeedrill could not be fit on page. It will not be plotted.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/cloud_pie-1.png){width=672}\n:::\n:::\n\n\nDid I forget to mention that the typeface is gothic and colours are selected randomly from the named colours that R knows about? The words and pie slices are sized by frequency and match up by colour. Sensational.\n\n## You know what to do\n\nLet me know if you decide to nominate me for an [Information is Beautiful award](https://youtu.be/dQw4w9WgXcQ).\n\n## Environment {.appendix}\n\n<details><summary>Session info</summary>\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLast rendered: 2023-08-09 22:14:50 BST\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.1 (2023-06-16)\nPlatform: aarch64-apple-darwin20 (64-bit)\nRunning under: macOS Ventura 13.2.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Europe/London\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] dplyr_1.1.2\n\nloaded via a namespace (and not attached):\n [1] vctrs_0.6.3        cli_3.6.1          knitr_1.43.1       rlang_1.1.1       \n [5] xfun_0.39          gifski_1.12.0-1    generics_0.1.3     jsonlite_1.8.7    \n [9] dray_0.0.0.9000    glue_1.6.2         htmltools_0.5.5    wordcloud_2.6     \n[13] fansi_1.0.4        rmarkdown_2.23     evaluate_0.21      tibble_3.2.1      \n[17] fastmap_1.1.1      yaml_2.3.7         lifecycle_1.0.3    compiler_4.3.1    \n[21] RColorBrewer_1.1-3 Rcpp_1.0.11        htmlwidgets_1.6.2  pkgconfig_2.0.3   \n[25] rstudioapi_0.15.0  digest_0.6.33      R6_2.5.1           tidyselect_1.2.0  \n[29] utf8_1.2.3         pillar_1.9.0       magrittr_2.0.3     tools_4.3.1       \n[33] plotrix_3.8-2     \n```\n:::\n:::\n\n</details>\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}