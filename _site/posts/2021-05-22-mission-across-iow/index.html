<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.176">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matt Dray">
<meta name="dcterms.date" content="2021-05-22">

<title>rostrum.blog (test) - Mission Across the Isle of Wight</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo-black-trans.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    null
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-binding-2.1.2/leaflet.js"></script>
<script src="../../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../../site_libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
<link href="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet">
<script src="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<link href="../../site_libs/fontawesome-4.7.0/font-awesome.min.css" rel="stylesheet">
<link href="../../site_libs/leaflet-measure-2.1.7/leaflet-measure.css" rel="stylesheet">
<script src="../../site_libs/leaflet-measure-2.1.7/leaflet-measure.min.js"></script>
<link href="../../site_libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.css" rel="stylesheet">
<script src="../../site_libs/lfx-fullscreen-1.0.2/lfx-fullscreen-prod.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo-green-trans.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">rostrum.blog (test)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target=""><i class="bi bi-question-circle-fill" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss-fill" role="img" aria-label="RSS feed">
</i> 
 <span class="menu-text">RSS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/matt-dray/rostrum-blog-2" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub source code">
</i> 
 <span class="menu-text">Source</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Mission Across the Isle of Wight</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">geospatial</div>
                <div class="quarto-category">leaflet</div>
                <div class="quarto-category">osmextract</div>
                <div class="quarto-category">r</div>
                <div class="quarto-category">sf</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://www.matt-dray.com">Matt Dray</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 22, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#tldr" id="toc-tldr" class="nav-link active" data-scroll-target="#tldr">tl;dr</a></li>
  <li><a href="#geowizard" id="toc-geowizard" class="nav-link" data-scroll-target="#geowizard">GeoWizard</a></li>
  <li><a href="#code-walkthrough" id="toc-code-walkthrough" class="nav-link" data-scroll-target="#code-walkthrough">Code walkthrough</a>
  <ul class="collapse">
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">Packages</a></li>
  <li><a href="#the-boundary" id="toc-the-boundary" class="nav-link" data-scroll-target="#the-boundary">The boundary</a></li>
  <li><a href="#openstreetmap-features" id="toc-openstreetmap-features" class="nav-link" data-scroll-target="#openstreetmap-features">OpenStreetMap features</a></li>
  <li><a href="#the-line" id="toc-the-line" class="nav-link" data-scroll-target="#the-line">The line</a></li>
  <li><a href="#the-platinum-zone" id="toc-the-platinum-zone" class="nav-link" data-scroll-target="#the-platinum-zone">The platinum zone</a></li>
  <li><a href="#obstructions" id="toc-obstructions" class="nav-link" data-scroll-target="#obstructions">Obstructions</a></li>
  <li><a href="#map" id="toc-map" class="nav-link" data-scroll-target="#map">Map</a></li>
  </ul></li>
  <li><a href="#next" id="toc-next" class="nav-link" data-scroll-target="#next">Next</a></li>
  <li><a href="#disclaimer" id="toc-disclaimer" class="nav-link" data-scroll-target="#disclaimer">Disclaimer</a></li>
  
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/maw.png" class="img-fluid figure-img" style="width:100.0%" alt="A preview of an interactive map showing the Isle of Wight, UK, with a straight line across it. The start and endpoints are marked and there are coloured lines crossing the straight line. There are panels with options to turn on and off map layers and zoom in. Two large emoji boots are shown above the line."></p>
<figcaption class="figure-caption">Isle of Wight, coloured off-white.</figcaption>
</figure>
</div>
<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">tl;dr</h2>
<p>I used R to identify and map hazards on a potential straight-line walking route across the Isle of Wight, mimicking <a href="https://www.youtube.com/watch?v=M7w986ni7_g&amp;list=PL_japiE6QKWphPxjqn0KJjfoRnuVSELaI">Tom ‘GeoWizard’ Davies’s ‘Mission Across’ series of YouTube videos</a>. You can <a href="#map">jump straight to the interactive map</a>.</p>
</section>
<section id="geowizard" class="level2">
<h2 class="anchored" data-anchor-id="geowizard">GeoWizard</h2>
<p>Tom ‘GeoWizard’ Davies is perhaps best known for <a href="https://www.youtube.com/c/GeoWizard">his YouTube channel</a>, where he posts <a href="https://www.twitch.tv/geowizardstreams">Twitch stream</a> highlights of <a href="https://www.geoguessr.com/">Geoguessr</a>, a game where you pinpoint a randomised location based only <a href="https://www.google.com/streetview/">Google StreetView</a>.</p>
<p>He also chronicles real-life trekking adventures, usually with a twist. Particularly captivating are the ‘Mission Across’ videos, where Tom attempts to cross a country in a straight line on foot. That includes having to clamber over hedges, swim across ponds, get stuck in bogs and risk the wrath of local farmers and landowners. So far this has covered <a href="https://www.youtube.com/watch?v=M7w986ni7_g&amp;list=PL_japiE6QKWphPxjqn0KJjfoRnuVSELaI">Wales</a>, <a href="https://www.youtube.com/watch?v=Jk84QaNEOFw&amp;list=PL_japiE6QKWo358zmUkEydTjyLzd1yBh5">Wales again</a> and <a href="https://www.youtube.com/watch?v=CDPhdkdR9qI&amp;list=PL_japiE6QKWoP-qPQ3wXuOtLkZeYumJRH">Norway</a>, with a Scotland series due this month.</p>
<p>Of course, this requires a lot of planning to decide what the best route is and to make sure you don’t traipse directly through someone’s living room in your muddy boots. Typically this might involve lots of time in GIS software and various online mapping services.</p>
<p>I learnt recently of <a href="https://docs.ropensci.org/osmextract/">the {osmextract} package</a> for <a href="https://www.r-project.org/">the R language</a>, which fetches geographic features from <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, and wondered how easy it would be to use R to do a light-touch assessment of straight line routes in a ‘Mission Across’ style. Basically, can we work out the number and type of obstructions we’d face on a given route?</p>
<p>You can <a href="#map">jump straight to an interactive map</a> with my example for the Isle of Wight, or keep reading for the code and an explanation.</p>
<p>As an aside, Tom has also made the album ‘16 Bit Adventure’ under the moniker ‘Amynedd’; music which accompanies the ‘Mission Across’ videos. Press play here for inspiration as you read on.</p>
<iframe src="https://open.spotify.com/embed/track/0F5DtplpuR54PvREsb8sKP" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media">
</iframe>
</section>
<section id="code-walkthrough" class="level2">
<h2 class="anchored" data-anchor-id="code-walkthrough">Code walkthrough</h2>
<section id="packages" class="level3">
<h3 class="anchored" data-anchor-id="packages">Packages</h3>
<p>R is very capable as a code-led tool for geospatial manipulation and mapping. Along with {tidyverse} for data wrangling, there’s a few geospatial packages we need: <a href="https://docs.ropensci.org/geojsonio/">{geojsonio}</a> lets us read GeoJSON files, <a href="https://r-spatial.github.io/sf/">{sf}</a> is for handling ‘special features’ geometry in a ‘tidy’ way, and <a href="https://rstudio.github.io/leaflet/">{leaflet}</a> lets us create interactive maps. <a href="https://docs.ropensci.org/osmextract/">{osmextract}</a> was the main motivation for this post; it fetches OpenStreetMap features pretty painlessly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(geojsonio)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(leaflet)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(leaflet.extras)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(osmextract)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(sf)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(tidyverse)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All these packages can all be downloaded from CRAN with <code>install.packages()</code>.</p>
<p>While we’re here, I’m going to turn off ‘spherical geometry’. This is a fancy way of saying that we’re going to pretend the Earth is flat (!) to avoid some awkward geospatial maths. I don’t think that’s going to be a big deal for the scale of this demo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sf_use_s2</span>(<span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Spherical geometry (s2) switched off</code></pre>
</div>
</div>
</section>
<section id="the-boundary" class="level3">
<h3 class="anchored" data-anchor-id="the-boundary">The boundary</h3>
<p>For purposes of this post, I wanted to look at a small, contained, ‘regularly-shaped’ geographic area to keep things simple. It didn’t have to be a country.</p>
<p>I settled on <a href="https://en.wikipedia.org/wiki/Isle_of_Wight">the Isle of Wight</a> (IOW)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, a small island off the south-coast of England. It’s mostly rural, with farms, hedges and waterways to cross, but there are certainly more built-up areas. It also helps that the IOW is featured in <a href="https://docs.ropensci.org/osmextract/index.html">the {osmextract} documentation</a>!</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="resources/flag.png" class="img-fluid figure-img" style="width:50.0%" alt="The flag of the Isle of White. The lower half is dark blue and white alternating wavy lines to indicate the sea The upper half is light blue with a white geometric shape to represent the island, which is a diamond with a triangular portion cut from the uppermost corner."></p>
<figcaption class="figure-caption">The Isle of Wight: a vexillologist’s delight.</figcaption>
</figure>
</div>
<p>First thing is to fetch a polygon that represents the extent of the island. Fortunately, Local Authority District (LAD) boundaries for the UK are available to download from the Official for National Statistics (ONS) in GeoJSON form<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. We can download the file and filter for the IOW, specifically.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download geojson</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>geojson_url <span class="ot">&lt;-</span> <span class="st">"https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/LAD_DEC_2020_UK_BGC/FeatureServer/0/query?outFields=*&amp;where=1%3D1&amp;f=geojson"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>geojson_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(tmp, <span class="st">"lads.geojson"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(geojson_url, geojson_path)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read LAD boundaries, filter to IOW</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>iow_extent <span class="ot">&lt;-</span> <span class="fu">geojson_read</span>(geojson_path, <span class="at">what =</span> <span class="st">"sp"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(LAD20NM <span class="sc">==</span> <span class="st">"Isle of Wight"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(tmp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I’ve used boundaries that are ‘clipped to the coastline’ because I don’t think you should have to swim out to the low-water mark to complete such a challenge.</p>
</section>
<section id="openstreetmap-features" class="level3">
<h3 class="anchored" data-anchor-id="openstreetmap-features">OpenStreetMap features</h3>
<p>We want to identify features like hedgerows, buildings and waterways that will become obstructions for our imaginary walk across the island. The <code>oe_get()</code> function from {osmextra} is an easy way to pull features from OpenStreetMap en masse. You can supply a location and receive features within that area.</p>
<p>First, the polygonal features, which you can get with argument <code>layer = "multipolygons"</code>. You can see that a geometry column is returned, which contains the coordinates for the polygons.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch polygonal features for IoW</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>osm_polys <span class="ot">&lt;-</span> <span class="fu">oe_get</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Isle of Wight"</span>, <span class="co"># geographic area of interest</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">layer =</span> <span class="st">"multipolygons"</span>,  <span class="co"># fetch polygons</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>,  <span class="co"># return character-class</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">TRUE</span>  <span class="co"># don't print info</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">4326</span>)  <span class="co"># latlong coord reference system</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Limited preview</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(<span class="fu">select</span>(osm_polys, osm_id, name, type, geometry))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 84,599
Columns: 4
$ osm_id   &lt;chr&gt; "4763", "5922", "6022", "7141", "7316", "29744", "70978", "71…
$ name     &lt;chr&gt; NA, NA, NA, NA, NA, "Ryde Canoe Lake", "Quarr Abbey", NA, "Be…
$ type     &lt;chr&gt; "multipolygon", "multipolygon", "multipolygon", "multipolygon…
$ geometry &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((-1.251425 5..., MULTIPOLYGON (((…</code></pre>
</div>
</div>
<p>Of course, we can grab line features too. The default for <code>layer</code> is lines, so we don’t need to supply this argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch line features for IoW</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>osm_lines <span class="ot">&lt;-</span>  <span class="fu">oe_get</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Isle of Wight"</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">TRUE</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">4326</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For convenience, I’m simplifying the features down to the ones we care about. For Tom, hedgerows were a constant nuisance, waterways were cold and perilous, and buildings could contain angry landowners. We want to avoid them all, ideally.</p>
<p>We can create a function to extract named features (we want rows containing ‘barriers’, ‘buildings’, ‘natural’ and ‘waterway’ features), and then iterate over our lines and polygons to isolate them. I’ve put them into a single object so it’s easier to reference them later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for a single feature type from oe_get() output</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 'sf_in' is output from oe_get(); 'feature' is the feature we want</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>isolate_feature <span class="ot">&lt;-</span> <span class="cf">function</span>(sf_in, feature) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  sf_in <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sf_in[[feature]])) <span class="sc">%&gt;%</span>  <span class="co"># filter for feature</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(osm_id, <span class="at">type =</span> <span class="fu">all_of</span>(feature), geometry)  <span class="co"># simplify object</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Get all the features as a list object with one element per feature</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>features <span class="ot">&lt;-</span> <span class="fu">map2</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(osm_lines, osm_polys, osm_polys, osm_lines),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="st">"barrier"</span>, <span class="st">"building"</span>, <span class="st">"natural"</span>, <span class="st">"waterway"</span>),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  isolate_feature</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="st">"barrs"</span>, <span class="st">"bldgs"</span>, <span class="st">"natur"</span>, <span class="st">"wways"</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Limited preview of the waterways data</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(features<span class="sc">$</span>wways)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,714
Columns: 3
$ osm_id   &lt;chr&gt; "3027797", "3127808", "4680059", "5171926", "5171930", "51722…
$ type     &lt;chr&gt; "river", "river", "river", "stream", "ditch", "river", "strea…
$ geometry &lt;LINESTRING [°]&gt; LINESTRING (-1.272943 50.62..., LINESTRING (-1.290…</code></pre>
</div>
</div>
</section>
<section id="the-line" class="level3">
<h3 class="anchored" data-anchor-id="the-line">The line</h3>
<p>We need to specify a straight-line route.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> For this demonstration, and in interests fo speed, I’ve just chosen one that looks alright by eye in terms of obstructions. Kinda.</p>
<p>Of course, you can use the approach outlined in this post to try other lines and discover quantitatively which ones have the fewest obstructions. That’s the subject of <a href="https://github.com/matt-dray/mission-across-iow">an upcoming Shiny app</a>, which will allow the user to provide a line and get feedback on the number and count of hazards.</p>
<p>Crucially, the line is clipped to the boundary of the island, so it goes from coast to coast.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a straight line</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 'x1', etc, are start/end latlongs; 'boundary_poly' is the GeoJSON</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>make_line <span class="ot">&lt;-</span> <span class="cf">function</span>(x1, y1, x2, y2, boundary_poly) {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">st_linestring</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(y1, y2, x1, x2), <span class="at">ncol =</span> <span class="dv">2</span>))  <span class="co"># to matrix</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>(x, <span class="at">crs =</span> <span class="dv">4326</span>)  <span class="co"># set coord reference system</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_intersection</span>(y, boundary_poly)  <span class="co"># clip line to island boundary</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Hard-coded start/end latlongs</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>start_x <span class="ot">&lt;-</span> <span class="fl">50.658</span>; start_y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">1.472</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>end_x <span class="ot">&lt;-</span> <span class="fl">50.707</span>; end_y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">1.101</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Build line between the points, clip to IOW boundary</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>line <span class="ot">&lt;-</span> <span class="fu">make_line</span>(start_x, start_y, end_x, end_y, iow_extent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>although coordinates are longitude/latitude, st_intersection assumes that they
are planar</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(line)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sfc_LINESTRING of length 1; first list element:  'XY' num [1:2, 1:2] -1.47 -1.1 50.66 50.71</code></pre>
</div>
</div>
<p>Here’s a quick preview of where our line is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> iow_extent) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> line) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_map</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/line-map-1.png" class="img-fluid" alt="A simple map of the Isle of Wight, UK, with a line drawn from the east to west coasts, passing roughly throught the middle." width="672"></p>
</div>
</div>
</section>
<section id="the-platinum-zone" class="level3">
<h3 class="anchored" data-anchor-id="the-platinum-zone">The platinum zone</h3>
<p>In practice it’s very difficult to keep exactly to the line and some deviation may be required at a landowner’s request, for example. What’s an acceptable amount of wiggle room?</p>
<p>Tom spoke in one of his videos about assigning scores to a mission based on minimal deviation from the line. For example, staying within 25 m of the line either side would be a ‘platinum’ standard.</p>
<p>We can build a buffer around our line to create a platinum zone, which will be a useful visual aid in the final map.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a buffer around the straight line</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 'line' as created with make_line(); 25m is 'platinum' standard</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>make_buffer <span class="ot">&lt;-</span> <span class="cf">function</span>(straight_line, <span class="at">buffer_size =</span> <span class="dv">25</span>) { </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(straight_line, <span class="at">crs =</span> <span class="dv">27700</span>)  <span class="co"># line to draw buffer around</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(x, <span class="at">dist =</span> buffer_size)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(y, <span class="at">crs =</span> <span class="dv">4326</span>)  <span class="co"># reset coord reference system</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a 25m buffer ('platinum standard') around the line</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>buffer <span class="ot">&lt;-</span> <span class="fu">make_buffer</span>(line)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(buffer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sfc_POLYGON of length 1; first list element: List of 1
 $ : num [1:123, 1:2] -1.1 -1.1 -1.1 -1.1 -1.1 ...
 - attr(*, "class")= chr [1:3] "XY" "POLYGON" "sfg"</code></pre>
</div>
</div>
</section>
<section id="obstructions" class="level3">
<h3 class="anchored" data-anchor-id="obstructions">Obstructions</h3>
<p>Our <code>features</code> object currently has all the lines and polygons within the IOW boundary, but we only want the ones that come in contact with (i.e.&nbsp;intersect) with our proposed route. The <code>st_intersects()</code> function from {sf} does exactly that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract features that intersect with the line or buffer geometry</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 'features_sf' contains the features; 'path_sf' for what to intersect</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>find_obs <span class="ot">&lt;-</span> <span class="cf">function</span>(features_sf, path_sf) { </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  row_nums <span class="ot">&lt;-</span> <span class="fu">st_intersects</span>(path_sf, features_sf)[[<span class="dv">1</span>]]  <span class="co"># rows with obstruction</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(features_sf, row_nums)  <span class="co"># extract matching rows</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Find intersection between features and line</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>obstructions <span class="ot">&lt;-</span> <span class="fu">map</span>(features, <span class="sc">~</span><span class="fu">find_obs</span>(.x, line)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_names</span>(<span class="st">"barrs"</span>, <span class="st">"bldgs"</span>, <span class="st">"natur"</span>, <span class="st">"wways"</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Limited preview</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(obstructions<span class="sc">$</span>wways)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 11
Columns: 3
$ osm_id   &lt;chr&gt; "471224569", "552565448", "552565555", "552565565", "55650679…
$ type     &lt;chr&gt; "stream", "stream", "stream", "stream", "ditch", "ditch", "di…
$ geometry &lt;LINESTRING [°]&gt; LINESTRING (-1.285131 50.67..., LINESTRING (-1.216…</code></pre>
</div>
</div>
<p>We can create a quick table to see what the obstructions are for this route.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Type, <span class="sc">~</span>Count,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Barriers"</span>, <span class="fu">nrow</span>(obstructions<span class="sc">$</span>barrs),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Buildings"</span>, <span class="fu">nrow</span>(obstructions<span class="sc">$</span>bldgs),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Waterways"</span>, <span class="fu">nrow</span>(obstructions<span class="sc">$</span>wways),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Water bodies"</span>, <span class="fu">nrow</span>(<span class="fu">filter</span>(obstructions<span class="sc">$</span>natur, type <span class="sc">==</span> <span class="st">"water"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Type</th>
<th style="text-align: right;">Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Barriers</td>
<td style="text-align: right;">92</td>
</tr>
<tr class="even">
<td style="text-align: left;">Buildings</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Waterways</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Water bodies</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>You can see how this information is useful if you wanted to try other straight-line paths and see how they stack up against each other. Maybe you want to reduce the number of barriers (typically hedgerows); maybe you don’t mind swimming across a large water body.</p>
</section>
<section id="map" class="level3">
<h3 class="anchored" data-anchor-id="map">Map</h3>
<p>So we have the objects we need: our straight-line route, the platinum-zone buffer and all the features that cross our path. Now to map it. We can use the {leaflet} package to layer these up on an interactive map, allowing the user to inspect the route and the hazards along the way.</p>
<details>
<summary>
Click to expand the full mapping code
</summary>
<p>The basic approach here is to <code>addproviderTiles()</code> for underlying maps (I’ve chosen these to help add extra context to the route); use <code>addPolygons</code> and <code>addPolylines()</code> to supply the line, buffer and the features as separate ‘layers’ that can be turned on or off; use <code>addAwesomeMarkers()</code> for clickable pop-up feature labels; and supply additional mapping conveniences with <code>addMeasure()</code> and, from {leaflet.extras}, <code>addFullscreenControl()</code> (both functions do what their names suggest).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set multi-use variables</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>marker_fill <span class="ot">&lt;-</span> <span class="st">"darkblue"</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>icon_fill <span class="ot">&lt;-</span> <span class="st">"white"</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>col_line <span class="ot">&lt;-</span> <span class="st">"#000"</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>col_artifical <span class="ot">&lt;-</span> <span class="st">"#F00"</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>col_water <span class="ot">&lt;-</span> <span class="st">"#00F"</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>weight_line <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>weight_obstruction <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>alpha_all <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Interactive map</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Base groups: map tiles</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">"CartoDB.PositronNoLabels"</span>, <span class="at">group =</span> <span class="st">"Simple"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">"Esri.WorldTopoMap"</span>, <span class="at">group =</span> <span class="st">"Terrain"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">"Esri.WorldImagery"</span>, <span class="at">group =</span> <span class="st">"Satellite"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Overlay groups: line and buffer</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolygons</span>(</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> buffer, <span class="at">group =</span> <span class="st">"Line/buffer"</span>, </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> col_line, <span class="at">weight =</span> weight_line, <span class="at">dashArray =</span> <span class="dv">4</span>, </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">opacity =</span> alpha_all</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> line, <span class="at">group =</span> <span class="st">"Line/buffer"</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> col_line, <span class="at">weight =</span> weight_line, </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="cn">FALSE</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Overlay groups: start and end points</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> start_y, <span class="at">lat =</span> start_x, <span class="at">group =</span> <span class="st">"Start/end"</span>,</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> <span class="fu">awesomeIcons</span>(</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">markerColor =</span> <span class="st">"blue"</span>,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">icon =</span> <span class="st">"play"</span>, <span class="at">library =</span> <span class="st">"fa"</span>, <span class="at">iconColor =</span> <span class="st">"#FFF"</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup =</span> <span class="fu">paste0</span>(<span class="st">"&lt;center&gt;Start&lt;br&gt;"</span>, start_x, <span class="st">", "</span>, start_y, <span class="st">"&lt;center&gt;"</span>)</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> end_y, <span class="at">lat =</span> end_x, <span class="at">group =</span> <span class="st">"Start/end"</span>,</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> <span class="fu">awesomeIcons</span>(</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">markerColor =</span> <span class="st">"blue"</span>,</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">icon =</span> <span class="st">"stop"</span>, <span class="at">library =</span> <span class="st">"fa"</span>, <span class="at">iconColor =</span> <span class="st">"#FFF"</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup =</span> <span class="fu">paste0</span>(<span class="st">"&lt;center&gt;End&lt;br&gt;"</span>, end_x, <span class="st">", "</span>, end_y, <span class="st">"&lt;center&gt;"</span>)</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Overlay groups: features in buffer</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> obstructions<span class="sc">$</span>barrs, <span class="at">group =</span> <span class="st">"Barriers"</span>,</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> col_artifical, <span class="at">weight =</span> weight_obstruction,</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Barrier:"</span>, obstructions<span class="sc">$</span>barrs<span class="sc">$</span>type)</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolygons</span>(</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> obstructions<span class="sc">$</span>bldgs, <span class="at">group =</span> <span class="st">"Buildings"</span>,</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> col_artifical, <span class="at">weight =</span> weight_obstruction, </span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">fillColor =</span> col_artifical, <span class="at">fillOpacity =</span> alpha_all,</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Building:"</span>, obstructions<span class="sc">$</span>bldgs<span class="sc">$</span>type)</span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolygons</span>(</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> <span class="fu">filter</span>(obstructions<span class="sc">$</span>natur, type <span class="sc">==</span> <span class="st">"water"</span>), <span class="at">group =</span> <span class="st">"Water"</span>,</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> col_water, <span class="at">weight =</span> weight_obstruction, </span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">fillColor =</span> col_water, <span class="at">fillOpacity =</span> alpha_all,</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">"Water body"</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(</span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> obstructions<span class="sc">$</span>wways, <span class="at">group =</span> <span class="st">"Water"</span>,</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> col_water, <span class="at">weight =</span> weight_obstruction,</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Waterway:"</span>, obstructions<span class="sc">$</span>wways<span class="sc">$</span>type)</span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Control which layers are shown</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addLayersControl</span>(</span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">baseGroups =</span> <span class="fu">c</span>(<span class="st">"Simple"</span>, <span class="st">"Terrain"</span>, <span class="st">"Satellite"</span>),  <span class="co"># radio button</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">overlayGroups =</span> <span class="fu">c</span>(  <span class="co"># checkboxes</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Line/buffer"</span>, <span class="st">"Start/end"</span>,  <span class="co"># line-related</span></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Water"</span>, <span class="st">"Barriers"</span>, <span class="st">"Buildings"</span>  <span class="co"># obstructions</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"topright"</span>,</span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">layersControlOptions</span>(<span class="at">collapsed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Other map features</span></span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMeasure</span>(  <span class="co"># tool for users to measure distances</span></span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"topleft"</span>,</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">primaryLengthUnit =</span> <span class="st">"meters"</span>,</span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">primaryAreaUnit =</span> <span class="st">"sqmeters"</span></span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addFullscreenControl</span>()  <span class="co"># clickable full-screen button</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e0337cebe99ec8e22120" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e0337cebe99ec8e22120">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"fullscreenControl":{"position":"topleft","pseudoFullscreen":false}},"calls":[{"method":"addProviderTiles","args":["CartoDB.PositronNoLabels",null,"Simple",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,"Terrain",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Satellite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-1.101241149637017,-1.101222902139153,-1.101204509529757,-1.101186022222403,-1.101167490890235,-1.101148966327074,-1.101130499308187,-1.101112140451104,-1.101093940076877,-1.101075948072139,-1.101058213752365,-1.101040785726696,-1.101023711764693,-1.101007038665404,-1.100990812129079,-1.10097507663191,-1.100959875304117,-1.100945249811728,-1.100931240242374,-1.10091788499541,-1.10090522067666,-1.100893281998089,-1.100882101682654,-1.100871710374619,-1.10086213655556,-1.100853406466307,-1.100845544035016,-1.100838570811596,-1.100832505908641,-1.100827365949051,-1.100823165020481,-1.100819914636727,-1.10081762370618,-1.100816298507415,-1.100815942671989,-1.100816557174491,-1.100818140329891,-1.100820687798149,-1.100824192596137,-1.100828645116771,-1.100834033155361,-1.100840341943068,-1.100847554187385,-1.100855650119549,-1.100864607548729,-1.10087440192285,-1.100885006395896,-1.100896391901501,-1.10090852723261,-1.100921379127026,-1.100934912358579,-1.100949089833676,-1.100963872692973,-1.100979220417883,-1.100995090941637,-1.101011440764574,-1.101028225073378,-1.101045397863895,-1.101062912067226,-1.101080719678734,-1.10109877188961,-1.470925189351068,-1.470943401872723,-1.47096176414583,-1.470980225841375,-1.470998736357851,-1.471017244959946,-1.471035700917593,-1.47105405364501,-1.471072252839346,-1.471090248618549,-1.471107991658086,-1.471125433326121,-1.471142525816817,-1.471159222281352,-1.471175476956331,-1.471191245289208,-1.471206484060402,-1.471221151501757,-1.471235207411017,-1.471248613262018,-1.471261332310285,-1.471273329693748,-1.471284572528293,-1.471295029997897,-1.471304673439098,-1.471313476419558,-1.47132141481052,-1.471328466852942,-1.471334613217149,-1.471339837055817,-1.471344124050154,-1.471347462449157,-1.471349843101826,-1.471351259482255,-1.471351707707526,-1.47135118654836,-1.471349697432492,-1.47134724444077,-1.471343834295974,-1.471339476344398,-1.471334182530242,-1.471327967362875,-1.471320847877081,-1.471312843586366,-1.471303976429481,-1.471294270710298,-1.471283753031195,-1.471272452220145,-1.471260399251703,-1.471247627162112,-1.471234170958748,-1.471220067524175,-1.471205355515046,-1.47119007525615,-1.471174268629879,-1.471157978961435,-1.471141250900066,-1.471124130296687,-1.471106664078199,-1.471088900118863,-1.471070887109067,-1.101241149637017],"lat":[50.70719775992459,50.707199823975,50.70720127877311,50.70720212033139,50.70720234634314,50.7072019561889,50.70720095093805,50.70719933334597,50.70719710784641,50.70719428053945,50.70719085917458,50.70718685312972,50.70718227338527,50.70717713249418,50.70717144454743,50.70716522513553,50.70715849130561,50.70715126151487,50.70714355557991,50.70713539462236,50.70712680101106,50.70711779830074,50.70710841116745,50.70709866534086,50.70708858753383,50.70707820536911,50.70706754730373,50.70705664255083,50.70704552099973,50.70703421313402,50.70702274994785,50.70701116286114,50.70699948363334,50.70698774427647,50.70697597696732,50.70696421395927,50.70695248749387,50.70694082971254,50.70692927256836,50.70691784773854,50.70690658653772,50.70689551983185,50.7068846779539,50.70687409062054,50.70686378685068,50.7068537948861,50.70684414211385,50.70683485499129,50.70682595897356,50.70681747844377,50.70680943664629,50.70680185562284,50.70679475615232,50.70678815769357,50.7067820783324,50.70677653473164,50.70677154208575,50.70676711407908,50.70676326284829,50.7067599989492,50.70675733132786,50.65791233337498,50.65791021133977,50.65790869810766,50.65790779782625,50.65790751296314,50.65790784429907,50.65790879092592,50.65791035024908,50.6579125179946,50.65791528822095,50.65791865333522,50.657922604114,50.65792712972863,50.65793221777487,50.65793785430694,50.65794402387566,50.65795070957089,50.65795789306783,50.65796555467721,50.65797367339936,50.65798222698162,50.65799119197946,50.65800054382066,50.65801025687269,50.65802030451297,50.65803065920182,50.65804129255795,50.65805217543624,50.65806327800762,50.6580745698409,50.65808601998605,50.65809759705908,50.65810926932818,50.6581210048005,50.65813277130994,50.65814453660536,50.65815626843886,50.65816793465427,50.65817950327525,50.65819094259292,50.65820222125281,50.65821330834074,50.65822417346765,50.65823478685284,50.65824511940554,50.65825514280477,50.65826482957687,50.65827415317086,50.6582830880312,50.65829160966783,50.65829969472333,50.65830732103684,50.658314467705,50.65832111513903,50.65832724511857,50.65833284084159,50.65833788697038,50.65834236967371,50.65834627666461,50.65834959723419,50.65835232228083,50.70719775992459]}]]],null,"Line/buffer",{"interactive":true,"className":"","stroke":true,"color":"#000","weight":1,"opacity":0.5,"fill":true,"fillColor":"#000","fillOpacity":0.2,"dashArray":4,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolylines","args":[[[[{"lng":[-1.470998049282997,-1.101169972033683],"lat":[50.65813233311357,50.70697755086348]}]]],null,"Line/buffer",{"interactive":true,"className":"","stroke":true,"color":"#000","weight":1,"opacity":0.5,"fill":false,"fillColor":"#000","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addAwesomeMarkers","args":[50.658,-1.472,{"icon":"play","markerColor":"blue","iconColor":"#FFF","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"fa"},null,"Start/end",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"<center>Start<br>50.658, -1.472<center>",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addAwesomeMarkers","args":[50.707,-1.101,{"icon":"stop","markerColor":"blue","iconColor":"#FFF","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"fa"},null,"Start/end",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"<center>End<br>50.707, -1.101<center>",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolylines","args":[[[[{"lng":[-1.1983929,-1.1982882,-1.1981052,-1.198025,-1.1987285,-1.1990455],"lat":[50.6937574,50.6940003,50.6948198,50.6952671,50.6952457,50.69523]}]],[[{"lng":[-1.1957503,-1.1945218,-1.193642,-1.1928267],"lat":[50.6941775,50.6960515,50.6973988,50.6986509]}]],[[{"lng":[-1.1987799,-1.1986765,-1.1985907,-1.1985894,-1.1986282,-1.1985049,-1.1984083,-1.1983386,-1.1980838,-1.1978813,-1.1977365,-1.1974133,-1.1970726,-1.1968514,-1.196681,-1.1964906,-1.1962934,-1.1962036,-1.196154,-1.1961392,-1.1964074,-1.1967427,-1.1971399,-1.1976332,-1.1976801,-1.1975205,-1.1974129,-1.197287],"lat":[50.6916476,50.6917809,50.6920239,50.6921811,50.6923085,50.6925685,50.6926679,50.6927112,50.6926789,50.692639,50.6925974,50.6925523,50.6925591,50.692972,50.6931589,50.693328,50.6934622,50.6935404,50.6936245,50.6936916,50.6937179,50.6937936,50.6938616,50.6939065,50.6939337,50.694203,50.6947262,50.6951492]}]],[[{"lng":[-1.1248594,-1.1250016,-1.1253208,-1.1256587,-1.1264151,-1.1272386,-1.1275887,-1.1279158,-1.1280969,-1.1280593,-1.1276945,-1.1274987,-1.1269274,-1.1264017,-1.1263132,-1.1260718,-1.1254495,-1.1247066,-1.1235265,-1.1239449,-1.1241487,-1.1245483,-1.1246797,-1.1247535],"lat":[50.7043708,50.7042944,50.7041925,50.7041364,50.7040345,50.7040141,50.7040323,50.704032,50.7039869,50.703795,50.7032412,50.7032123,50.7033244,50.7034875,50.7033941,50.7027825,50.7028063,50.7027706,50.7039665,50.7042078,50.7042944,50.7043929,50.7044014,50.704398]}]],[[{"lng":[-1.1313048,-1.1312753,-1.1313048,-1.1312592,-1.1311734,-1.1311519,-1.131168,-1.1316025,-1.1319432,-1.1299127,-1.1299204,-1.1298787,-1.1297785,-1.1280593],"lat":[50.6999693,50.7001154,50.700586,50.7008952,50.7012383,50.7013776,50.7014116,50.7018686,50.7022933,50.7028692,50.7030136,50.7032427,50.7033359,50.703795]}]],[[{"lng":[-1.1364732,-1.135835,-1.1358216,-1.1358404,-1.1358645,-1.1359987,-1.1361167],"lat":[50.7029114,50.702966,50.7025787,50.7022457,50.7018754,50.7014235,50.7010175]}]],[[{"lng":[-1.1922516,-1.1898666,-1.1871744],"lat":[50.6951937,50.6950926,50.6949972]}]],[[{"lng":[-1.1840813,-1.1842131],"lat":[50.6931413,50.6961488]}]],[[{"lng":[-1.1586102,-1.1583273,-1.1582768,-1.1582583,-1.158092,-1.1584032,-1.1585695,-1.1587304,-1.1588645,-1.158902,-1.1587733],"lat":[50.6981941,50.6999174,50.700307,50.70045,50.7013844,50.7014149,50.7014489,50.7015203,50.7016154,50.7018396,50.7021998]}]],[[{"lng":[-1.1100645,-1.1081226,-1.1063006],"lat":[50.706457,50.7060119,50.7057595]}]],[[{"lng":[-1.1203022,-1.1202459,-1.1199938,-1.1198857,-1.1198436,-1.1198919,-1.1201494,-1.1202888,-1.1204275,-1.1206582,-1.1208061],"lat":[50.7067618,50.7063449,50.7060187,50.7056669,50.7053019,50.7051048,50.7047651,50.7045239,50.7042604,50.7041381,50.7040365]}]],[[{"lng":[-1.1613506,-1.1615627,-1.1616522],"lat":[50.698605,50.6999065,50.700189]}]],[[{"lng":[-1.1772188,-1.1769291],"lat":[50.6966323,50.6972303]}]],[[{"lng":[-1.1735148,-1.1738474,-1.1740747,-1.1745709,-1.1747659,-1.17511,-1.1751427],"lat":[50.6981294,50.6980411,50.6976712,50.6973579,50.697013,50.6964439,50.6961912]}]],[[{"lng":[-1.3122117,-1.3130502,-1.3140893,-1.3145587,-1.3157807,-1.3160462,-1.3164083,-1.3164818,-1.3166481,-1.3166443,-1.3172838,-1.3170612,-1.3170199,-1.3171524,-1.3176713],"lat":[50.6786218,50.6781729,50.6774728,50.6772723,50.6780913,50.6782902,50.6781083,50.6781068,50.6782564,50.6783055,50.6791062,50.6795226,50.6799116,50.6800886,50.6804534]}]],[[{"lng":[-1.3221708,-1.3253411,-1.3249591,-1.3246491,-1.3241797,-1.3236959,-1.3232101,-1.321613,-1.3208057,-1.3199515],"lat":[50.6746071,50.6774949,50.6781267,50.6782896,50.6786771,50.6791519,50.6795337,50.6804948,50.6809162,50.6810011]}]],[[{"lng":[-1.3188315,-1.3173429,-1.3186974,-1.320752,-1.321475],"lat":[50.6802269,50.6791402,50.6783363,50.6770343,50.6764137]}]],[[{"lng":[-1.3241797,-1.3232141,-1.3233161,-1.3232839,-1.3230495,-1.3222378,-1.321475,-1.3209238,-1.3203606],"lat":[50.6786771,50.6778911,50.6777823,50.6776838,50.6774183,50.6768373,50.6764137,50.6761336,50.6756509]}]],[[{"lng":[-1.3166443,-1.3158139,-1.315594,-1.3147786,-1.3146177,-1.3145131,-1.3142261,-1.3133517],"lat":[50.6783055,50.6786847,50.6786677,50.678994,50.6789396,50.6789362,50.6790484,50.6796365]}]],[[{"lng":[-1.3462262,-1.3451975,-1.3448052,-1.3444471],"lat":[50.6740346,50.6754927,50.6759814,50.6761025]}]],[[{"lng":[-1.3517179,-1.3477883,-1.3455107],"lat":[50.6751771,50.6742442,50.6763977]}]],[[{"lng":[-1.3566291,-1.3540595,-1.3535553,-1.3527318,-1.3519835,-1.3517179,-1.3507604,-1.3500641],"lat":[50.6717344,50.6733085,50.6735839,50.6742517,50.6749471,50.6751771,50.675984,50.6766991]}]],[[{"lng":[-1.2875845,-1.2861566,-1.2854846,-1.2844079,-1.2825318],"lat":[50.6821921,50.6825598,50.6826813,50.6828267,50.6831299]}]],[[{"lng":[-1.220108,-1.2201661,-1.220214,-1.2202733],"lat":[50.6921097,50.6914119,50.6908588,50.6906121]}]],[[{"lng":[-1.2270888,-1.2283347,-1.2285564,-1.2286975,-1.2288425,-1.2290627,-1.2291392,-1.2292895,-1.229398,-1.2296089,-1.2305774,-1.2313353],"lat":[50.6878998,50.6877573,50.6885028,50.6888987,50.6891919,50.6901842,50.6903204,50.6903755,50.6903649,50.6903009,50.6897384,50.6892659]}]],[[{"lng":[-1.226993,-1.2255896,-1.2252524,-1.2251981,-1.225171,-1.2251542,-1.225281,-1.2251404,-1.2251553],"lat":[50.6879112,50.6880593,50.6881458,50.6888791,50.6891485,50.6894586,50.6903457,50.691444,50.6916213]}]],[[{"lng":[-1.1870916,-1.1869808,-1.1869386,-1.1867567,-1.1863716,-1.1858416,-1.1855199,-1.1852977,-1.1850736,-1.1847908,-1.1845864],"lat":[50.6935982,50.6950214,50.6952436,50.6954791,50.6958065,50.6960754,50.6961874,50.6962441,50.6962738,50.696298,50.696308]}]],[[{"lng":[-1.2178248,-1.2178139,-1.214177],"lat":[50.6918599,50.6919271,50.6917145]}]],[[{"lng":[-1.2062444,-1.2061511,-1.2059124,-1.2059833],"lat":[50.6916766,50.6918987,50.6928555,50.693439]}]],[[{"lng":[-1.2508153,-1.2506922,-1.2505152,-1.2500186,-1.2499114,-1.2498502,-1.2497932],"lat":[50.6867701,50.6871394,50.6878097,50.68941,50.6896409,50.6897725,50.6901184]}]],[[{"lng":[-1.2521603,-1.2524682,-1.2526868,-1.2527619,-1.2528786,-1.2530074,-1.2530965,-1.253124,-1.2506922],"lat":[50.6890407,50.6889322,50.6888056,50.6887292,50.6882967,50.6877877,50.6873042,50.6871552,50.6871394]}]],[[{"lng":[-1.1739828,-1.1737716,-1.1731681,-1.1728435,-1.172755,-1.1722481,-1.1724124,-1.1725711],"lat":[50.6963607,50.6962638,50.6966919,50.6970402,50.6970045,50.6973919,50.6974774,50.6975599]}]],[[{"lng":[-1.203309,-1.2033025,-1.2025656,-1.2024652],"lat":[50.6935867,50.6928296,50.6928413,50.6928429]}]],[[{"lng":[-1.2945827,-1.2938572,-1.2934728,-1.2927346,-1.2924877],"lat":[50.6814401,50.6812387,50.6814096,50.6815758,50.6811597]}]],[[{"lng":[-1.170005,-1.1694739,-1.1692807],"lat":[50.6977844,50.6980426,50.6981874]}]],[[{"lng":[-1.2756363,-1.2747411],"lat":[50.6840765,50.6837668]}]],[[{"lng":[-1.2759889,-1.2766434,-1.2773365,-1.277052,-1.2764838,-1.2762842,-1.2760845,-1.2760663],"lat":[50.6855932,50.684407,50.6832048,50.6831314,50.6829917,50.6829827,50.6831582,50.6831742]}]],[[{"lng":[-1.2629722,-1.2632862,-1.2642865,-1.265477,-1.2664502],"lat":[50.6874876,50.6865046,50.6837204,50.6837475,50.6837022]}]],[[{"lng":[-1.2954531,-1.2950696,-1.2948623,-1.2947014,-1.2946395,-1.294438,-1.2940222],"lat":[50.6821819,50.6819763,50.6817072,50.681487,50.6814142,50.6811807,50.6805352]}]],[[{"lng":[-1.4579262,-1.4579468,-1.457953,-1.4581534,-1.4581649,-1.4580609,-1.4577685,-1.4575459,-1.4572763,-1.4568727,-1.4563376,-1.4562652,-1.4563094,-1.4563523,-1.4564046,-1.4564247,-1.4564019],"lat":[50.6625015,50.6622151,50.6620033,50.6605835,50.660502,50.6604865,50.6604346,50.6603836,50.6603283,50.6602586,50.6602178,50.6602161,50.6599951,50.6598735,50.6598165,50.6597664,50.6597205]}]],[[{"lng":[-1.2790177,-1.2790067,-1.2790033,-1.2790455,-1.2791226,-1.2794284],"lat":[50.6821071,50.6823382,50.6825863,50.6827991,50.6830082,50.6834555]}]],[[{"lng":[-1.1502181,-1.1516909,-1.1525725,-1.153227,-1.1534201,-1.1535595,-1.1537124,-1.1538211,-1.1539901,-1.1542053,-1.1543602,-1.1544734,-1.1546325,-1.1549275,-1.1551179,-1.1554559,-1.1557255,-1.1561144],"lat":[50.6982409,50.7012844,50.7030679,50.7044846,50.7050761,50.7057072,50.7066678,50.7073251,50.7082636,50.7094636,50.7100456,50.7103928,50.7108512,50.7114415,50.7117574,50.7122109,50.7125752,50.7129361]}]],[[{"lng":[-1.1550979,-1.1551034,-1.1550675,-1.1550809,-1.1551194,-1.1550459,-1.1549006,-1.1548785,-1.1548224,-1.1547163,-1.1545621,-1.1544528,-1.1543232,-1.1542629,-1.1539794,-1.1538497,-1.1537214,-1.1535837,-1.1533691,-1.1527079,-1.1523746,-1.1518572,-1.1506824,-1.1505141],"lat":[50.7112089,50.7112222,50.7112298,50.7112662,50.7113709,50.711386,50.7111342,50.7110992,50.7109963,50.7108016,50.7103879,50.7100394,50.7094731,50.7091465,50.7073598,50.7065106,50.7057219,50.7051293,50.7044719,50.7030466,50.7023496,50.7012564,50.6987395,50.6981859]}]],[[{"lng":[-1.2345235,-1.2346531,-1.2350528,-1.234751,-1.2341583,-1.2336955],"lat":[50.6884338,50.6884981,50.6894158,50.6895465,50.6897402,50.6897903]}]],[[{"lng":[-1.2323585,-1.2327367,-1.2329901,-1.2331766,-1.2332664,-1.2333396,-1.2333746],"lat":[50.6893494,50.6895261,50.6896162,50.6897232,50.6897912,50.6898445,50.6898633]}]],[[{"lng":[-1.2318664,-1.2311073,-1.230969,-1.2307625,-1.2303212,-1.229856],"lat":[50.6896493,50.6901965,50.6902755,50.6904403,50.6907784,50.6910826]}]],[[{"lng":[-1.1836564,-1.1833084,-1.1826807,-1.1817849,-1.1806208,-1.1798215,-1.1793709,-1.1789203,-1.1785099,-1.1783195,-1.1780942,-1.1779225,-1.1782358,-1.1787991,-1.179302,-1.1796597,-1.1803977,-1.1810871,-1.1814259,-1.1816999,-1.1819574,-1.1822011,-1.1824576],"lat":[50.6962543,50.6961373,50.6958332,50.6953626,50.6947034,50.6942412,50.6939456,50.6935956,50.6932286,50.6929193,50.6924724,50.6922091,50.6919673,50.6916598,50.691484,50.6914513,50.6913896,50.6913046,50.6912211,50.6911271,50.6910396,50.6909271,50.690755]}]],[[{"lng":[-1.1824654,-1.1817305,-1.181009,-1.179515,-1.1789866,-1.1782617,-1.1769291,-1.1763636,-1.1757785,-1.1746435,-1.1741057,-1.1730261,-1.1725502],"lat":[50.696267,50.6963197,50.6964165,50.6966714,50.6967631,50.6968961,50.6972303,50.6973934,50.6975994,50.6980622,50.6982976,50.6988161,50.699045]}]],[[{"lng":[-1.2625912,-1.2622935,-1.2622342,-1.2623763,-1.2624625,-1.2612045,-1.2608532,-1.2608154,-1.2607751,-1.2607056,-1.2604841,-1.2602414,-1.2596458,-1.2584472,-1.2546851,-1.2546918,-1.2547085,-1.2547133,-1.254726,-1.2547502],"lat":[50.688363,50.6878464,50.6877427,50.6876221,50.6873876,50.6864631,50.6860009,50.6857525,50.6856185,50.6855302,50.6854273,50.6853583,50.6851988,50.6850255,50.6849112,50.6851572,50.6854477,50.6856737,50.6858004,50.685952]}]],[[{"lng":[-1.1673054,-1.1679307,-1.1684714,-1.1688318,-1.1692398,-1.1693304,-1.1695415,-1.1698951,-1.1705708,-1.1711017],"lat":[50.6952719,50.695803,50.6962727,50.696629,50.6970759,50.6971491,50.6972633,50.6974094,50.6976314,50.6977885]}]],[[{"lng":[-1.2880765,-1.2878414,-1.2876448,-1.2873811,-1.2873344,-1.2870863,-1.286652,-1.2860216,-1.2858046,-1.2876136,-1.2877915,-1.2882917,-1.2887384,-1.2887577,-1.2887748],"lat":[50.6825544,50.6823148,50.6821307,50.6818817,50.6818353,50.6815883,50.6811327,50.6806526,50.6804575,50.6800762,50.679976,50.6798327,50.6797305,50.6797634,50.6797992]}]],[[{"lng":[-1.4506556,-1.4506739,-1.4506887,-1.4507288,-1.451436],"lat":[50.6592744,50.6596327,50.6598177,50.6599292,50.6607469]}]],[[{"lng":[-1.3323404,-1.3340579,-1.3346755,-1.3342755,-1.3331599,-1.3316855,-1.3305572,-1.3296973,-1.3296406],"lat":[50.6758707,50.6768423,50.677233,50.6775592,50.6783506,50.6791551,50.6797005,50.6802166,50.6801725]}]],[[{"lng":[-1.3343084,-1.3372636],"lat":[50.6768317,50.6750656]}]],[[{"lng":[-1.3324223,-1.3342113],"lat":[50.6758415,50.6768529]}]],[[{"lng":[-1.2329526,-1.2322323,-1.2321357,-1.2319145,-1.2311688,-1.2311542],"lat":[50.6896544,50.6894686,50.6895399,50.6896773,50.6902146,50.6902466]}]],[[{"lng":[-1.3415236,-1.3415046,-1.3416384,-1.341767,-1.3419056,-1.341993,-1.3420493],"lat":[50.6759576,50.6758871,50.6757026,50.6754635,50.6751333,50.6748586,50.6745199]}]],[[{"lng":[-1.4034444,-1.4023317,-1.4020658],"lat":[50.6675917,50.6672883,50.6672157]}]],[[{"lng":[-1.4032244,-1.4034444,-1.4040419,-1.4044555,-1.4050698,-1.4061609,-1.4065503],"lat":[50.66793,50.6675917,50.6677471,50.6673639,50.6668995,50.665945,50.6653425]}]],[[{"lng":[-1.3070666,-1.3067859,-1.3064745,-1.3059917,-1.3056752,-1.3056591,-1.3057557,-1.3057262,-1.3056511,-1.305238],"lat":[50.6782562,50.6782812,50.6783089,50.6783021,50.6783378,50.6784704,50.679327,50.6794681,50.6796006,50.6800459]}]],[[{"lng":[-1.303916,-1.305238,-1.3055384,-1.3058442,-1.3060212,-1.3066757,-1.3074884],"lat":[50.6797784,50.6800459,50.6800697,50.6800731,50.6799576,50.679587,50.6802377]}]],[[{"lng":[-1.2489709,-1.2487376,-1.2485528,-1.2484117,-1.2482951,-1.2481606,-1.2480539,-1.247928,-1.2477159,-1.2473205,-1.2472022,-1.247137],"lat":[50.6897298,50.6895787,50.6894449,50.6893138,50.689115,50.6887722,50.6886159,50.6884562,50.6882477,50.6878939,50.6877651,50.6876701]}]],[[{"lng":[-1.1152264,-1.1150879,-1.1151066,-1.1150513,-1.115022,-1.1149514,-1.1148981,-1.1157018,-1.115933,-1.1163367,-1.1168906,-1.1169589],"lat":[50.7035361,50.7035757,50.7037098,50.7041341,50.7043342,50.704828,50.7052064,50.7053499,50.7045606,50.7046097,50.7046825,50.7046932]}]],[[{"lng":[-1.1164377,-1.1164905,-1.1169589],"lat":[50.706555,50.7060187,50.7046932]}]],[[{"lng":[-1.4534368,-1.4533858,-1.4531511,-1.4529969,-1.4529084,-1.4528561,-1.4528371],"lat":[50.6614939,50.6614284,50.6610612,50.6606021,50.6601855,50.6598489,50.6595903]}]],[[{"lng":[-1.4536366,-1.453652,-1.4537103,-1.4537452,-1.4534555,-1.4532262,-1.4530693,-1.4530125,-1.45297,-1.4529657,-1.4529312,-1.4529137],"lat":[50.6621502,50.6621106,50.6619495,50.6617481,50.6614165,50.6610578,50.6605944,50.6603482,50.6601643,50.6601296,50.6598514,50.6595972]}]],[[{"lng":[-1.2016398,-1.2016789,-1.2017143,-1.2022951,-1.2023071,-1.202351,-1.202392,-1.2024047],"lat":[50.6963822,50.6955558,50.6954253,50.693914,50.6938817,50.6937635,50.6936074,50.6934466]}]],[[{"lng":[-1.2108783,-1.2107165,-1.2105229,-1.2104626,-1.2107244],"lat":[50.693126,50.6926777,50.6921611,50.691942,50.6914477]}]],[[{"lng":[-1.2179607,-1.2178329],"lat":[50.6904351,50.6917767]}]],[[{"lng":[-1.293707,-1.2942019,-1.2945827],"lat":[50.6811248,50.6810076,50.6814401]}]],[[{"lng":[-1.2953621,-1.2956564,-1.2959751,-1.2963317],"lat":[50.6805269,50.6809634,50.681436,50.6819649]}]],[[{"lng":[-1.2954535,-1.2957499,-1.2960586,-1.2964082],"lat":[50.6805067,50.6809535,50.681419,50.681946]}]],[[{"lng":[-1.1935351,-1.1922516,-1.191043],"lat":[50.692142,50.6951937,50.6979206]}]],[[{"lng":[-1.2397411,-1.2394515],"lat":[50.6885533,50.688917]}]],[[{"lng":[-1.3751806,-1.3750473,-1.3750129,-1.3749465,-1.3730617,-1.372717],"lat":[50.6720232,50.6720813,50.6720979,50.6720651,50.6708709,50.6706531]}]],[[{"lng":[-1.3724024,-1.3714599,-1.3708644,-1.367434,-1.3666936,-1.3665986,-1.3664937,-1.3644179,-1.3612519],"lat":[50.67046,50.6719912,50.671818,50.6708897,50.6706796,50.6706796,50.6706853,50.6711286,50.6717936]}]],[[{"lng":[-1.360427,-1.3605397,-1.360725,-1.3612519,-1.3613655,-1.3617118,-1.3619889,-1.362166,-1.3624068,-1.3631245,-1.3633196,-1.363483,-1.3637796,-1.3640925,-1.3644567,-1.3650101,-1.3655332,-1.3660072],"lat":[50.6698077,50.6699667,50.6706306,50.6717936,50.6720297,50.6726122,50.6730382,50.6732311,50.6733664,50.6737003,50.6737377,50.6737406,50.6736651,50.6735542,50.6734728,50.6733529,50.6730599,50.6726678]}]],[[{"lng":[-1.3661496,-1.3661473,-1.3660165,-1.3661099],"lat":[50.6728572,50.672576,50.6720684,50.6717088]}]],[[{"lng":[-1.3644179,-1.3649449,-1.3640773,-1.3644567],"lat":[50.6711286,50.6723321,50.6724991,50.6734728]}]],[[{"lng":[-1.3421871,-1.3420542,-1.3419367,-1.3418557,-1.3417171,-1.341587,-1.3414516,-1.3414114],"lat":[50.6733963,50.6742059,50.6748533,50.6751323,50.675452,50.675685,50.6758668,50.6759089]}]],[[{"lng":[-1.4440235,-1.447843,-1.4477934],"lat":[50.6613332,50.6612193,50.6616256]}]],[[{"lng":[-1.4419554,-1.4405568],"lat":[50.6620786,50.6620516]}]],[[{"lng":[-1.4581534,-1.4578718,-1.4578583,-1.4575473,-1.4572039,-1.4569491,-1.4566809,-1.4562073,-1.4561579,-1.4561324,-1.4561431,-1.45606,-1.455887,-1.45394,-1.45297],"lat":[50.6605835,50.6605749,50.6605726,50.6605205,50.6604899,50.6605052,50.6605392,50.6605115,50.6605086,50.6605103,50.6604125,50.6604057,50.6603343,50.6602208,50.6601643]}]],[[{"lng":[-1.2420988,-1.2421337,-1.2421247,-1.2420291,-1.2417474],"lat":[50.6881811,50.6883494,50.6884142,50.6887725,50.6889696]}]],[[{"lng":[-1.2721225,-1.2718204,-1.2716196,-1.271861,-1.2724242,-1.2733372,-1.2738937],"lat":[50.6835968,50.6838104,50.6841874,50.6846786,50.684891,50.6849409,50.684966]}]],[[{"lng":[-1.2751074,-1.2750417,-1.2747359,-1.2759791,-1.2760164,-1.2760663,-1.2765478,-1.2756363,-1.2743309,-1.2739406,-1.2738937],"lat":[50.683394,50.6833821,50.6837075,50.6831544,50.6831614,50.6831742,50.6833413,50.6840765,50.6849864,50.6849682,50.684966]}]],[[{"lng":[-1.2560067,-1.2559095,-1.2553764,-1.255384,-1.2554736,-1.2560067],"lat":[50.6865573,50.6863455,50.6864437,50.6864602,50.6866555,50.6865573]}]],[[{"lng":[-1.2834608,-1.2842322,-1.2842322,-1.2844079,-1.2846836],"lat":[50.6821698,50.682411,50.6824121,50.6828267,50.6839536]}]],[[{"lng":[-1.2815223,-1.2825318],"lat":[50.6818183,50.6831299]}]],[[{"lng":[-1.1212385,-1.1217776,-1.1225474,-1.1238188,-1.123859,-1.1241835,-1.1261576,-1.1289471,-1.129733,-1.1306101,-1.1306959,-1.1309977,-1.1310983,-1.1310767,-1.1310044,-1.1315221,-1.1298081,-1.1296526,-1.1288559,-1.1280245,-1.127767,-1.1274907,-1.1268872,-1.1264876,-1.1263374,-1.1263159,-1.1246395,-1.1235157,-1.1227244,-1.1235344,-1.1237088,-1.1237651,-1.1234003,-1.1233896,-1.1224213,-1.121614,-1.1212385,-1.1212009,-1.1210135],"lat":[50.6999031,50.6998793,50.699621,50.6996652,50.7002292,50.700355,50.7008391,50.7001069,50.6998045,50.6998215,50.7000594,50.7001332,50.7001647,50.7008614,50.7014133,50.7023188,50.7028199,50.7032514,50.7034705,50.7034569,50.7031325,50.7031155,50.7032497,50.703355,50.7029847,50.7026925,50.7026772,50.7037236,50.7032973,50.702752,50.7025005,50.7017667,50.7017548,50.7024734,50.7031902,50.7031699,50.6999031,50.699864,50.699714]}]],[[{"lng":[-1.171841,-1.1724124],"lat":[50.6978916,50.6974774]}]],[[{"lng":[-1.2880765,-1.2881386,-1.2886208,-1.2888011,-1.2889872,-1.2890186,-1.2891925,-1.2892352,-1.2892238,-1.2891611,-1.2888019,-1.2887135,-1.2886663,-1.2886482,-1.2886221],"lat":[50.6825544,50.6825242,50.6823471,50.6822811,50.6822203,50.6817849,50.6812737,50.6810895,50.6809576,50.6807824,50.6801826,50.6799225,50.6798301,50.6797981,50.6797571]}]]],null,"Barriers",{"interactive":true,"className":"","stroke":true,"color":"#F00","weight":2,"opacity":0.5,"fill":false,"fillColor":"#F00","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,["Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: fence","Barrier: hedge","Barrier: fence","Barrier: fence","Barrier: hedge","Barrier: hedge","Barrier: fence","Barrier: hedge","Barrier: fence","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: fence","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: hedge","Barrier: fence","Barrier: fence","Barrier: hedge","Barrier: hedge","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: hedge","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: hedge","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: fence","Barrier: hedge","Barrier: fence"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-1.2541315,-1.2539671,-1.2539606,-1.2537867,-1.2537648,-1.2541031,-1.2541315],"lat":[50.6867878,50.6868028,50.686774,50.6867898,50.6866931,50.6866624,50.6867878]}]],[[{"lng":[-1.2442778,-1.2442412,-1.2443145,-1.244351,-1.2442778],"lat":[50.6881082,50.6880323,50.6880182,50.688094,50.6881082]}]],[[{"lng":[-1.2444597,-1.2443774,-1.2443487,-1.2444022,-1.2444844,-1.2445132,-1.2444597],"lat":[50.688098,50.6880889,50.6880393,50.6879987,50.6880077,50.6880574,50.688098]}]],[[{"lng":[-1.2308761,-1.2311411,-1.2308998,-1.2306348,-1.2308761],"lat":[50.6899039,50.689744,50.6895835,50.6897434,50.6899039]}]],[[{"lng":[-1.244243,-1.2442125,-1.2441537,-1.2441842,-1.244243],"lat":[50.6880909,50.6880621,50.6880871,50.6881159,50.6880909]}]],[[{"lng":[-1.2549837,-1.2549627,-1.2548443,-1.2548397,-1.2548984,-1.254887,-1.2548087,-1.2548012,-1.2546963,-1.2547027,-1.254372,-1.2544,-1.2546236,-1.2546156,-1.2547228,-1.2547326,-1.2548449,-1.254853,-1.2549837],"lat":[50.6867494,50.6866279,50.6866362,50.6866099,50.6866058,50.6865401,50.6865456,50.6865023,50.6865096,50.6865469,50.6865699,50.6867319,50.6867163,50.6866702,50.6866627,50.6867193,50.6867114,50.6867584,50.6867494]}]],[[{"lng":[-1.2451041,-1.2452839,-1.2453331,-1.2451533,-1.2451041],"lat":[50.6879892,50.6878901,50.6879259,50.688025,50.6879892]}]]],null,"Buildings",{"interactive":true,"className":"","stroke":true,"color":"#F00","weight":2,"opacity":0.5,"fill":true,"fillColor":"#F00","fillOpacity":0.5,"smoothFactor":1,"noClip":false},null,null,["Building: yes","Building: yes","Building: yes","Building: yes","Building: yes","Building: yes","Building: yes"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolygons","args":[[[[{"lng":[-1.2914113,-1.2913657,-1.2910761,-1.2908883,-1.2907623,-1.290655,-1.2905933,-1.2905799,-1.2906094,-1.2906281,-1.2905691,-1.2904699,-1.2903814,-1.2902312,-1.2901695,-1.2901105,-1.2901266,-1.2901641,-1.2902446,-1.2903867,-1.2904887,-1.2910032,-1.2910702,-1.2910037,-1.2909929,-1.2909554,-1.2909688,-1.29106,-1.2908933,-1.290899,-1.2910948,-1.291186,-1.2912531,-1.2913443,-1.2913926,-1.2914113],"lat":[50.6830303,50.6830728,50.6831306,50.6831476,50.6831323,50.6829334,50.6828009,50.6826343,50.6825188,50.6823998,50.6823029,50.6822332,50.6820616,50.6816316,50.6811863,50.6809144,50.6807988,50.6807665,50.6807699,50.6808532,50.680877,50.6808688,50.6810966,50.6812135,50.681341,50.6814498,50.6817081,50.6820225,50.6820668,50.6821721,50.6822162,50.6822553,50.6824083,50.682755,50.6829096,50.6830303]},{"lng":[-1.290754,-1.2908237,-1.2908237,-1.2907969,-1.2908049,-1.2907647,-1.2907674,-1.2907432,-1.2907057,-1.290593,-1.2904482,-1.2904294,-1.2904831,-1.2904911,-1.2904643,-1.2905153,-1.2905796,-1.2905743,-1.290644,-1.2906333,-1.2905582,-1.2905743,-1.2906681,-1.290754],"lat":[50.6819892,50.6819297,50.6818532,50.6817886,50.6817325,50.6816527,50.6815813,50.681515,50.6814419,50.6813926,50.6814164,50.6814725,50.6814912,50.6815422,50.6816017,50.6816493,50.6816714,50.6817444,50.6818124,50.681843,50.681877,50.6819518,50.6819994,50.6819892]}]],[[{"lng":[-1.1618485,-1.1619772,-1.1621757,-1.1622186,-1.1620899,-1.1619665,-1.1618431,-1.1617251,-1.1617466,-1.1618485],"lat":[50.6993507,50.6993575,50.699259,50.6990449,50.6988988,50.6988275,50.6988784,50.6990993,50.699276,50.6993507]},{"lng":[-1.162004,-1.1619128,-1.1618753,-1.1618753,-1.1619128,-1.1620148,-1.1620631,-1.162047,-1.162004],"lat":[50.699259,50.6992454,50.6991774,50.6991265,50.6990993,50.6990823,50.6991231,50.6992148,50.699259]}]],[[{"lng":[-1.3023755,-1.3025498,-1.3026437,-1.302641,-1.302582,-1.3025069,-1.3024371,-1.302362,-1.3022038,-1.3021287,-1.3020724,-1.3021046,-1.3021662,-1.3022413,-1.3023755],"lat":[50.6803171,50.6803273,50.6803596,50.6804106,50.6805279,50.6805806,50.6806316,50.6806622,50.6806486,50.6806248,50.6805721,50.6805228,50.6804565,50.6803987,50.6803171]}]],[[{"lng":[-1.2249859,-1.224825,-1.2243315,-1.2243422,-1.2243898,-1.2242524,-1.2242348,-1.2243476,-1.2243095,-1.2243395,-1.2244497,-1.2246748,-1.2249215,-1.2250829,-1.2250775,-1.2249913,-1.2249859],"lat":[50.6912463,50.6913211,50.6912871,50.6909336,50.6904387,50.6903434,50.6902334,50.6901608,50.6899955,50.6898561,50.6897903,50.6897306,50.6897442,50.6901268,50.6904055,50.6906584,50.6912463]}]]],null,"Water",{"interactive":true,"className":"","stroke":true,"color":"#00F","weight":2,"opacity":0.5,"fill":true,"fillColor":"#00F","fillOpacity":0.5,"smoothFactor":1,"noClip":false},null,null,"Water body",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolylines","args":[[[[{"lng":[-1.2851308,-1.2852187,-1.2852682,-1.28563,-1.2861181,-1.2866412,-1.2872849,-1.2880037,-1.2886421,-1.2888567,-1.2892241,-1.2894172,-1.2894483,-1.2896855,-1.2898196,-1.2899108,-1.2900234,-1.2901227,-1.2902192,-1.2900717],"lat":[50.6751804,50.6752385,50.6752728,50.6755894,50.676016,50.6764885,50.6770613,50.6777854,50.6783939,50.6786471,50.6792403,50.6795836,50.6796341,50.6801598,50.6806339,50.6810622,50.681567,50.682048,50.682517,50.68263]}]],[[{"lng":[-1.2165258,-1.2160575,-1.2155362,-1.2147939,-1.2139545,-1.2138926,-1.2134243,-1.2130267,-1.212903,-1.2127351,-1.2125584,-1.2120724,-1.2119398,-1.2116394,-1.2112064,-1.2112064,-1.2110297,-1.2109944,-1.2109325,-1.2108265,-1.210853,-1.2107735,-1.210853,-1.2108,-1.2109502,-1.2108972,-1.2110209,-1.2113036,-1.2113478,-1.2115687,-1.2116129],"lat":[50.6893028,50.6900698,50.6903049,50.6905792,50.6912173,50.6914916,50.6917771,50.6922249,50.6929358,50.6938761,50.6942064,50.6947045,50.6948501,50.6950572,50.6956729,50.6957904,50.6958184,50.6960647,50.6963949,50.69663,50.6967475,50.6969434,50.6970721,50.6971841,50.6973632,50.6975143,50.6977102,50.6978837,50.6979621,50.6980348,50.6984994]}]],[[{"lng":[-1.2851308,-1.2850633,-1.2851874,-1.2853617,-1.286381,-1.2869791,-1.2874646,-1.288162,-1.2886823,-1.2892349,-1.2894763,-1.2895943,-1.2898249,-1.2900717],"lat":[50.6751804,50.6752664,50.6753812,50.6755341,50.6764231,50.6769857,50.677465,50.6781483,50.6787125,50.6796201,50.6801351,50.6805277,50.6815984,50.68263]}]],[[{"lng":[-1.1625418,-1.1625418,-1.162515,-1.1624158,-1.1622441,-1.1619437,-1.1618927,-1.1622146,-1.162464,-1.162507,-1.1624319,-1.1624426,-1.1624828,-1.1627349,-1.1630032,-1.1631319,-1.1632188,-1.1632526,-1.1632177,-1.1630085,-1.1629012,-1.1627564,-1.1626438,-1.1624587,-1.1625338,-1.1623192,-1.1623541,-1.1623568,-1.162456,-1.1625499,-1.1626652,-1.1627752,-1.1627752,-1.1628825,-1.1629254,-1.1628744,-1.1629495,-1.1630702,-1.1631158,-1.1632043,-1.1633894,-1.163612,-1.163722,-1.1638212,-1.1638393],"lat":[50.6981445,50.698204,50.6982617,50.6983212,50.6984384,50.6985658,50.6986287,50.698836,50.6990161,50.6992964,50.6994985,50.6996735,50.6998128,50.7002002,50.7006266,50.700844,50.7011401,50.7013231,50.7014454,50.701493,50.7015524,50.7015779,50.7015643,50.7018905,50.7020077,50.7020859,50.7021521,50.7022642,50.7022948,50.7024341,50.7024936,50.7025564,50.7026702,50.7027399,50.7027841,50.7028928,50.7029675,50.702959,50.7028911,50.7028418,50.7027722,50.7027603,50.7028078,50.7030185,50.7030573]}]],[[{"lng":[-1.2098104,-1.2099069,-1.2098801,-1.2098855,-1.2097997,-1.2098131,-1.2098412,-1.2098613,-1.2098332,-1.2097219,-1.2096065,-1.2095676,-1.2095167,-1.2094711,-1.2093785,-1.2091036,-1.2089762,-1.208763,-1.2086771,-1.2086691,-1.2086852,-1.2086798,-1.2086624,-1.2087107,-1.2087134,-1.2088984,-1.2088877,-1.208822,-1.2088649,-1.2088595,-1.2089963,-1.2090902,-1.2091801,-1.2091988],"lat":[50.68786,50.6880265,50.688193,50.6884411,50.6886484,50.6889186,50.6890469,50.6891523,50.689193,50.6892882,50.6894318,50.6895915,50.6897317,50.6897733,50.6898031,50.6900902,50.6902831,50.6905524,50.6907461,50.6908872,50.6911174,50.6913935,50.6916705,50.6918005,50.6919177,50.6923068,50.6923782,50.6924929,50.6926628,50.6928658,50.693204,50.6934359,50.6934673,50.6936168]}]],[[{"lng":[-1.4615196,-1.4617127,-1.4619327,-1.4619353,-1.4620507,-1.4621687,-1.4625818,-1.4637324,-1.463775,-1.4637968],"lat":[50.6598931,50.6597876,50.6592316,50.6589902,50.6584486,50.6583645,50.6581349,50.6562228,50.6561675,50.6561382]}]],[[{"lng":[-1.1465156,-1.148765],"lat":[50.7008714,50.7008152]}]],[[{"lng":[-1.1463118,-1.1463552,-1.1465156,-1.1465639,-1.1473846,-1.1480284,-1.1485809,-1.1488974,-1.1490154],"lat":[50.700338,50.7004516,50.7008714,50.7012723,50.7012519,50.7012655,50.7012417,50.7013335,50.7013607]}]],[[{"lng":[-1.1469233,-1.1462045,-1.1461294,-1.1461508,-1.1460757,-1.1459523],"lat":[50.7036336,50.7019145,50.7013369,50.7010515,50.7007627,50.7005112]}]],[[{"lng":[-1.149627,-1.1493578,-1.1493427,-1.1490154,-1.148765,-1.1486821,-1.1485755,-1.1485124,-1.1482644],"lat":[50.703406,50.7025053,50.7024547,50.7013607,50.7008152,50.7006347,50.7004025,50.7002833,50.6998147]}]],[[{"lng":[-1.1747365,-1.174719,-1.1745366,-1.1740485,-1.1739492,-1.1736918,-1.1735067,-1.1730909,-1.1723721],"lat":[50.6969894,50.6970285,50.6973343,50.6976503,50.6977998,50.6980479,50.6980852,50.6983639,50.6988871]}]]],null,"Water",{"interactive":true,"className":"","stroke":true,"color":"#00F","weight":2,"opacity":0.5,"fill":false,"fillColor":"#00F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,["Waterway: stream","Waterway: stream","Waterway: stream","Waterway: stream","Waterway: ditch","Waterway: ditch","Waterway: ditch","Waterway: ditch","Waterway: ditch","Waterway: ditch","Waterway: ditch"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Simple","Terrain","Satellite"],["Line/buffer","Start/end","Water","Barriers","Buildings"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addMeasure","args":[{"position":"topleft","primaryLengthUnit":"meters","primaryAreaUnit":"sqmeters","activeColor":"#ABE67E","completedColor":"#C8F2BE","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]}],"limits":{"lat":[50.6561382,50.7129361],"lng":[-1.472,-1.100815942671989]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>So, you can inspect the route interactively by zoom and dragging, by hovering over highlighted features to see what they are, and by turning on and off the different map and feature layers for more or less context.</p>
</section>
</section>
<section id="next" class="level2">
<h2 class="anchored" data-anchor-id="next">Next</h2>
<p>There’s a lot of stuff missing from this approach to make it useful for actually planning a straight-line route. For example, I haven’t included elevation or land-use type (you don’t want to spend a few kilometres in a marsh). You’re also restricted to a two-dimensional overhead view.</p>
<p>Of course, I also hard-coded the start and end points for this demo. The real power of this approach would be to let the user choose where they want to start and end and feed back on the identity and number of obstructions for each line suggested. To this end, I’ve started developing <a href="https://github.com/matt-dray/mission-across-iow">a simple Shiny app</a>.</p>
</section>
<section id="disclaimer" class="level2">
<h2 class="anchored" data-anchor-id="disclaimer">Disclaimer</h2>
<p>Am I encouraging you to trespass? No.&nbsp;Am I encouraging you to take advantage of {osmextra}, {sf} and {leaflet} for mapping in R? Yes.</p>
</section>



<div id="quarto-appendix" class="default"><section id="environment" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Environment</h2><div class="quarto-appendix-contents">

<details>
<summary>
Session info
</summary>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Last rendered: 2023-07-16 13:42:29 BST</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.1 (2023-06-16)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS Ventura 13.2.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Europe/London
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] lubridate_1.9.2      forcats_1.0.0        stringr_1.5.0       
 [4] dplyr_1.1.2          purrr_1.0.1          readr_2.1.4         
 [7] tidyr_1.3.0          tibble_3.2.1         ggplot2_3.4.2       
[10] tidyverse_2.0.0      sf_1.0-14            osmextract_0.4.1    
[13] leaflet.extras_1.0.0 leaflet_2.1.2        geojsonio_0.11.1    

loaded via a namespace (and not attached):
 [1] gtable_0.3.3            xfun_0.39               htmlwidgets_1.6.2      
 [4] lattice_0.21-8          tzdb_0.4.0              leaflet.providers_1.9.0
 [7] vctrs_0.6.3             tools_4.3.1             crosstalk_1.2.0        
[10] generics_0.1.3          curl_5.0.1              proxy_0.4-27           
[13] fansi_1.0.4             pkgconfig_2.0.3         KernSmooth_2.23-21     
[16] lifecycle_1.0.3         farver_2.1.1            compiler_4.3.1         
[19] munsell_0.5.0           jqr_1.2.3               htmltools_0.5.5        
[22] class_7.3-22            yaml_2.3.7              lazyeval_0.2.2         
[25] pillar_1.9.0            ellipsis_0.3.2          classInt_0.4-9         
[28] tidyselect_1.2.0        digest_0.6.31           stringi_1.7.12         
[31] ggthemes_4.2.4          fastmap_1.1.1           grid_4.3.1             
[34] colorspace_2.1-0        cli_3.6.1               magrittr_2.0.3         
[37] crul_1.4.0              utf8_1.2.3              e1071_1.7-13           
[40] withr_2.5.0             scales_1.2.1            sp_2.0-0               
[43] timechange_0.2.0        httr_1.4.6              rmarkdown_2.23         
[46] hms_1.1.3               evaluate_0.21           knitr_1.43.1           
[49] V8_4.3.2                geojson_0.3.4           rlang_1.1.1            
[52] Rcpp_1.0.11             glue_1.6.2              DBI_1.1.3              
[55] httpcode_0.3.0          geojsonsf_2.0.3         rstudioapi_0.15.0      
[58] jsonlite_1.8.7          R6_2.5.1                units_0.8-2            </code></pre>
</div>
</div>
</details>


</div></section><aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>As far as I know this does not relate to the island hosting any wights in the Game of Thrones sense. Might want to factor that into your planning if you do decide to cross the island. Maybe do it in summer.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>I’m using here the ‘LAD boundaries (December 2020) UK BGC from the ONS Open Geography Portal Generalised (20m) - clipped to the coastline (Mean High Water mark)’.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>I’m not sure that Tom has ever defined what it means to ‘cross a country’, exactly. Clearly doing it at a narrow point makes sense. But couldn’t you just find a kink in the border and cross it? Your straight line could be 1 m long!<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div>CC BY-NC-SA 4.0</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>