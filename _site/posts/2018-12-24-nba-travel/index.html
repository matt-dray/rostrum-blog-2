<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.176">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matt Dray">
<meta name="dcterms.date" content="2018-12-24">

<title>rostrum.blog - Travel the NBA with {rvest}, {leaflet} and {osrm}</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo-black-trans.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    null
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../../site_libs/leaflet-binding-2.1.2/leaflet.js"></script>
<script src="../../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../../site_libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
<link href="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet">
<script src="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<link href="../../site_libs/ionicons-2.0.1/ionicons.min.css" rel="stylesheet">
<link href="../../site_libs/leaflet-measure-2.1.7/leaflet-measure.css" rel="stylesheet">
<script src="../../site_libs/leaflet-measure-2.1.7/leaflet-measure.min.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.28/datatables.js"></script>
<link href="../../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/dt-ext-buttons-1.13.4/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="../../site_libs/dt-ext-buttons-1.13.4/js/dataTables.buttons.min.js"></script>
<script src="../../site_libs/dt-ext-buttons-1.13.4/js/buttons.html5.min.js"></script>
<script src="../../site_libs/dt-ext-buttons-1.13.4/js/buttons.colVis.min.js"></script>
<script src="../../site_libs/dt-ext-buttons-1.13.4/js/buttons.print.min.js"></script>
<link href="../../site_libs/dt-ext-scroller-1.13.4/css/scroller.dataTables.min.css" rel="stylesheet">
<script src="../../site_libs/dt-ext-scroller-1.13.4/js/dataTables.scroller.min.js"></script>
<link href="../../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="../../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="../../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="../../site_libs/selectize-0.12.0/selectize.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<script src="../../site_libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo-green-trans.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">rostrum.blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target=""><i class="bi bi-question-circle-fill" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss-fill" role="img" aria-label="RSS feed">
</i> 
 <span class="menu-text">RSS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/matt-dray/rostrum-blog-2" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub source code">
</i> 
 <span class="menu-text">Source</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Travel the NBA with {rvest}, {leaflet} and {osrm}</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">leaflet</div>
                <div class="quarto-category">osrm</div>
                <div class="quarto-category">plotly</div>
                <div class="quarto-category">rvest</div>
                <div class="quarto-category">sports</div>
                <div class="quarto-category">webscrape</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://www.matt-dray.com">Matt Dray</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 24, 2018</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#tldr" id="toc-tldr" class="nav-link active" data-scroll-target="#tldr">tl;dr</a></li>
  <li><a href="#on-the-road" id="toc-on-the-road" class="nav-link" data-scroll-target="#on-the-road">On the road</a></li>
  <li><a href="#r-can-help" id="toc-r-can-help" class="nav-link" data-scroll-target="#r-can-help">R can help</a>
  <ul class="collapse">
  <li><a href="#scrape" id="toc-scrape" class="nav-link" data-scroll-target="#scrape">1. Scrape team data</a></li>
  <li><a href="#map" id="toc-map" class="nav-link" data-scroll-target="#map">2. Map the locations</a></li>
  <li><a href="#travel" id="toc-travel" class="nav-link" data-scroll-target="#travel">3. Get travel duration</a></li>
  <li><a href="#viz" id="toc-viz" class="nav-link" data-scroll-target="#viz">4. Make a heatmap</a></li>
  </ul></li>
  <li><a href="#ending-the-journey" id="toc-ending-the-journey" class="nav-link" data-scroll-target="#ending-the-journey">Ending the journey</a></li>
  
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="resources/jazz.gif" class="img-fluid figure-img" style="width:75.0%" alt="John Stockton passes the basketball to Karl Malone who dunks it."></p>
<figcaption class="figure-caption">Classic Jazz: Stockton to Malone for the dunk (<a href="https://media.giphy.com/media/GOIl4CelYNleM/giphy.gif">via Giphy</a></figcaption>
</figure>
</div>
<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">tl;dr</h2>
<p><a href="https://github.com/rCarto/osrm">The {osrm} R package</a> can retrieve from <a href="http://project-osrm.org/">the OSRM API</a> the travel duration between points. I looked at these data for NBA basketball-team arenas, whose details I scraped from the web using <a href="https://rvest.tidyverse.org/">{rvest}</a> and mapped with <a href="https://rstudio.github.io/leaflet/">{leaflet}</a>.</p>
<div class="tip">
<p><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path></svg> <b>Note</b></p>
<p>The original version of this post used <a href="https://github.com/rodazuero/gmapsdistance">the {gmapsdistance} package</a>. I updated it extensively in 2020 to use the {osrm} package, which doesn’t require an API key nor billing details.</p>
</div>
<p>
</p></section>
<section id="on-the-road" class="level2">
<h2 class="anchored" data-anchor-id="on-the-road">On the road</h2>
<p>Fans don’t have far to travel in the UK if they want to see their favourite sports team play an away match.</p>
<p>The USA is pretty big, though.</p>
<p>The National Basketball Association (NBA) compensates by separating its teams into Eastern and Western conferences, each with three divisions of five teams. This means that the majority of <a href="https://en.wikipedia.org/wiki/National_Basketball_Association#Regular_season">regular-season games</a> aren’t too far away.</p>
<p>But this varies. Teams are clustered near Lakes Michigan and Erie in the Central division, but the Northwest division stretches from Portland in the Pacific Northwest to Oklahoma City in the centre-south of the country.</p>
<p>What would it take to be a basketball fan who wanted to drive to away games? How long would it take?</p>
</section>
<section id="r-can-help" class="level2">
<h2 class="anchored" data-anchor-id="r-can-help">R can help</h2>
<p>Surprise, this is all a ruse for me to practice with some R packages:</p>
<ul>
<li><a href="https://rvest.tidyverse.org/">{rvest}</a> for scraping web pages</li>
<li><a href="https://rstudio.github.io/leaflet/">{leaflet}</a> for interactive mapping</li>
<li><a href="https://github.com/rCarto/osrm">{osrm}</a> for calculating duration of travel between points</li>
</ul>
<p>There’s four main parts to the post (click to jump):</p>
<ol type="1">
<li><a href="#scrape">Scrape team data</a></li>
<li><a href="#map">Map the locations</a></li>
<li><a href="#travel">Get travel duration</a></li>
<li><a href="#viz">Make a heatmap</a></li>
</ol>
<p>Let’s start by attaching the packages we need. As always, make sure these are installed first, using <code>install.packages()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Tidyverse and friends</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(tidyverse)  <span class="co"># data handling and plotting</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(rvest)      <span class="co"># scrape data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(janitor)    <span class="co"># misc cleaning</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Geography and travel</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(sf)         <span class="co"># handle geographies</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(osrm)       <span class="co"># fetch travel info</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Interactive elements</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(leaflet)    <span class="co"># interactive maps</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(DT)         <span class="co"># interactive tables</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(plotly)     <span class="co"># interactive plots</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="scrape" class="level3">
<h3 class="anchored" data-anchor-id="scrape">1. Scrape team data</h3>
<section id="use-rvest" class="level4">
<h4 class="anchored" data-anchor-id="use-rvest">Use {rvest}</h4>
<p>The Wikipedia page for the NBA has a table with each team and its location, including coordinates. We can use <a href="https://rvest.tidyverse.org/">the {rvest} web-scraping package</a> to extract that table into a data frame with these steps:</p>
<ol type="1">
<li>Read the HTML of the page with <code>xml2::read_html()</code></li>
<li>Extract the HTML node for the table with <code>rvest::html_nodes()</code></li>
<li>Parse the HTML as a table with <code>rvest::html_table()</code></li>
</ol>
<p>Note that you have to provide to <code>html_nodes()</code> a CSS selector or an XPath that identifies the table’s ‘location’ in the HTML. You can find these using a tool like <a href="https://selectorgadget.com/">SelectorGadget</a>, or with your browser’s ‘inspect’ tool (for Chrome, right-click the element on the page, select ‘inspect’, right-click the HTML for that element, go to ‘Copy’, then ’Copy full XPath). Beware: if the Wikipedia page changes, then this path could change in future.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>nba_scrape <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>(<span class="st">"https://en.wikipedia.org/wiki/National_Basketball_Association"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">xpath =</span> <span class="st">"/html/body/div[2]/div/div[3]/main/div[3]/div[3]/div[1]/table[4]"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">NA</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  .[[<span class="dv">1</span>]]  <span class="co"># list was returned, so extract first list element</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s a preview:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nba_scrape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 32
Columns: 9
$ Division    &lt;chr&gt; "Eastern Conference", "Atlantic", "Atlantic", "Atlantic", …
$ Team        &lt;chr&gt; "Eastern Conference", "Boston Celtics", "Brooklyn Nets", "…
$ Location    &lt;chr&gt; "Eastern Conference", "Boston, Massachusetts", "New York C…
$ Arena       &lt;chr&gt; "Eastern Conference", "TD Garden", "Barclays Center", "Mad…
$ Capacity    &lt;chr&gt; "Eastern Conference", "19,156", "17,732", "19,812", "20,47…
$ Coordinates &lt;chr&gt; "Eastern Conference", ".mw-parser-output .geo-default,.mw-…
$ Founded     &lt;chr&gt; "Eastern Conference", "1946", "1967*", "1946", "1946*", "1…
$ Joined      &lt;chr&gt; "Eastern Conference", "1946", "1976", "1946", "1949", "199…
$ ``          &lt;chr&gt; "Eastern Conference", NA, NA, NA, NA, NA, NA, NA, NA, NA, …</code></pre>
</div>
</div>
<p>So, the table has been returned, but it needs to be tidied up.</p>
</section>
<section id="wrangle-the-data" class="level4">
<h4 class="anchored" data-anchor-id="wrangle-the-data">Wrangle the data</h4>
<p>To summarise the main cleaning steps required:</p>
<ul>
<li>remove the rogue <code>NA</code>-filled column</li>
<li>filter out the spanning headers that identify the conferences</li>
<li>add a column for each team’s conference</li>
<li>make numeric the arena capacity</li>
<li>separate city and state into separate columns</li>
<li>isolate the latitude and longitude by separating them from the <code>Coordinates</code> column</li>
<li>remove the ‘zero width no-break space’ unicode character in the longitude column</li>
<li>retain only the columns of interest</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>nba_wrangle <span class="ot">&lt;-</span> nba_scrape <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">length</span>(.)) <span class="sc">%&gt;%</span>  <span class="co"># remove the last column (NA)</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(Division, <span class="st">"Conference"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Conference =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"Eastern"</span>, <span class="dv">15</span>), <span class="fu">rep</span>(<span class="st">"Western"</span>, <span class="dv">15</span>)),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Capacity =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(Capacity, <span class="st">","</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Location, <span class="fu">c</span>(<span class="st">"City"</span>, <span class="st">"State"</span>), <span class="at">sep =</span> <span class="st">", "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Coordinates, <span class="fu">c</span>(<span class="st">"Coords1"</span>, <span class="st">"Coords2"</span>, <span class="st">"Coords3"</span>), <span class="st">" / "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Coords3, <span class="fu">c</span>(<span class="st">"Latitude"</span>, <span class="st">"Longitude"</span>), <span class="at">sep =</span> <span class="st">"; "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Longitude, <span class="fu">c</span>(<span class="st">"Longitude"</span>, <span class="st">"X"</span>), <span class="at">sep =</span> <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Latitude =</span> <span class="fu">as.numeric</span>(Latitude),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Longitude =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(Longitude, <span class="st">"</span><span class="sc">\\</span><span class="st">ufeff"</span>))  <span class="co"># rogue unicode</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    Team, Conference, <span class="fu">everything</span>(),</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span>Founded, <span class="sc">-</span>Joined, <span class="sc">-</span>Coords1, <span class="sc">-</span>Coords2, <span class="sc">-</span>X</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()  <span class="co"># convert to tibble</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nba_wrangle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 30
Columns: 9
$ Team       &lt;chr&gt; "Boston Celtics", "Brooklyn Nets", "New York Knicks", "Phil…
$ Conference &lt;chr&gt; "Eastern", "Eastern", "Eastern", "Eastern", "Eastern", "Eas…
$ Division   &lt;chr&gt; "Atlantic", "Atlantic", "Atlantic", "Atlantic", "Atlantic",…
$ City       &lt;chr&gt; "Boston", "New York City", "New York City", "Philadelphia",…
$ State      &lt;chr&gt; "Massachusetts", "New York", "New York", "Pennsylvania", "O…
$ Arena      &lt;chr&gt; "TD Garden", "Barclays Center", "Madison Square Garden", "W…
$ Capacity   &lt;dbl&gt; 19156, 17732, 19812, 20478, 19800, 20917, 19432, 20332, 179…
$ Latitude   &lt;dbl&gt; 42.36630, 40.68265, 40.75056, 39.90111, 43.64333, 41.88056,…
$ Longitude  &lt;dbl&gt; -71.06223, -73.97469, -73.99361, -75.17194, -79.37917, -87.…</code></pre>
</div>
</div>
</section>
<section id="add-more-information" class="level4">
<h4 class="anchored" data-anchor-id="add-more-information">Add more information</h4>
<p>I made a table of <a href="https://en.wikipedia.org/wiki/Wikipedia:WikiProject_National_Basketball_Association/National_Basketball_Association_team_abbreviations">three-letter team codes</a> and colours for the markers and icons that will appear in the pins on the interactive map. I got these from <a href="https://teamcolorcodes.com/nba-team-color-codes/">teamcolorcodes.com</a>. With {leaflet}. The markers can only take a small set of named colours (see <code>?awesomeIcons</code>), whereas the icon can use any CSS-valid colour (like hex codes).</p>
<details>
<summary>
Click for the code that creates a data frame of team codes and colours
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>nba_abbr_cols <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>Code, <span class="sc">~</span>Franchise, <span class="sc">~</span>colour_marker, <span class="sc">~</span>colour_icon,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>, <span class="st">"Atlanta Hawks"</span>,          <span class="st">"red"</span>,       <span class="st">"#C1D32F"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BKN"</span>, <span class="st">"Boston Celtics"</span>,         <span class="st">"black"</span>,     <span class="st">"#FFFFFF"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BOS"</span>, <span class="st">"Brooklyn Nets"</span>,          <span class="st">"green"</span>,     <span class="st">"#BA9653"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHA"</span>, <span class="st">"Charlotte Hornets"</span>,      <span class="st">"darkblue"</span>,  <span class="st">"#00788C"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHI"</span>, <span class="st">"Chicago Bulls"</span>,          <span class="st">"red"</span>,       <span class="st">"#000000"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CLE"</span>, <span class="st">"Cleveland Cavaliers"</span>,    <span class="st">"darkred"</span>,   <span class="st">"#FDBB30"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DAL"</span>, <span class="st">"Dallas Mavericks"</span>,       <span class="st">"blue"</span>,      <span class="st">"#B8C4CA"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DEN"</span>, <span class="st">"Denver Nuggets"</span>,         <span class="st">"darkblue"</span>,  <span class="st">"#FEC524"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"DET"</span>, <span class="st">"Detroit Pistons"</span>,        <span class="st">"red"</span>,       <span class="st">"#1D42BA"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"GSW"</span>, <span class="st">"Golden State Warriors"</span>,  <span class="st">"blue"</span>,      <span class="st">"#FFC72C"</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"HOU"</span>, <span class="st">"Houston Rockets"</span>,        <span class="st">"red"</span>,       <span class="st">"#000000"</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"IND"</span>, <span class="st">"Indiana Pacers"</span>,         <span class="st">"darkblue"</span>,  <span class="st">"#FDBB30"</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"LAC"</span>, <span class="st">"Los Angeles Clippers"</span>,   <span class="st">"red"</span>,       <span class="st">"#1D428A"</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"LAL"</span>, <span class="st">"Los Angeles Lakers"</span>,     <span class="st">"blue"</span>,      <span class="st">"#FDB927"</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MEM"</span>, <span class="st">"Memphis Grizzlies"</span>,      <span class="st">"lightblue"</span>, <span class="st">"#12173F"</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MIA"</span>, <span class="st">"Miami Heat"</span>,             <span class="st">"red"</span>,       <span class="st">"#F9A01B"</span>,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MIL"</span>, <span class="st">"Milwaukee Bucks"</span>,        <span class="st">"darkgreen"</span>, <span class="st">"#EEE1C6"</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MIN"</span>, <span class="st">"Minnesota Timberwolves"</span>, <span class="st">"darkblue"</span>,  <span class="st">"#9EA2A2"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NOP"</span>, <span class="st">"New Orleans Pelicans"</span>,   <span class="st">"darkblue"</span>,  <span class="st">"#C8102E"</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NYK"</span>, <span class="st">"New York Knicks"</span>,        <span class="st">"blue"</span>,      <span class="st">"#F58426"</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"OKC"</span>, <span class="st">"Oklahoma City Thunder"</span>,  <span class="st">"blue"</span>,      <span class="st">"#EF3B24"</span>,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ORL"</span>, <span class="st">"Orlando Magic"</span>,          <span class="st">"blue"</span>,      <span class="st">"#C4CED4"</span>,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PHI"</span>, <span class="st">"Philadelphia 76ers"</span>,     <span class="st">"blue"</span>,      <span class="st">"#ED174C"</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"PHX"</span>, <span class="st">"Phoenix Suns"</span>,           <span class="st">"darkblue"</span>,  <span class="st">"#E56020"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"POR"</span>, <span class="st">"Portland Trail Blazers"</span>, <span class="st">"red"</span>,       <span class="st">"#000000"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"SAC"</span>, <span class="st">"Sacramento Kings"</span>,       <span class="st">"purple"</span>,    <span class="st">"#63727A"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"SAS"</span>, <span class="st">"San Antonio Spurs"</span>,      <span class="st">"black"</span>,     <span class="st">"#C4CED4"</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"TOR"</span>, <span class="st">"Toronto Raptors"</span>,        <span class="st">"red"</span>,       <span class="st">"#000000"</span>,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"UTA"</span>, <span class="st">"Utah Jazz"</span>,              <span class="st">"darkblue"</span>,  <span class="st">"#F9A01B"</span>,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"WAS"</span>, <span class="st">"Washington Wizards"</span>,     <span class="st">"darkblue"</span>,  <span class="st">"#E31837"</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nba_abbr_cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Code  Franchise           colour_marker colour_icon
  &lt;chr&gt; &lt;chr&gt;               &lt;chr&gt;         &lt;chr&gt;      
1 ATL   Atlanta Hawks       red           #C1D32F    
2 BKN   Boston Celtics      black         #FFFFFF    
3 BOS   Brooklyn Nets       green         #BA9653    
4 CHA   Charlotte Hornets   darkblue      #00788C    
5 CHI   Chicago Bulls       red           #000000    
6 CLE   Cleveland Cavaliers darkred       #FDBB30    </code></pre>
</div>
</div>
<p>Now this extra information can be joined to our scraped and wrangled data frame from before.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nba_table <span class="ot">&lt;-</span> nba_wrangle <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nba_abbr_cols, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Team"</span> <span class="ot">=</span> <span class="st">"Franchise"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Code, <span class="fu">everything</span>())</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nba_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 30
Columns: 12
$ Code          &lt;chr&gt; "BKN", "BOS", "NYK", "PHI", "TOR", "CHI", "CLE", "DET", …
$ Team          &lt;chr&gt; "Boston Celtics", "Brooklyn Nets", "New York Knicks", "P…
$ Conference    &lt;chr&gt; "Eastern", "Eastern", "Eastern", "Eastern", "Eastern", "…
$ Division      &lt;chr&gt; "Atlantic", "Atlantic", "Atlantic", "Atlantic", "Atlanti…
$ City          &lt;chr&gt; "Boston", "New York City", "New York City", "Philadelphi…
$ State         &lt;chr&gt; "Massachusetts", "New York", "New York", "Pennsylvania",…
$ Arena         &lt;chr&gt; "TD Garden", "Barclays Center", "Madison Square Garden",…
$ Capacity      &lt;dbl&gt; 19156, 17732, 19812, 20478, 19800, 20917, 19432, 20332, …
$ Latitude      &lt;dbl&gt; 42.36630, 40.68265, 40.75056, 39.90111, 43.64333, 41.880…
$ Longitude     &lt;dbl&gt; -71.06223, -73.97469, -73.99361, -75.17194, -79.37917, -…
$ colour_marker &lt;chr&gt; "black", "green", "blue", "blue", "red", "red", "darkred…
$ colour_icon   &lt;chr&gt; "#FFFFFF", "#BA9653", "#F58426", "#ED174C", "#000000", "…</code></pre>
</div>
</div>
<p>Now we have everything we need to visualise the data and fetch the travel duration times.</p>
</section>
</section>
<section id="map" class="level3">
<h3 class="anchored" data-anchor-id="map">2. Map the locations</h3>
<p>So where are all the arenas?</p>
<p>We can create a simple interactive map with {leaflet} by plotting the <code>Latitude</code> and <code>Longitude</code> columns and creating custom point markers with a basketball icon and each team’s colours, as well as an information box that appears on-click.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(nba_table) <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>Stamen.TonerLite) <span class="sc">%&gt;%</span>  <span class="co"># add basemap</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(  <span class="co"># add markers</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> <span class="sc">~</span>Longitude, <span class="at">lat =</span> <span class="sc">~</span>Latitude,  <span class="co"># coordinates</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste0</span>(  <span class="co"># HTML content for popup info</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;b&gt;"</span>, nba_table<span class="sc">$</span>Team, <span class="st">"&lt;/b&gt;"</span>,  <span class="co"># team name</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;"</span>, <span class="fu">paste0</span>(nba_table<span class="sc">$</span>Arena, <span class="st">", "</span>, nba_table<span class="sc">$</span>City),  <span class="co"># location</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(  <span class="co"># division/conference information</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        nba_table<span class="sc">$</span>Conference <span class="sc">==</span> <span class="st">"Eastern"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"&lt;br&gt;&lt;font color='#0000FF'&gt;"</span>, nba_table<span class="sc">$</span>Division,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>               <span class="st">" Division (Eastern Conference)&lt;/font&gt;"</span>),</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"&lt;br&gt;&lt;font color='#FF0000'&gt;"</span>, nba_table<span class="sc">$</span>Division,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>               <span class="st">" Division (Western Conference)&lt;/font&gt;"</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> <span class="fu">awesomeIcons</span>(</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">library =</span> <span class="st">"ion"</span>, <span class="at">icon =</span> <span class="st">"ion-ios-basketball"</span>, <span class="co"># add basketball icon</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">markerColor =</span> nba_table<span class="sc">$</span>colour_marker,  <span class="co"># colour the marker</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">iconColor =</span> nba_table<span class="sc">$</span>colour_icon  <span class="co"># colour the basketball icon</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMeasure</span>()  <span class="co"># add straight-line distance-measuring tool</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-20bad734915ae6a4fb03" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-20bad734915ae6a4fb03">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TonerLite",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[42.366303,40.68265,40.750556,39.901111,43.643333,41.880556,41.496389,42.341111,39.763889,43.043611,33.757222,35.225,25.781389,28.539167,38.898056,39.748611,44.979444,35.463333,45.531667,40.768333,37.768056,34.043056,34.043056,33.445833,38.649167,32.790556,29.750833,35.138333,29.948889,29.426944],[-71.062228,-73.974689,-73.993611,-75.171944,-79.379167,-87.674167,-81.688056,-83.05500000000001,-86.155556,-87.916944,-84.396389,-80.839167,-80.188056,-81.383611,-77.020833,-105.0075,-93.276111,-97.515,-122.666667,-111.901111,-122.3875,-118.267222,-118.267222,-112.071389,-121.518056,-96.810278,-95.362222,-90.050556,-90.08194399999999,-98.4375],{"icon":"ion-ios-basketball","markerColor":["black","green","blue","blue","red","red","darkred","red","darkblue","darkgreen","red","darkblue","red","blue","darkblue","darkblue","darkblue","blue","red","darkblue","blue","red","blue","darkblue","purple","blue","red","lightblue","darkblue","black"],"iconColor":["#FFFFFF","#BA9653","#F58426","#ED174C","#000000","#000000","#FDBB30","#1D42BA","#FDBB30","#EEE1C6","#C1D32F","#00788C","#F9A01B","#C4CED4","#E31837","#FEC524","#9EA2A2","#EF3B24","#000000","#F9A01B","#FFC72C","#1D428A","#FDB927","#E56020","#63727A","#B8C4CA","#000000","#12173F","#C8102E","#C4CED4"],"spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"ion"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<b>Boston Celtics<\/b><br>TD Garden, Boston<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Brooklyn Nets<\/b><br>Barclays Center, New York City<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>New York Knicks<\/b><br>Madison Square Garden, New York City<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Philadelphia 76ers<\/b><br>Wells Fargo Center, Philadelphia<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Toronto Raptors<\/b><br>Scotiabank Arena, Toronto<br><font color='#0000FF'>Atlantic Division (Eastern Conference)<\/font>","<b>Chicago Bulls<\/b><br>United Center, Chicago<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Cleveland Cavaliers<\/b><br>Rocket Mortgage FieldHouse, Cleveland<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Detroit Pistons<\/b><br>Little Caesars Arena, Detroit<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Indiana Pacers<\/b><br>Gainbridge Fieldhouse, Indianapolis<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Milwaukee Bucks<\/b><br>Fiserv Forum, Milwaukee<br><font color='#0000FF'>Central Division (Eastern Conference)<\/font>","<b>Atlanta Hawks<\/b><br>State Farm Arena, Atlanta<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Charlotte Hornets<\/b><br>Spectrum Center, Charlotte<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Miami Heat<\/b><br>Kaseya Center, Miami<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Orlando Magic<\/b><br>Amway Center, Orlando<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Washington Wizards<\/b><br>Capital One Arena, Washington<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Denver Nuggets<\/b><br>Ball Arena, Denver<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Minnesota Timberwolves<\/b><br>Target Center, Minneapolis<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Oklahoma City Thunder<\/b><br>Paycom Center, Oklahoma City<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Portland Trail Blazers<\/b><br>Moda Center, Portland<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Utah Jazz<\/b><br>Delta Center, Salt Lake City<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>","<b>Golden State Warriors<\/b><br>Chase Center, San Francisco<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Los Angeles Clippers<\/b><br>Crypto.com Arena, Los Angeles<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Los Angeles Lakers<\/b><br>Crypto.com Arena, Los Angeles<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Phoenix Suns<\/b><br>Footprint Center, Phoenix<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Sacramento Kings<\/b><br>Golden 1 Center, Sacramento<br><font color='#FF0000'>Pacific Division (Western Conference)<\/font>","<b>Dallas Mavericks<\/b><br>American Airlines Center, Dallas<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>Houston Rockets<\/b><br>Toyota Center, Houston<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>Memphis Grizzlies<\/b><br>FedExForum, Memphis<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>New Orleans Pelicans<\/b><br>Smoothie King Center, New Orleans<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>","<b>San Antonio Spurs<\/b><br>AT&T Center, San Antonio<br><font color='#FF0000'>Southwest Division (Western Conference)<\/font>"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMeasure","args":[{"position":"topright","primaryLengthUnit":"feet","primaryAreaUnit":"acres","activeColor":"#ABE67E","completedColor":"#C8F2BE","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]}],"limits":{"lat":[25.781389,45.531667],"lng":[-122.666667,-71.062228]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>You can drag and zoom and click the points.</p>
</section>
<section id="travel" class="level3">
<h3 class="anchored" data-anchor-id="travel">3. Get travel duration</h3>
<p>So how far between these locations?</p>
<p><a href="https://github.com/rCarto/osrm">The {osrm} R package</a> from Timothée Giraud, Robin Cura and Matthieu Viry lets you fetch shortest paths and travel times from <a href="https://www.openstreetmap.org/">OpenStreetMap</a> via the <a href="http://project-osrm.org/">OSRM API</a>. It defaults to driving, but you can select walking and biking too. Since we’re using the demo server for OSRM, we can only fetch duration.</p>
<section id="duration-matrix" class="level4">
<h4 class="anchored" data-anchor-id="duration-matrix">Duration matrix</h4>
<p>The <code>osrm::osrmTable()</code> function takes a data frame (or spatial object) where the first three columns are an identifier and coordinates. The return object is a list, where the first element is a matrix of durations for each pair of points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>nba_locs <span class="ot">&lt;-</span> nba_table <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Code, Longitude, Latitude) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"Longitude"</span>, <span class="st">"Latitude"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>nba_dur <span class="ot">&lt;-</span> <span class="fu">osrmTable</span>(<span class="at">loc =</span> nba_locs)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(nba_dur)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ durations   : num [1:30, 1:30] 0 282 276 385 650 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:30] "1" "2" "3" "4" ...
  .. ..$ : chr [1:30] "1" "2" "3" "4" ...
 $ sources     :'data.frame':   30 obs. of  2 variables:
  ..$ lon: num [1:30] -71.1 -74 -74 -75.2 -79.4 ...
  ..$ lat: num [1:30] 42.4 40.7 40.7 39.9 43.6 ...
 $ destinations:'data.frame':   30 obs. of  2 variables:
  ..$ lon: num [1:30] -71.1 -74 -74 -75.2 -79.4 ...
  ..$ lat: num [1:30] 42.4 40.7 40.7 39.9 43.6 ...</code></pre>
</div>
</div>
</section>
<section id="duration-all-teams" class="level4">
<h4 class="anchored" data-anchor-id="duration-all-teams">Duration: all teams</h4>
<p>Let’s take this matrix and tidy it into a data frame so there’s one row per team-pair. We can also round to the nearest minute and calculate the nearest number of hours.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>nba_dur_all <span class="ot">&lt;-</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>(nba_dur<span class="sc">$</span>durations) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">"Start"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Start =</span> nba_locs<span class="sc">$</span>Code) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">c</span>(<span class="st">"Start"</span>, nba_locs<span class="sc">$</span>Code), <span class="fu">all_of</span>(<span class="fu">names</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> BKN<span class="sc">:</span>SAS,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"End"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"Duration (mins)"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Duration (mins)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round_half_up</span>(<span class="st">`</span><span class="at">Duration (mins)</span><span class="st">`</span>),</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Duration (hrs)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round_half_up</span>(<span class="st">`</span><span class="at">Duration (mins)</span><span class="st">`</span> <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Duration (mins)</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s a {DT} interactive table sorted by duration that you can filter. Click the ‘CSV’ button to download the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nba_dur_all <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">filter =</span> <span class="st">"top"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">extensions =</span> <span class="fu">c</span>(<span class="st">"Buttons"</span>,<span class="st">"Scroller"</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">class =</span> <span class="st">"compact"</span>, <span class="at">width =</span> <span class="st">"100%"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom =</span> <span class="st">"Blrtip"</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">scroller =</span> <span class="cn">TRUE</span>, <span class="at">scrollY =</span> <span class="dv">300</span>,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">buttons =</span> <span class="fu">list</span>(<span class="st">"csv"</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-b603c7313aaf14f7ee09" style="width:100%;height:auto;" class="datatables html-widget "></div>
<script type="application/json" data-for="htmlwidget-b603c7313aaf14f7ee09">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"3462\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"58\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","Scroller"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900"],["MIA","POR","GSW","BKN","POR","BKN","MIA","SAC","MIA","GSW","LAC","LAL","BKN","BKN","SAC","ORL","BKN","POR","GSW","BOS","GSW","POR","BOS","NYK","POR","NYK","SAC","ORL","GSW","ORL","GSW","PHI","POR","PHI","LAC","LAL","BOS","BOS","LAC","LAL","SAC","BOS","NYK","NYK","GSW","SAC","WAS","NYK","POR","WAS","SAC","CHA","PHI","POR","PHI","PHI","LAC","LAL","CHA","GSW","PHX","BKN","MIA","MIA","LAC","LAL","SAC","WAS","CHA","SAC","LAC","LAL","WAS","WAS","GSW","TOR","POR","TOR","ATL","POR","MIA","UTA","POR","NOP","LAC","LAL","TOR","TOR","SAC","TOR","PHX","BOS","PHX","NYK","LAC","LAL","ORL","ORL","ATL","SAC","ATL","GSW","GSW","CLE","CHA","CHA","PHX","LAC","LAL","PHI","POR","CLE","UTA","BKN","DET","GSW","POR","DET","LAC","LAL","CLE","CLE","MIA","PHX","PHX","SAC","CLE","WAS","ORL","UTA","PHX","TOR","LAC","LAL","DET","DET","POR","HOU","SAC","DET","MEM","SAC","NOP","POR","NOP","GSW","IND","GSW","IND","POR","UTA","BOS","UTA","NYK","ATL","ATL","LAC","LAL","UTA","PHI","POR","IND","SAS","BKN","SAC","SAS","GSW","MIL","PHX","ORL","MIA","UTA","DEN","WAS","MEM","CHA","GSW","PHX","SAC","CHI","MEM","GSW","POR","CHI","CHA","UTA","LAC","LAL","PHX","IND","IND","CLE","DEN","LAC","LAL","BKN","MIL","MIL","SAC","POR","MIL","PHX","MIL","POR","DAL","DET","LAC","LAL","CHI","CHI","SAC","CHI","BKN","HOU","MIN","GSW","UTA","SAC","HOU","TOR","HOU","GSW","MIN","MIN","BOS","LAC","LAL","SAS","SAS","ATL","NYK","UTA","ORL","DEN","MIA","NOP","NOP","LAC","LAL","DAL","BKN","MIN","PHX","SAC","OKC","POR","MIL","MIN","UTA","NOP","DEN","BOS","ATL","DEN","PHX","NYK","SAS","PHI","DEN","PHI","PHX","CHI","OKC","MEM","MEM","BKN","LAC","LAL","SAC","DAL","SAS","DAL","TOR","GSW","PHX","IND","POR","BOS","MIN","UTA","HOU","HOU","NYK","CLE","PHX","SAS","SAC","MIN","SAS","GSW","WAS","DEN","UTA","DET","WAS","SAS","ORL","BKN","NOP","OKC","SAC","PHI","HOU","OKC","BOS","DAL","DAL","MIN","GSW","NYK","BKN","MIA","HOU","CHA","DEN","TOR","MIA","TOR","UTA","HOU","MEM","UTA","BOS","OKC","OKC","MIA","NYK","MIL","DEN","TOR","OKC","MIA","DAL","PHI","IND","UTA","LAC","LAL","HOU","HOU","BKN","SAS","MIN","CLE","PHX","NOP","SAS","DET","DAL","TOR","WAS","HOU","PHI","OKC","MIA","MIA","DET","CHI","PHX","MEM","ATL","DEN","UTA","MIA","SAS","MIL","MEM","BKN","DAL","DAL","LAC","LAL","ORL","BKN","POR","PHX","UTA","SAS","BOS","NOP","NOP","NYK","OKC","WAS","UTA","TOR","NOP","MIA","ORL","BOS","CHI","DAL","TOR","MIA","MIA","DAL","NYK","WAS","HOU","CLE","DEN","CLE","HOU","SAS","DET","MIL","DEN","NOP","OKC","TOR","UTA","DAL","SAS","SAS","LAC","LAL","MIL","ORL","MIA","CLE","LAC","LAL","OKC","OKC","OKC","ORL","NOP","MIN","PHI","NOP","BOS","CHA","SAS","DEN","DET","NYK","MIN","MIA","MIN","PHI","CHA","SAS","MIN","SAS","CHI","MIA","PHI","IND","MIN","MIN","UTA","HOU","MIA","HOU","DEN","MIN","DAL","MIN","GSW","CLE","DEN","POR","DET","CHI","ORL","HOU","ORL","DAL","DET","BKN","MIL","ATL","ATL","SAS","ORL","WAS","IND","SAS","MIN","BOS","MEM","MEM","MIN","NYK","MIL","BKN","BOS","ORL","ORL","NYK","OKC","UTA","DAL","ORL","CHA","OKC","WAS","DEN","NOP","SAC","PHX","HOU","HOU","CHI","DET","NOP","NOP","MIA","WAS","CLE","ORL","OKC","CHA","HOU","CLE","CLE","IND","DEN","DAL","CHA","DAL","MEM","OKC","MEM","PHI","DEN","CHI","DET","BKN","DEN","MIL","HOU","MEM","MIA","NOP","MIL","ORL","PHI","DEN","TOR","MEM","MIL","HOU","IND","DAL","PHX","POR","POR","LAC","LAL","ATL","TOR","SAS","ATL","IND","LAC","LAL","DEN","DEN","BKN","IND","ORL","DEN","CHI","HOU","ORL","DAL","TOR","MIN","MIN","DAL","CHI","PHX","OKC","BOS","NOP","ATL","CHI","ATL","NYK","DEN","BKN","SAS","BOS","MIL","CHA","MIL","PHX","SAS","NYK","CHA","WAS","MEM","MIL","DEN","MIN","OKC","DAL","IND","MIL","PHI","MIL","ORL","MIA","NOP","WAS","MIN","MEM","PHX","DEN","ATL","OKC","ATL","MIL","PHI","ATL","CHI","BOS","IND","MIL","NOP","WAS","CHI","NYK","MEM","HOU","ATL","ORL","CHA","TOR","CHA","DEN","OKC","DAL","CHI","CHI","ATL","PHI","CHI","CLE","DAL","DET","BKN","BOS","OKC","IND","MIN","MIN","IND","PHX","SAC","DET","MEM","NYK","PHX","GSW","MEM","CLE","ATL","ATL","OKC","DET","CHI","MIA","IND","CHA","ATL","CHA","NOP","POR","UTA","CHI","CLE","WAS","DET","MEM","SAS","MIN","OKC","UTA","GSW","NOP","CLE","BKN","PHI","UTA","BOS","IND","PHX","CHA","CHA","NYK","WAS","ATL","POR","DET","CHA","GSW","MIA","ATL","UTA","UTA","LAC","LAL","CHA","MEM","BOS","DET","NOP","ORL","OKC","MIL","DEN","DET","TOR","MEM","NYK","MIL","IND","MIN","POR","UTA","SAC","SAC","CHA","PHI","DET","IND","IND","WAS","BKN","TOR","PHI","CHA","HOU","MEM","TOR","WAS","IND","TOR","BOS","DET","ATL","TOR","IND","WAS","CHI","MEM","NOP","SAS","CHI","TOR","TOR","ORL","PHI","TOR","NYK","CHA","CLE","CHA","DAL","NOP","BKN","WAS","DEN","UTA","CLE","BOS","CLE","NYK","NOP","ATL","MEM","IND","MEM","OKC","OKC","SAS","CLE","CLE","MIL","PHI","ATL","MEM","OKC","DAL","ORL","HOU","CHI","CHA","WAS","MIN","LAC","LAL","SAC","SAC","CLE","NOP","MEM","LAC","LAL","WAS","GSW","GSW","ATL","DET","MIL","MEM","PHX","PHX","LAC","LAL","HOU","NOP","CHI","CLE","PHI","BKN","MIL","MIN","CLE","IND","CLE","TOR","IND","DET","IND","MIL","CHI","DET","DAL","SAS","BOS","DET","TOR","CHA","ATL","WAS","BKN","BOS","WAS","NYK","NYK","BKN","MIA","ORL","DAL","HOU","OKC","DAL","CHI","IND","HOU","SAS","CLE","DET","PHI","WAS","BOS","PHI","PHI","NYK","SAC","GSW","CHI","MIL","BOS","NYK","BKN","BOS","NYK","PHI","TOR","CHI","CLE","DET","IND","MIL","ATL","CHA","MIA","ORL","WAS","DEN","MIN","OKC","POR","UTA","GSW","LAC","LAC","LAL","LAL","PHX","SAC","DAL","HOU","MEM","NOP","SAS"],["POR","MIA","BKN","GSW","BKN","POR","SAC","MIA","GSW","MIA","BKN","BKN","LAC","LAL","BKN","POR","SAC","ORL","BOS","GSW","NYK","BOS","POR","GSW","NYK","POR","ORL","SAC","ORL","GSW","PHI","GSW","PHI","POR","BOS","BOS","LAC","LAL","NYK","NYK","BOS","SAC","LAC","LAL","WAS","NYK","GSW","SAC","WAS","POR","PHI","POR","SAC","CHA","LAC","LAL","PHI","PHI","GSW","CHA","BKN","PHX","LAC","LAL","MIA","MIA","WAS","SAC","SAC","CHA","WAS","WAS","LAC","LAL","TOR","GSW","TOR","POR","POR","ATL","UTA","MIA","NOP","POR","TOR","TOR","LAC","LAL","TOR","SAC","BOS","PHX","NYK","PHX","ORL","ORL","LAC","LAL","SAC","ATL","GSW","ATL","CLE","GSW","LAC","LAL","PHI","CHA","CHA","PHX","CLE","POR","BKN","UTA","GSW","DET","DET","POR","CLE","CLE","LAC","LAL","PHX","MIA","WAS","CLE","SAC","PHX","UTA","ORL","TOR","PHX","DET","DET","LAC","LAL","HOU","POR","DET","SAC","POR","NOP","SAC","MEM","GSW","NOP","GSW","IND","POR","IND","BOS","UTA","NYK","UTA","LAC","LAL","ATL","ATL","PHI","UTA","SAS","SAC","POR","SAS","IND","BKN","MIL","GSW","ORL","PHX","DEN","WAS","MIA","UTA","SAC","PHX","CHI","CHA","MEM","GSW","GSW","MEM","CHI","POR","UTA","CHA","IND","IND","CLE","LAC","LAL","PHX","BKN","MIL","MIL","DEN","LAC","LAL","MIL","MIL","SAC","DET","POR","DAL","POR","PHX","CHI","CHI","LAC","LAL","CHI","SAC","HOU","BKN","GSW","MIN","TOR","HOU","SAC","UTA","GSW","HOU","LAC","LAL","SAS","MIN","MIN","BOS","NYK","UTA","SAS","ATL","DEN","ORL","MIN","LAC","LAL","NOP","NOP","BKN","DAL","SAC","MIL","MIN","POR","OKC","PHX","MIA","NOP","UTA","BOS","DEN","PHX","NYK","ATL","DEN","PHI","SAS","PHI","DEN","CHI","PHX","BKN","LAC","LAL","OKC","MEM","MEM","DAL","SAC","TOR","GSW","SAS","DAL","IND","PHX","MIN","HOU","POR","CLE","BOS","NYK","HOU","UTA","MIN","SAC","SAS","PHX","GSW","SAS","DEN","WAS","DET","UTA","SAS","WAS","MIN","NOP","BKN","SAC","OKC","HOU","PHI","GSW","DAL","BOS","NYK","ORL","OKC","DAL","MIA","BKN","TOR","DEN","CHA","HOU","TOR","MIA","HOU","UTA","UTA","MEM","OKC","BOS","NYK","MIL","OKC","MIA","TOR","DEN","MIA","OKC","PHI","DAL","UTA","IND","HOU","HOU","LAC","LAL","MIN","CLE","BKN","SAS","NOP","PHX","DET","SAS","TOR","DAL","HOU","WAS","OKC","PHI","CHI","DET","MIA","MIA","MEM","PHX","DEN","ATL","MIL","SAS","MIA","UTA","BKN","MEM","LAC","LAL","DAL","DAL","BKN","ORL","PHX","POR","SAS","UTA","NOP","BOS","NYK","NOP","WAS","OKC","CHI","NOP","TOR","DAL","TOR","MIA","UTA","MIA","ORL","BOS","NYK","WAS","MIA","DAL","CLE","HOU","CLE","DEN","DET","MIL","HOU","SAS","NOP","DEN","TOR","OKC","DAL","UTA","LAC","LAL","SAS","SAS","ORL","MIL","CLE","MIA","OKC","OKC","LAC","LAL","ORL","OKC","MIN","NOP","NOP","PHI","MIN","SAS","CHA","DET","DEN","MIN","BOS","PHI","NYK","MIA","MIN","MIN","SAS","CHI","SAS","IND","MIN","MIA","CHA","UTA","MIN","MIN","HOU","MIA","GSW","PHI","CLE","HOU","DEN","DAL","POR","DEN","ORL","ORL","CHI","MIL","DET","DET","DAL","ATL","HOU","BKN","MIN","ORL","SAS","MIN","SAS","IND","WAS","MEM","BOS","NYK","ATL","MEM","BKN","MIL","ORL","BOS","NYK","ORL","UTA","OKC","ORL","DAL","OKC","CHA","NOP","SAC","WAS","DEN","HOU","PHX","CHI","HOU","NOP","DET","CLE","WAS","MIA","NOP","CLE","CLE","HOU","CHA","ORL","OKC","DEN","IND","MIL","DAL","CHA","DEN","DET","PHI","MEM","MEM","BKN","OKC","CHI","HOU","DAL","DEN","MIA","MEM","MIL","NOP","PHI","ORL","MIL","MEM","TOR","DEN","IND","HOU","PHX","DAL","LAC","LAL","POR","POR","TOR","ATL","ATL","SAS","BKN","DEN","DEN","LAC","LAL","IND","ORL","IND","CHI","DEN","ORL","HOU","MIN","MIN","DAL","TOR","CHI","DAL","OKC","PHX","ATL","CHI","BOS","NOP","NYK","ATL","SAS","CHA","DEN","MIL","BOS","BKN","NYK","SAS","PHX","MIL","MIL","MEM","WAS","CHA","MIN","DEN","MIL","IND","DAL","OKC","MIL","PHI","WAS","NOP","MIA","ORL","MEM","MIN","DEN","PHX","OKC","ATL","MIL","ATL","ATL","PHI","BOS","CHI","NOP","WAS","IND","MIL","NYK","CHI","ORL","ATL","HOU","MEM","TOR","CHA","CHI","DAL","CHI","DEN","OKC","CHA","DAL","CHI","PHI","MIN","ATL","BKN","DET","IND","MIN","BOS","OKC","CLE","NYK","SAC","PHX","MEM","DET","IND","GSW","PHX","CLE","MEM","CHI","DET","IND","ATL","ATL","CHA","OKC","MIA","CLE","NOP","CHA","UTA","POR","WAS","ATL","CHI","MIN","SAS","MEM","DET","NOP","GSW","UTA","OKC","BKN","CLE","IND","PHX","CHA","PHI","UTA","BOS","NYK","CHA","ATL","WAS","GSW","CHA","DET","POR","ATL","MIA","LAC","LAL","UTA","UTA","MEM","CHA","DET","BOS","ORL","NOP","DEN","TOR","OKC","NYK","MIL","MIL","DET","MEM","MIN","IND","SAC","SAC","UTA","POR","IND","DET","PHI","CHA","WAS","IND","TOR","BKN","CHA","PHI","MEM","HOU","WAS","TOR","TOR","IND","TOR","WAS","IND","BOS","ATL","DET","TOR","CHI","SAS","NOP","MEM","CHI","NYK","CHA","TOR","PHI","TOR","ORL","CHA","CLE","NOP","DAL","WAS","BKN","UTA","DEN","BOS","CLE","NYK","CLE","ATL","NOP","IND","MEM","OKC","MEM","SAS","OKC","PHI","MIL","CLE","CLE","ORL","DAL","HOU","MEM","ATL","OKC","MIN","WAS","CHA","CHI","SAC","SAC","LAC","LAL","WAS","MEM","NOP","GSW","GSW","CLE","LAC","LAL","MEM","MIL","DET","ATL","LAC","LAL","PHX","PHX","NOP","HOU","CLE","CHI","BKN","PHI","MIN","MIL","IND","CLE","TOR","CLE","DET","IND","MIL","IND","DET","CHI","SAS","DAL","WAS","TOR","DET","ATL","CHA","BOS","BOS","BKN","NYK","WAS","BKN","NYK","ORL","MIA","HOU","DAL","DAL","OKC","IND","CHI","SAS","HOU","DET","CLE","WAS","PHI","PHI","BOS","NYK","PHI","GSW","SAC","MIL","CHI","NYK","BOS","BKN","BOS","NYK","PHI","TOR","CHI","CLE","DET","IND","MIL","ATL","CHA","MIA","ORL","WAS","DEN","MIN","OKC","POR","UTA","GSW","LAC","LAL","LAC","LAL","PHX","SAC","DAL","HOU","MEM","NOP","SAS"],[3462,3451,3316,3310,3306,3299,3296,3294,3290,3286,3229,3229,3219,3219,3217,3214,3209,3209,3083,3081,3075,3074,3070,3069,3066,3058,3052,3048,3044,3043,3036,3035,3027,3024,2996,2996,2991,2991,2988,2988,2984,2980,2978,2978,2977,2976,2972,2968,2968,2961,2937,2935,2934,2930,2920,2920,2919,2919,2907,2902,2897,2888,2882,2882,2879,2879,2878,2871,2845,2840,2827,2827,2826,2826,2773,2768,2763,2757,2742,2733,2716,2707,2694,2691,2686,2686,2677,2677,2674,2667,2662,2659,2657,2647,2637,2637,2634,2634,2631,2628,2626,2620,2575,2574,2571,2571,2570,2569,2569,2568,2566,2563,2562,2553,2500,2500,2491,2489,2488,2488,2483,2483,2480,2479,2478,2476,2473,2473,2469,2465,2430,2422,2413,2413,2410,2410,2405,2404,2401,2399,2395,2393,2392,2391,2386,2385,2362,2357,2351,2348,2330,2325,2322,2312,2289,2289,2287,2287,2283,2278,2266,2261,2261,2258,2258,2258,2256,2252,2237,2233,2228,2224,2221,2216,2212,2211,2209,2209,2209,2208,2206,2201,2199,2197,2190,2185,2178,2178,2178,2175,2175,2174,2169,2169,2169,2162,2162,2162,2157,2153,2152,2152,2151,2149,2148,2145,2122,2122,2117,2117,2110,2107,2081,2080,2065,2061,2019,2015,2015,2011,2009,2007,2001,2001,1999,1999,1999,1998,1998,1996,1995,1989,1981,1979,1977,1972,1972,1971,1971,1971,1970,1964,1964,1962,1960,1959,1955,1952,1944,1938,1936,1933,1930,1928,1927,1921,1894,1893,1889,1887,1887,1883,1876,1870,1870,1869,1868,1868,1848,1848,1844,1843,1842,1840,1829,1823,1823,1822,1822,1822,1820,1820,1817,1817,1815,1815,1814,1810,1809,1806,1804,1803,1747,1744,1731,1731,1730,1723,1722,1718,1717,1716,1716,1713,1712,1711,1711,1710,1710,1707,1706,1705,1703,1702,1699,1698,1673,1671,1655,1650,1649,1646,1641,1641,1635,1633,1628,1627,1626,1620,1616,1615,1607,1606,1605,1604,1589,1589,1589,1589,1586,1582,1576,1575,1571,1570,1567,1565,1558,1554,1554,1553,1550,1549,1529,1528,1525,1524,1519,1517,1508,1503,1503,1500,1498,1496,1496,1495,1491,1491,1489,1489,1484,1483,1483,1483,1477,1471,1464,1462,1462,1460,1457,1455,1455,1454,1454,1453,1452,1451,1451,1451,1448,1448,1446,1444,1443,1443,1441,1431,1428,1426,1425,1422,1421,1417,1414,1410,1409,1404,1399,1394,1390,1390,1388,1388,1385,1385,1378,1377,1377,1377,1376,1376,1374,1367,1367,1366,1358,1358,1357,1355,1355,1353,1352,1345,1344,1335,1335,1333,1331,1326,1325,1322,1321,1315,1311,1310,1309,1309,1307,1305,1301,1299,1296,1296,1295,1293,1293,1287,1285,1284,1283,1282,1282,1281,1280,1280,1277,1276,1275,1273,1257,1256,1253,1248,1243,1243,1237,1236,1235,1235,1234,1232,1232,1228,1228,1227,1225,1221,1215,1215,1209,1206,1198,1198,1196,1196,1195,1194,1189,1188,1181,1177,1177,1176,1167,1165,1163,1159,1157,1157,1156,1156,1155,1155,1154,1154,1135,1132,1132,1132,1131,1131,1130,1130,1129,1127,1125,1125,1124,1123,1122,1121,1118,1116,1114,1111,1109,1107,1107,1105,1102,1099,1090,1089,1087,1087,1087,1087,1085,1084,1076,1075,1072,1070,1070,1069,1069,1068,1068,1067,1062,1060,1057,1054,1052,1047,1040,1037,1035,1033,1027,1024,1020,1018,1016,1015,1014,1013,1003,1001,1001,1000,1000,999,992,988,988,987,973,968,968,965,960,960,958,956,955,954,953,953,944,943,942,941,939,939,934,931,917,916,913,909,904,903,897,896,894,894,894,891,889,884,880,877,876,874,873,872,869,869,866,866,864,862,851,850,850,850,850,849,848,839,838,837,836,835,831,831,831,830,829,827,825,823,820,812,809,808,808,807,806,806,805,805,798,798,798,796,796,791,789,787,780,769,767,765,765,763,762,762,753,751,748,747,746,744,743,742,740,738,734,733,732,731,730,730,725,723,723,723,719,719,704,703,701,701,700,696,696,694,694,693,690,690,689,689,679,664,664,663,663,662,661,655,654,653,653,653,652,650,629,629,625,625,612,611,605,602,595,595,595,593,592,592,591,590,590,590,587,586,585,585,583,583,582,582,578,577,550,549,543,540,540,540,539,537,531,524,519,518,510,509,497,496,496,496,492,492,492,490,481,481,480,480,478,478,468,460,459,453,435,435,435,435,433,433,432,429,429,428,427,427,423,422,421,421,406,406,405,405,391,391,389,389,385,384,375,375,354,353,349,345,327,325,321,321,318,318,295,295,288,288,286,285,284,283,282,282,281,280,276,275,265,264,259,258,222,222,218,218,208,208,194,193,171,171,129,128,126,121,113,112,110,109,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[58,58,55,55,55,55,55,55,55,55,54,54,54,54,54,54,53,53,51,51,51,51,51,51,51,51,51,51,51,51,51,51,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,49,49,49,49,49,49,49,49,49,49,49,48,48,48,48,48,48,48,48,48,48,47,47,47,47,47,47,46,46,46,46,46,46,45,45,45,45,45,45,45,45,45,44,44,44,44,44,44,44,44,44,44,44,44,44,43,43,43,43,43,43,43,43,43,43,43,43,42,42,42,41,41,41,41,41,41,41,41,41,41,41,41,41,41,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,38,38,38,38,38,38,38,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,35,35,35,35,35,35,35,35,34,34,34,34,34,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,32,32,32,32,32,32,32,32,32,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,28,28,28,28,28,28,28,28,28,28,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"container":"<table class=\"compact\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Start<\/th>\n      <th>End<\/th>\n      <th>Duration (mins)<\/th>\n      <th>Duration (hrs)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Blrtip","scroller":true,"scrollY":300,"buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>So an incredible 58 hours of driving to get from Miami to Portland.</p>
</section>
<section id="duration-by-division" class="level4">
<h4 class="anchored" data-anchor-id="duration-by-division">Duration: by division</h4>
<p>We can also narrow this down to get only the team-pairs that play in the same division as each other.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>nba_dur_div <span class="ot">&lt;-</span> nba_dur_all <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(nba_table, Code, Division), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Start"</span> <span class="ot">=</span> <span class="st">"Code"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(nba_table, Code, Division), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"End"</span> <span class="ot">=</span> <span class="st">"Code"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Division.x <span class="sc">==</span> Division.y, <span class="st">`</span><span class="at">Duration (mins)</span><span class="st">`</span> <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Division =</span> Division.x, <span class="fu">everything</span>(), <span class="sc">-</span>Division.y) <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Division, <span class="fu">desc</span>(<span class="st">`</span><span class="at">Duration (mins)</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, here’s an interactive table that you can use to explore the data. Note that it’s ordered by Division and then duration in minutes. I’ve hidden the code because it’s the same as for the table above.</p>
<details>
<summary>
Click for the {DT} code
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>nba_dur_div <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">filter =</span> <span class="st">"top"</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">extensions =</span> <span class="fu">c</span>(<span class="st">"Buttons"</span>,<span class="st">"Scroller"</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">rownames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">class =</span> <span class="st">"compact"</span>, <span class="at">width =</span> <span class="st">"100%"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom =</span> <span class="st">"Blrtip"</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">scroller =</span> <span class="cn">TRUE</span>, <span class="at">scrollY =</span> <span class="dv">300</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">buttons =</span> <span class="fu">list</span>(<span class="st">"csv"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-91df8d9e916bd7e5a7a4" style="width:100%;height:auto;" class="datatables html-widget "></div>
<script type="application/json" data-for="htmlwidget-91df8d9e916bd7e5a7a4">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"18\" data-max=\"1960\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"33\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","Scroller"],"data":[["Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Atlantic","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Central","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Northwest","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Pacific","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southeast","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest","Southwest"],["BKN","TOR","BOS","TOR","TOR","PHI","TOR","NYK","PHI","BKN","BKN","BOS","NYK","BKN","BOS","PHI","PHI","NYK","BOS","NYK","CLE","MIL","DET","MIL","CHI","CLE","CLE","IND","IND","DET","IND","MIL","CHI","DET","CHI","IND","CLE","DET","CHI","MIL","OKC","POR","POR","MIN","MIN","UTA","DEN","POR","OKC","UTA","DEN","MIN","OKC","MIN","POR","UTA","OKC","DEN","DEN","UTA","PHX","SAC","PHX","GSW","LAC","LAL","SAC","SAC","LAC","LAL","GSW","GSW","PHX","PHX","LAC","LAL","SAC","GSW","MIA","WAS","ORL","WAS","MIA","CHA","WAS","ATL","MIA","ATL","ORL","CHA","ATL","ORL","CHA","WAS","CHA","ATL","MIA","ORL","MEM","SAS","HOU","MEM","NOP","SAS","DAL","NOP","MEM","DAL","NOP","MEM","HOU","NOP","DAL","SAS","DAL","HOU","HOU","SAS"],["TOR","BKN","TOR","BOS","NYK","TOR","PHI","TOR","BKN","PHI","BOS","BKN","BKN","NYK","PHI","BOS","NYK","PHI","NYK","BOS","MIL","CLE","MIL","DET","CLE","CHI","IND","CLE","DET","IND","MIL","IND","DET","CHI","IND","CHI","DET","CLE","MIL","CHI","POR","OKC","MIN","POR","UTA","MIN","POR","DEN","UTA","OKC","MIN","DEN","MIN","OKC","UTA","POR","DEN","OKC","UTA","DEN","SAC","PHX","GSW","PHX","SAC","SAC","LAC","LAL","GSW","GSW","LAC","LAL","LAC","LAL","PHX","PHX","GSW","SAC","WAS","MIA","WAS","ORL","CHA","MIA","ATL","WAS","ATL","MIA","CHA","ORL","ORL","ATL","WAS","CHA","ATL","CHA","ORL","MIA","SAS","MEM","MEM","HOU","SAS","NOP","NOP","DAL","DAL","MEM","MEM","NOP","NOP","HOU","SAS","DAL","HOU","DAL","SAS","HOU"],[652,650,595,593,585,583,583,582,385,384,282,282,276,275,129,128,126,121,18,18,492,492,422,421,389,389,354,353,327,325,321,321,318,318,218,218,194,193,110,109,1960,1959,1823,1822,1309,1307,1285,1284,1215,1215,960,960,838,836,796,796,696,694,540,540,831,831,825,823,435,435,435,435,429,429,427,427,406,406,405,405,113,112,1165,1163,944,941,806,805,734,733,725,723,585,582,481,478,460,459,285,284,265,264,769,767,625,625,590,590,550,549,481,480,433,432,391,391,295,295,259,258,208,208],[11,11,10,10,10,10,10,10,6,6,5,5,5,5,2,2,2,2,0,0,8,8,7,7,6,6,6,6,5,5,5,5,5,5,4,4,3,3,2,2,33,33,30,30,22,22,21,21,20,20,16,16,14,14,13,13,12,12,9,9,14,14,14,14,7,7,7,7,7,7,7,7,7,7,7,7,2,2,19,19,16,16,13,13,12,12,12,12,10,10,8,8,8,8,5,5,4,4,13,13,10,10,10,10,9,9,8,8,7,7,7,7,5,5,4,4,3,3]],"container":"<table class=\"compact\">\n  <thead>\n    <tr>\n      <th>Division<\/th>\n      <th>Start<\/th>\n      <th>End<\/th>\n      <th>Duration (mins)<\/th>\n      <th>Duration (hrs)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Blrtip","scroller":true,"scrollY":300,"buttons":["csv"],"columnDefs":[{"className":"dt-right","targets":[3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This time we can see that there’s a maximum of 33 hours of driving required between two teams in the same division: Portland to Oklahoma City.</p>
</section>
<section id="a-quick-diversion-routing" class="level4">
<h4 class="anchored" data-anchor-id="a-quick-diversion-routing">A quick diversion: routing</h4>
<p>We know from using <code>osrm::osrmTable()</code> that Miami to Portland has the longest travel duration. What’s the route?</p>
<p>Fortunately, {osrm} has the function <code>osrmRoute()</code> for fetching the routes between a pair of points.</p>
<p>We can grab a vector of coordinates for each team from our <code>nba_table</code> object and set these as our origin (<code>src</code>) and destination (<code>dst</code>) in <code>osrm::osrmRoute()</code>. The return object is a ‘linestring’ object that contains detail on the coordinates and coordinate system for the route.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to extract latlong vectors for teams</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>get_ll <span class="ot">&lt;-</span> <span class="cf">function</span>(data, team_code) {</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(data, Code <span class="sc">==</span> team_code)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  lng <span class="ot">&lt;-</span> <span class="fu">pull</span>(team_data, Longitude)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  lat <span class="ot">&lt;-</span> <span class="fu">pull</span>(team_data, Latitude)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  lnglat <span class="ot">&lt;-</span> <span class="fu">c</span>(lng, lat)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(lnglat)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get route between latlong pairs</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>route <span class="ot">&lt;-</span> <span class="fu">osrmRoute</span>(</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">src =</span> <span class="fu">get_ll</span>(nba_table, <span class="st">"MIA"</span>),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">dst =</span> <span class="fu">get_ll</span>(nba_table, <span class="st">"POR"</span>),</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">returnclass =</span> <span class="st">"sf"</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: "returnclass" is deprecated.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>route</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1 feature and 4 fields
Geometry type: LINESTRING
Dimension:     XY
Bounding box:  xmin: -122.6658 ymin: 25.78202 xmax: -80.15664 ymax: 45.8407
Geodetic CRS:  WGS 84
        src dst duration distance                       geometry
src_dst src dst 3461.665 5247.537 LINESTRING (-80.18809 25.78...</code></pre>
</div>
</div>
<p>Now we can set up the same type of {leaflet} map as earlier, but we’ll include only Portland and OKC. I’ve hidden the map definition because it’s almost the same as before.</p>
<details>
<summary>
Click for the {leaflet} map definition
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>mia_por <span class="ot">&lt;-</span> nba_table <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Code <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"MIA"</span>, <span class="st">"POR"</span>))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>mia_por_map <span class="ot">&lt;-</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">leaflet</span>(mia_por) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>Stamen.TonerLite) <span class="sc">%&gt;%</span>  <span class="co"># add basemap</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(  <span class="co"># add markers</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> <span class="sc">~</span>Longitude, <span class="at">lat =</span> <span class="sc">~</span>Latitude,  <span class="co"># coordinates</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste0</span>(  <span class="co"># HTML content for popup info</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;b&gt;"</span>, mia_por<span class="sc">$</span>Team, <span class="st">"&lt;/b&gt;"</span>,  <span class="co"># team name</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"&lt;br&gt;"</span>, <span class="fu">paste0</span>(mia_por<span class="sc">$</span>Arena, <span class="st">", "</span>, mia_por<span class="sc">$</span>City),  <span class="co"># location</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(  <span class="co"># division/conference information</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        mia_por<span class="sc">$</span>Conference <span class="sc">==</span> <span class="st">"Eastern"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"&lt;br&gt;&lt;font color='#0000FF'&gt;"</span>, mia_por<span class="sc">$</span>Division,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>               <span class="st">" Division (Eastern Conference)&lt;/font&gt;"</span>),</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">"&lt;br&gt;&lt;font color='#FF0000'&gt;"</span>, mia_por<span class="sc">$</span>Division,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>               <span class="st">" Division (Western Conference)&lt;/font&gt;"</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> <span class="fu">awesomeIcons</span>(</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">library =</span> <span class="st">"ion"</span>, <span class="at">icon =</span> <span class="st">"ion-ios-basketball"</span>, <span class="co"># add basketball icon</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">markerColor =</span> mia_por<span class="sc">$</span>colour_marker,  <span class="co"># colour the marker</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">iconColor =</span> mia_por<span class="sc">$</span>colour_icon  <span class="co"># colour the basketball icon</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMeasure</span>()  <span class="co"># add straight-line distance-measuring tool</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p>And to that map we can add the line that defines the route</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>mia_por_map <span class="sc">%&gt;%</span> <span class="fu">addPolylines</span>(<span class="at">data =</span> <span class="fu">st_geometry</span>(route))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-41adbf36ced4ad636666" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-41adbf36ced4ad636666">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TonerLite",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[25.781389,45.531667],[-80.188056,-122.666667],{"icon":"ion-ios-basketball","markerColor":["red","red"],"iconColor":["#F9A01B","#000000"],"spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"ion"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<b>Miami Heat<\/b><br>Kaseya Center, Miami<br><font color='#0000FF'>Southeast Division (Eastern Conference)<\/font>","<b>Portland Trail Blazers<\/b><br>Moda Center, Portland<br><font color='#FF0000'>Northwest Division (Western Conference)<\/font>"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMeasure","args":[{"position":"topright","primaryLengthUnit":"feet","primaryAreaUnit":"acres","activeColor":"#ABE67E","completedColor":"#C8F2BE","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]},{"method":"addPolylines","args":[[[[{"lng":[-80.18808746337891,-80.15663909912109,-80.4324569702148,-80.80063629150391,-81.45591735839839,-82.0862197875977,-82.70676422119141,-83.2942276000977,-83.7466201782227,-83.73301696777339,-84.91607666015619,-85.018684387207,-85.7219543457031,-86.81402587890619,-87.8519592285156,-88.64715576171881,-88.995361328125,-88.996940612793,-90.58399963378911,-94.4669570922852,-94.511344909668,-94.78892517089839,-94.80645751953119,-95.46441650390619,-95.7815780639648,-96.5659255981445,-96.755729675293,-98.4049377441406,-99.2175674438477,-100.950370788574,-102.15926361084,-103.612640380859,-105.201187133789,-106.512168884277,-107.197120666504,-109.914726257324,-111.064323425293,-111.440788269043,-111.992317199707,-112.13402557373,-112.822578430176,-113.513374328613,-114.297294616699,-114.954216003418,-115.483406066895,-116.189826965332,-116.591430664062,-117.375755310059,-117.806434631348,-118.041328430176,-118.471183776855,-119.668670654297,-121.16032409668,-121.542098999023,-122.66577911377],"lat":[25.782018661499,26.9413795471191,27.459810256958,27.5723190307617,28.4875202178955,28.8530788421631,30.2156295776367,30.7748489379883,31.9296894073486,32.8327102661133,34.383129119873,34.8560409545898,35.0590209960938,36.3047103881836,36.957649230957,37.0467491149902,37.6045379638672,38.3560905456543,38.7980880737305,39.0485877990723,39.3082885742188,39.384578704834,39.8549575805664,40.2706680297852,40.6891899108887,40.7097282409668,40.8204383850098,40.823558807373,40.672420501709,41.1350593566895,41.0275688171387,41.2215805053711,41.0953903198242,41.753719329834,41.7895202636719,41.5437507629395,41.248607635498,40.9712371826172,41.1588706970215,41.6759071350098,41.9904899597168,42.5682106018066,42.5775489807129,42.9372901916504,42.9592895507812,43.5631675720215,43.6062393188477,44.5181007385254,44.7493705749512,45.3012275695801,45.591667175293,45.8406982421875,45.599739074707,45.7127685546875,45.5316696166992]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":false,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[25.781389,45.8406982421875],"lng":[-122.666667,-80.15663909912109]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>That’s a long way.</p>
</section>
</section>
<section id="viz" class="level3">
<h3 class="anchored" data-anchor-id="viz">4. Make a heatmap</h3>
<p>A quick way to visualise the data is to create a heatmap, where we take a matrix of teams in each division and colour by duration. Here, lighter colours indicate greater travel duration.</p>
<p>The plot is interactive; you can hover over squares in each facet to see specific information about that pair, including the exact duration value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> nba_dur_div <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Start, End)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="st">`</span><span class="at">Duration (hrs)</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Division, <span class="at">scales =</span> <span class="st">"free"</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6536231debb8b7217f1f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6536231debb8b7217f1f">{"x":{"data":[{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.45454545454545453,0.45454545454545453,0.54545454545454541,1],[0.45454545454545453,null,0,0.18181818181818182,0.90909090909090906],[0.45454545454545453,0,null,0.18181818181818182,0.90909090909090906],[0.54545454545454541,0.18181818181818182,0.18181818181818182,null,0.90909090909090906],[1,0.90909090909090906,0.90909090909090906,0.90909090909090906,null]],"text":[[null,"Start: BOS<br />End: BKN<br />Duration (hrs):  5","Start: NYK<br />End: BKN<br />Duration (hrs):  5","Start: PHI<br />End: BKN<br />Duration (hrs):  6","Start: TOR<br />End: BKN<br />Duration (hrs): 11"],["Start: BKN<br />End: BOS<br />Duration (hrs):  5",null,"Start: NYK<br />End: BOS<br />Duration (hrs):  0","Start: PHI<br />End: BOS<br />Duration (hrs):  2","Start: TOR<br />End: BOS<br />Duration (hrs): 10"],["Start: BKN<br />End: NYK<br />Duration (hrs):  5","Start: BOS<br />End: NYK<br />Duration (hrs):  0",null,"Start: PHI<br />End: NYK<br />Duration (hrs):  2","Start: TOR<br />End: NYK<br />Duration (hrs): 10"],["Start: BKN<br />End: PHI<br />Duration (hrs):  6","Start: BOS<br />End: PHI<br />Duration (hrs):  2","Start: NYK<br />End: PHI<br />Duration (hrs):  2",null,"Start: TOR<br />End: PHI<br />Duration (hrs): 10"],["Start: BKN<br />End: TOR<br />Duration (hrs): 11","Start: BOS<br />End: TOR<br />Duration (hrs): 10","Start: NYK<br />End: TOR<br />Duration (hrs): 10","Start: PHI<br />End: TOR<br />Duration (hrs): 10",null]],"colorscale":[[0,"#132B43"],[0.18181818181818182,"#17324D"],[0.45454545454545453,"#1C3D5B"],[0.54545454545454541,"#1E4160"],[0.90909090909090906,"#265075"],[1,"#28547A"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.66666666666666663,0.5,0.33333333333333331,0],[0.66666666666666663,null,0.16666666666666666,0.66666666666666663,1],[0.5,0.16666666666666666,null,0.5,0.83333333333333337],[0.33333333333333331,0.66666666666666663,0.5,null,0.5],[0,1,0.83333333333333337,0.5,null]],"text":[[null,"Start: CLE<br />End: CHI<br />Duration (hrs):  6","Start: DET<br />End: CHI<br />Duration (hrs):  5","Start: IND<br />End: CHI<br />Duration (hrs):  4","Start: MIL<br />End: CHI<br />Duration (hrs):  2"],["Start: CHI<br />End: CLE<br />Duration (hrs):  6",null,"Start: DET<br />End: CLE<br />Duration (hrs):  3","Start: IND<br />End: CLE<br />Duration (hrs):  6","Start: MIL<br />End: CLE<br />Duration (hrs):  8"],["Start: CHI<br />End: DET<br />Duration (hrs):  5","Start: CLE<br />End: DET<br />Duration (hrs):  3",null,"Start: IND<br />End: DET<br />Duration (hrs):  5","Start: MIL<br />End: DET<br />Duration (hrs):  7"],["Start: CHI<br />End: IND<br />Duration (hrs):  4","Start: CLE<br />End: IND<br />Duration (hrs):  6","Start: DET<br />End: IND<br />Duration (hrs):  5",null,"Start: MIL<br />End: IND<br />Duration (hrs):  5"],["Start: CHI<br />End: MIL<br />Duration (hrs):  2","Start: CLE<br />End: MIL<br />Duration (hrs):  8","Start: DET<br />End: MIL<br />Duration (hrs):  7","Start: IND<br />End: MIL<br />Duration (hrs):  5",null]],"colorscale":[[0,"#17324D"],[0.16666666666666666,"#183652"],[0.33333333333333331,"#1A3956"],[0.5,"#1C3D5B"],[0.66666666666666663,"#1E4160"],[0.83333333333333337,"#204566"],[1,"#22486B"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.29166666666666669,0.125,0.5,0],[0.29166666666666669,null,0.20833333333333334,0.875,0.54166666666666663],[0.125,0.20833333333333334,null,1,0.45833333333333331],[0.5,0.875,1,null,0.16666666666666666],[0,0.54166666666666663,0.45833333333333331,0.16666666666666666,null]],"text":[[null,"Start: MIN<br />End: DEN<br />Duration (hrs): 16","Start: OKC<br />End: DEN<br />Duration (hrs): 12","Start: POR<br />End: DEN<br />Duration (hrs): 21","Start: UTA<br />End: DEN<br />Duration (hrs):  9"],["Start: DEN<br />End: MIN<br />Duration (hrs): 16",null,"Start: OKC<br />End: MIN<br />Duration (hrs): 14","Start: POR<br />End: MIN<br />Duration (hrs): 30","Start: UTA<br />End: MIN<br />Duration (hrs): 22"],["Start: DEN<br />End: OKC<br />Duration (hrs): 12","Start: MIN<br />End: OKC<br />Duration (hrs): 14",null,"Start: POR<br />End: OKC<br />Duration (hrs): 33","Start: UTA<br />End: OKC<br />Duration (hrs): 20"],["Start: DEN<br />End: POR<br />Duration (hrs): 21","Start: MIN<br />End: POR<br />Duration (hrs): 30","Start: OKC<br />End: POR<br />Duration (hrs): 33",null,"Start: UTA<br />End: POR<br />Duration (hrs): 13"],["Start: DEN<br />End: UTA<br />Duration (hrs):  9","Start: MIN<br />End: UTA<br />Duration (hrs): 22","Start: OKC<br />End: UTA<br />Duration (hrs): 20","Start: POR<br />End: UTA<br />Duration (hrs): 13",null]],"colorscale":[[0,"#244C70"],[0.125,"#2A5880"],[0.16666666666666666,"#2C5C85"],[0.20833333333333334,"#2E608A"],[0.29166666666666669,"#326895"],[0.45833333333333331,"#3A79AB"],[0.5,"#3C7DB1"],[0.54166666666666663,"#3E81B7"],[0.875,"#4FA4E5"],[1,"#56B1F7"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x3","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.41666666666666669,0.41666666666666669,1,0],[0.41666666666666669,null,null,0.41666666666666669,0.41666666666666669],[0.41666666666666669,null,null,0.41666666666666669,0.41666666666666669],[1,0.41666666666666669,0.41666666666666669,null,1],[0,0.41666666666666669,0.41666666666666669,1,null]],"text":[[null,"Start: LAC<br />End: GSW<br />Duration (hrs):  7","Start: LAL<br />End: GSW<br />Duration (hrs):  7","Start: PHX<br />End: GSW<br />Duration (hrs): 14","Start: SAC<br />End: GSW<br />Duration (hrs):  2"],["Start: GSW<br />End: LAC<br />Duration (hrs):  7",null,null,"Start: PHX<br />End: LAC<br />Duration (hrs):  7","Start: SAC<br />End: LAC<br />Duration (hrs):  7"],["Start: GSW<br />End: LAL<br />Duration (hrs):  7",null,null,"Start: PHX<br />End: LAL<br />Duration (hrs):  7","Start: SAC<br />End: LAL<br />Duration (hrs):  7"],["Start: GSW<br />End: PHX<br />Duration (hrs): 14","Start: LAC<br />End: PHX<br />Duration (hrs):  7","Start: LAL<br />End: PHX<br />Duration (hrs):  7",null,"Start: SAC<br />End: PHX<br />Duration (hrs): 14"],["Start: GSW<br />End: SAC<br />Duration (hrs):  2","Start: LAC<br />End: SAC<br />Duration (hrs):  7","Start: LAL<br />End: SAC<br />Duration (hrs):  7","Start: PHX<br />End: SAC<br />Duration (hrs): 14",null]],"colorscale":[[0,"#17324D"],[0.41666666666666669,"#204566"],[1,"#2E608A"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x4","yaxis":"y4","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.066666666666666666,0.53333333333333333,0.26666666666666666,0.53333333333333333],[0.066666666666666666,null,0.59999999999999998,0.40000000000000002,0.26666666666666666],[0.53333333333333333,0.59999999999999998,null,0,1],[0.26666666666666666,0.40000000000000002,0,null,0.80000000000000004],[0.53333333333333333,0.26666666666666666,1,0.80000000000000004,null]],"text":[[null,"Start: CHA<br />End: ATL<br />Duration (hrs):  5","Start: MIA<br />End: ATL<br />Duration (hrs): 12","Start: ORL<br />End: ATL<br />Duration (hrs):  8","Start: WAS<br />End: ATL<br />Duration (hrs): 12"],["Start: ATL<br />End: CHA<br />Duration (hrs):  5",null,"Start: MIA<br />End: CHA<br />Duration (hrs): 13","Start: ORL<br />End: CHA<br />Duration (hrs): 10","Start: WAS<br />End: CHA<br />Duration (hrs):  8"],["Start: ATL<br />End: MIA<br />Duration (hrs): 12","Start: CHA<br />End: MIA<br />Duration (hrs): 13",null,"Start: ORL<br />End: MIA<br />Duration (hrs):  4","Start: WAS<br />End: MIA<br />Duration (hrs): 19"],["Start: ATL<br />End: ORL<br />Duration (hrs):  8","Start: CHA<br />End: ORL<br />Duration (hrs): 10","Start: MIA<br />End: ORL<br />Duration (hrs):  4",null,"Start: WAS<br />End: ORL<br />Duration (hrs): 16"],["Start: ATL<br />End: WAS<br />Duration (hrs): 12","Start: CHA<br />End: WAS<br />Duration (hrs):  8","Start: MIA<br />End: WAS<br />Duration (hrs): 19","Start: ORL<br />End: WAS<br />Duration (hrs): 16",null]],"colorscale":[[0,"#1A3956"],[0.066666666666666666,"#1C3D5B"],[0.26666666666666666,"#22486B"],[0.40000000000000002,"#265075"],[0.53333333333333333,"#2A5880"],[0.59999999999999998,"#2C5C85"],[0.80000000000000004,"#326895"],[1,"#3874A6"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x5","yaxis":"y5","hoverinfo":"text","frame":null},{"x":[1,2,3,4,5],"y":[1,2,3,4,5],"z":[[null,0.10000000000000001,0.5,0.59999999999999998,0.20000000000000001],[0.10000000000000001,null,0.69999999999999996,0.40000000000000002,0],[0.5,0.69999999999999996,null,0.40000000000000002,1],[0.59999999999999998,0.40000000000000002,0.40000000000000002,null,0.69999999999999996],[0.20000000000000001,0,1,0.69999999999999996,null]],"text":[[null,"Start: HOU<br />End: DAL<br />Duration (hrs):  4","Start: MEM<br />End: DAL<br />Duration (hrs):  8","Start: NOP<br />End: DAL<br />Duration (hrs):  9","Start: SAS<br />End: DAL<br />Duration (hrs):  5"],["Start: DAL<br />End: HOU<br />Duration (hrs):  4",null,"Start: MEM<br />End: HOU<br />Duration (hrs): 10","Start: NOP<br />End: HOU<br />Duration (hrs):  7","Start: SAS<br />End: HOU<br />Duration (hrs):  3"],["Start: DAL<br />End: MEM<br />Duration (hrs):  8","Start: HOU<br />End: MEM<br />Duration (hrs): 10",null,"Start: NOP<br />End: MEM<br />Duration (hrs):  7","Start: SAS<br />End: MEM<br />Duration (hrs): 13"],["Start: DAL<br />End: NOP<br />Duration (hrs):  9","Start: HOU<br />End: NOP<br />Duration (hrs):  7","Start: MEM<br />End: NOP<br />Duration (hrs):  7",null,"Start: SAS<br />End: NOP<br />Duration (hrs): 10"],["Start: DAL<br />End: SAS<br />Duration (hrs):  5","Start: HOU<br />End: SAS<br />Duration (hrs):  3","Start: MEM<br />End: SAS<br />Duration (hrs): 13","Start: NOP<br />End: SAS<br />Duration (hrs): 10",null]],"colorscale":[[0,"#183652"],[0.10000000000000001,"#1A3956"],[0.20000000000000001,"#1C3D5B"],[0.40000000000000002,"#204566"],[0.5,"#22486B"],[0.59999999999999998,"#244C70"],[0.69999999999999996,"#265075"],[1,"#2C5C85"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x6","yaxis":"y6","hoverinfo":"text","frame":null},{"x":[1],"y":[1],"name":"99_adb1c5c03bd1ca4900db386d49b22562","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#132B43"],[0.0033444816053511705,"#132B44"],[0.006688963210702341,"#132C44"],[0.010033444816053512,"#142C45"],[0.013377926421404682,"#142D45"],[0.016722408026755852,"#142D46"],[0.020066889632107024,"#142D46"],[0.023411371237458192,"#142E47"],[0.026755852842809364,"#152E47"],[0.030100334448160536,"#152F48"],[0.033444816053511704,"#152F48"],[0.036789297658862873,"#152F49"],[0.040133779264214048,"#153049"],[0.043478260869565216,"#16304A"],[0.046822742474916385,"#16304A"],[0.05016722408026756,"#16314B"],[0.053511705685618728,"#16314B"],[0.056856187290969896,"#16324C"],[0.060200668896321072,"#17324D"],[0.063545150501672226,"#17324D"],[0.066889632107023408,"#17334E"],[0.070234113712374577,"#17334E"],[0.073578595317725745,"#17344F"],[0.076923076923076913,"#18344F"],[0.080267558528428096,"#183450"],[0.08361204013377925,"#183550"],[0.086956521739130432,"#183551"],[0.090301003344481601,"#183651"],[0.093645484949832769,"#193652"],[0.096989966555183937,"#193652"],[0.10033444816053512,"#193753"],[0.10367892976588627,"#193754"],[0.10702341137123746,"#193854"],[0.11036789297658862,"#1A3855"],[0.11371237458193979,"#1A3955"],[0.11705685618729096,"#1A3956"],[0.12040133779264214,"#1A3956"],[0.12374581939799331,"#1A3A57"],[0.12709030100334445,"#1B3A57"],[0.13043478260869565,"#1B3B58"],[0.13377926421404682,"#1B3B59"],[0.13712374581939799,"#1B3B59"],[0.14046822742474915,"#1C3C5A"],[0.14381270903010035,"#1C3C5A"],[0.14715719063545149,"#1C3D5B"],[0.15050167224080266,"#1C3D5B"],[0.15384615384615383,"#1C3D5C"],[0.15719063545150502,"#1D3E5C"],[0.16053511705685619,"#1D3E5D"],[0.16387959866220736,"#1D3F5D"],[0.1672240802675585,"#1D3F5E"],[0.1705685618729097,"#1D3F5F"],[0.17391304347826086,"#1E405F"],[0.17725752508361203,"#1E4060"],[0.1806020066889632,"#1E4160"],[0.1839464882943144,"#1E4161"],[0.18729096989966554,"#1E4261"],[0.19063545150501671,"#1F4262"],[0.19397993311036787,"#1F4263"],[0.19732441471571907,"#1F4363"],[0.20066889632107024,"#1F4364"],[0.20401337792642141,"#1F4464"],[0.20735785953177255,"#204465"],[0.21070234113712374,"#204465"],[0.21404682274247491,"#204566"],[0.21739130434782608,"#204566"],[0.22073578595317725,"#214667"],[0.22408026755852842,"#214668"],[0.22742474916387959,"#214768"],[0.23076923076923075,"#214769"],[0.23411371237458192,"#214769"],[0.23745819397993312,"#22486A"],[0.24080267558528429,"#22486A"],[0.24414715719063546,"#22496B"],[0.24749163879598662,"#22496C"],[0.25083612040133779,"#224A6C"],[0.2541806020066889,"#234A6D"],[0.25752508361204013,"#234A6D"],[0.2608695652173913,"#234B6E"],[0.26421404682274247,"#234B6E"],[0.26755852842809363,"#244C6F"],[0.2709030100334448,"#244C70"],[0.27424749163879597,"#244C70"],[0.27759197324414714,"#244D71"],[0.28093645484949831,"#244D71"],[0.28428093645484953,"#254E72"],[0.2876254180602007,"#254E72"],[0.29096989966555187,"#254F73"],[0.29431438127090298,"#254F74"],[0.29765886287625415,"#254F74"],[0.30100334448160532,"#265075"],[0.30434782608695649,"#265075"],[0.30769230769230765,"#265176"],[0.31103678929765888,"#265176"],[0.31438127090301005,"#275277"],[0.31772575250836121,"#275278"],[0.32107023411371238,"#275278"],[0.32441471571906355,"#275379"],[0.32775919732441472,"#275379"],[0.33110367892976583,"#28547A"],[0.334448160535117,"#28547B"],[0.33779264214046822,"#28557B"],[0.34113712374581939,"#28557C"],[0.34448160535117056,"#28567C"],[0.34782608695652173,"#29567D"],[0.3511705685618729,"#29567D"],[0.35451505016722407,"#29577E"],[0.35785953177257523,"#29577F"],[0.3612040133779264,"#2A587F"],[0.36454849498327757,"#2A5880"],[0.3678929765886288,"#2A5980"],[0.37123745819397991,"#2A5981"],[0.37458193979933108,"#2A5982"],[0.37792642140468224,"#2B5A82"],[0.38127090301003341,"#2B5A83"],[0.38461538461538458,"#2B5B83"],[0.38795986622073575,"#2B5B84"],[0.39130434782608692,"#2C5C85"],[0.39464882943143814,"#2C5C85"],[0.39799331103678931,"#2C5D86"],[0.40133779264214048,"#2C5D86"],[0.40468227424749165,"#2C5D87"],[0.40802675585284282,"#2D5E87"],[0.41137123745819393,"#2D5E88"],[0.4147157190635451,"#2D5F89"],[0.41806020066889626,"#2D5F89"],[0.42140468227424749,"#2E608A"],[0.42474916387959866,"#2E608A"],[0.42809364548494983,"#2E618B"],[0.43143812709030099,"#2E618C"],[0.43478260869565216,"#2E618C"],[0.43812709030100333,"#2F628D"],[0.4414715719063545,"#2F628D"],[0.44481605351170567,"#2F638E"],[0.44816053511705684,"#2F638F"],[0.451505016722408,"#30648F"],[0.45484949832775917,"#306490"],[0.45819397993311034,"#306590"],[0.46153846153846151,"#306591"],[0.46488294314381268,"#306592"],[0.46822742474916385,"#316692"],[0.47157190635451501,"#316693"],[0.47491638795986624,"#316793"],[0.47826086956521741,"#316794"],[0.48160535117056857,"#326895"],[0.48494983277591969,"#326895"],[0.48829431438127091,"#326996"],[0.49163879598662202,"#326996"],[0.49498327759197325,"#326997"],[0.49832775919732436,"#336A98"],[0.50167224080267558,"#336A98"],[0.50501672240802675,"#336B99"],[0.50836120401337781,"#336B99"],[0.51170568561872909,"#346C9A"],[0.51505016722408026,"#346C9B"],[0.51839464882943143,"#346D9B"],[0.52173913043478259,"#346D9C"],[0.52508361204013376,"#346E9D"],[0.52842809364548493,"#356E9D"],[0.5317725752508361,"#356E9E"],[0.53511705685618727,"#356F9E"],[0.53846153846153844,"#356F9F"],[0.5418060200668896,"#3670A0"],[0.54515050167224077,"#3670A0"],[0.54849498327759194,"#3671A1"],[0.55183946488294311,"#3671A1"],[0.55518394648829428,"#3772A2"],[0.55852842809364545,"#3772A3"],[0.56187290969899661,"#3773A3"],[0.56521739130434778,"#3773A4"],[0.56856187290969906,"#3773A4"],[0.57190635451505012,"#3874A5"],[0.5752508361204014,"#3874A6"],[0.57859531772575246,"#3875A6"],[0.58193979933110374,"#3875A7"],[0.58528428093645479,"#3976A8"],[0.58862876254180596,"#3976A8"],[0.59197324414715713,"#3977A9"],[0.5953177257525083,"#3977A9"],[0.59866220735785958,"#3978AA"],[0.60200668896321063,"#3A78AB"],[0.60535117056856191,"#3A79AB"],[0.60869565217391297,"#3A79AC"],[0.61204013377926425,"#3A79AC"],[0.61538461538461531,"#3B7AAD"],[0.61872909698996659,"#3B7AAE"],[0.62207357859531776,"#3B7BAE"],[0.62541806020066881,"#3B7BAF"],[0.62876254180602009,"#3C7CB0"],[0.63210702341137115,"#3C7CB0"],[0.63545150501672243,"#3C7DB1"],[0.63879598662207349,"#3C7DB1"],[0.64214046822742477,"#3C7EB2"],[0.64548494983277582,"#3D7EB3"],[0.6488294314381271,"#3D7FB3"],[0.65217391304347827,"#3D7FB4"],[0.65551839464882944,"#3D7FB5"],[0.65886287625418061,"#3E80B5"],[0.66220735785953166,"#3E80B6"],[0.66555183946488294,"#3E81B6"],[0.668896321070234,"#3E81B7"],[0.67224080267558528,"#3F82B8"],[0.67558528428093645,"#3F82B8"],[0.67892976588628762,"#3F83B9"],[0.68227424749163879,"#3F83BA"],[0.68561872909698995,"#4084BA"],[0.68896321070234112,"#4084BB"],[0.69230769230769229,"#4085BB"],[0.69565217391304346,"#4085BC"],[0.69899665551839463,"#4086BD"],[0.7023411371237458,"#4186BD"],[0.70568561872909696,"#4186BE"],[0.70903010033444813,"#4187BF"],[0.7123745819397993,"#4187BF"],[0.71571906354515047,"#4288C0"],[0.71906354515050164,"#4288C1"],[0.72240802675585281,"#4289C1"],[0.72575250836120397,"#4289C2"],[0.72909698996655514,"#438AC2"],[0.73244147157190631,"#438AC3"],[0.73578595317725759,"#438BC4"],[0.73913043478260865,"#438BC4"],[0.74247491638795982,"#438CC5"],[0.74581939799331098,"#448CC6"],[0.74916387959866215,"#448DC6"],[0.75250836120401332,"#448DC7"],[0.75585284280936449,"#448EC8"],[0.75919732441471577,"#458EC8"],[0.76254180602006683,"#458FC9"],[0.76588628762541811,"#458FC9"],[0.76923076923076916,"#458FCA"],[0.77257525083612044,"#4690CB"],[0.7759197324414715,"#4690CB"],[0.77926421404682267,"#4691CC"],[0.78260869565217384,"#4691CD"],[0.785953177257525,"#4792CD"],[0.78929765886287628,"#4792CE"],[0.79264214046822734,"#4793CF"],[0.79598662207357862,"#4793CF"],[0.79933110367892968,"#4894D0"],[0.80267558528428096,"#4894D0"],[0.80602006688963201,"#4895D1"],[0.80936454849498329,"#4895D2"],[0.81270903010033446,"#4896D2"],[0.81605351170568563,"#4996D3"],[0.8193979933110368,"#4997D4"],[0.82274247491638786,"#4997D4"],[0.82608695652173914,"#4998D5"],[0.82943143812709019,"#4A98D6"],[0.83277591973244147,"#4A99D6"],[0.83612040133779253,"#4A99D7"],[0.83946488294314381,"#4A9AD8"],[0.84280936454849498,"#4B9AD8"],[0.84615384615384615,"#4B9BD9"],[0.84949832775919731,"#4B9BDA"],[0.85284280936454848,"#4B9BDA"],[0.85618729096989965,"#4C9CDB"],[0.85953177257525071,"#4C9CDB"],[0.86287625418060199,"#4C9DDC"],[0.86622073578595316,"#4C9DDD"],[0.86956521739130432,"#4D9EDD"],[0.87290969899665549,"#4D9EDE"],[0.87625418060200666,"#4D9FDF"],[0.87959866220735783,"#4D9FDF"],[0.882943143812709,"#4DA0E0"],[0.88628762541806017,"#4EA0E1"],[0.88963210702341133,"#4EA1E1"],[0.8929765886287625,"#4EA1E2"],[0.89632107023411367,"#4EA2E3"],[0.89966555183946484,"#4FA2E3"],[0.90301003344481601,"#4FA3E4"],[0.90635451505016718,"#4FA3E5"],[0.90969899665551834,"#4FA4E5"],[0.91304347826086951,"#50A4E6"],[0.91638795986622068,"#50A5E7"],[0.91973244147157196,"#50A5E7"],[0.92307692307692302,"#50A6E8"],[0.9264214046822743,"#51A6E8"],[0.92976588628762535,"#51A7E9"],[0.93311036789297663,"#51A7EA"],[0.93645484949832769,"#51A8EA"],[0.93979933110367886,"#52A8EB"],[0.94314381270903003,"#52A9EC"],[0.9464882943143812,"#52A9EC"],[0.94983277591973247,"#52AAED"],[0.95317725752508353,"#53AAEE"],[0.95652173913043481,"#53ABEE"],[0.95986622073578587,"#53ABEF"],[0.96321070234113715,"#53ACF0"],[0.96655518394648821,"#54ACF0"],[0.96989966555183937,"#54ADF1"],[0.97324414715719065,"#54ADF2"],[0.97658862876254182,"#54AEF2"],[0.97993311036789288,"#55AEF3"],[0.98327759197324405,"#55AFF4"],[0.98662207357859533,"#55AFF4"],[0.98996655518394649,"#55B0F5"],[0.99331103678929755,"#56B0F6"],[0.99665551839464872,"#56B1F6"],[1,"#56B1F7"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"thickness":23.039999999999996,"title":"Duration (hrs)","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["0","10","20","30"],"tickvals":[0,0.30303030303030304,0.60606060606060608,0.90909090909090906],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":37.917808219178085,"r":7.3059360730593621,"b":25.57077625570777,"l":28.493150684931514},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,0.29538041866808989],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["BKN","BOS","NYK","PHI","TOR"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["BKN","BOS","NYK","PHI","TOR"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.56531064065310643,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["BKN","BOS","NYK","PHI","TOR"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["BKN","BOS","NYK","PHI","TOR"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866808989,"y0":0.56531064065310643,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866808989,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.37128624799857673,"x1":0.62871375200142321,"y0":0.56531064065310643,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.37128624799857673,"x1":0.62871375200142321,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.70461958133191005,"x1":1,"y0":0.56531064065310643,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.70461958133191005,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866808989,"y0":0,"y1":0.43468935934689357},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.29538041866808989,"y0":0,"y1":23.37899543378996,"yanchor":0.43468935934689357,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.37128624799857673,"x1":0.62871375200142321,"y0":0,"y1":0.43468935934689357},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.37128624799857673,"x1":0.62871375200142321,"y0":0,"y1":23.37899543378996,"yanchor":0.43468935934689357,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.70461958133191005,"x1":1,"y0":0,"y1":0.43468935934689357},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.70461958133191005,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":0.43468935934689357,"ysizemode":"pixel"}],"annotations":[{"text":"Atlantic","x":0.14769020933404495,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Central","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Northwest","x":0.85230979066595502,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Pacific","x":0.14769020933404495,"y":0.43468935934689357,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Southeast","x":0.5,"y":0.43468935934689357,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Southwest","x":0.85230979066595502,"y":0.43468935934689357,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["CHI","CLE","DET","IND","MIL"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["CHI","CLE","DET","IND","MIL"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.37128624799857673,0.62871375200142321],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["CHI","CLE","DET","IND","MIL"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["CHI","CLE","DET","IND","MIL"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.56531064065310643,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["DEN","MIN","OKC","POR","UTA"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DEN","MIN","OKC","POR","UTA"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.70461958133191005,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y3","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["DEN","MIN","OKC","POR","UTA"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DEN","MIN","OKC","POR","UTA"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.56531064065310643,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x3","title":"","hoverformat":".2f"},"xaxis4":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["GSW","LAC","LAL","PHX","SAC"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["GSW","LAC","LAL","PHX","SAC"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.29538041866808989],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y4","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["GSW","LAC","LAL","PHX","SAC"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["GSW","LAC","LAL","PHX","SAC"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.43468935934689357],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x4","title":"","hoverformat":".2f"},"xaxis5":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["ATL","CHA","MIA","ORL","WAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["ATL","CHA","MIA","ORL","WAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.37128624799857673,0.62871375200142321],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y5","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["ATL","CHA","MIA","ORL","WAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["ATL","CHA","MIA","ORL","WAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.43468935934689357],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x5","title":"","hoverformat":".2f"},"xaxis6":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["DAL","HOU","MEM","NOP","SAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DAL","HOU","MEM","NOP","SAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.70461958133191005,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y6","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["DAL","HOU","MEM","NOP","SAS"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["DAL","HOU","MEM","NOP","SAS"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.43468935934689357],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x6","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"da8e2d03baa6":{"x":{},"y":{},"fill":{},"type":"heatmap"}},"cur_data":"da8e2d03baa6","visdat":{"da8e2d03baa6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Note the light colours in the Northwest division where teams have to travel far (like the 33 hour trip from Portland and Oklahoma City), while travel durations in the Atlantic and Central divisions are shorter. Of course, the Clippers and Lakers both play in the Staples Center in LA, so their journey time is zero.</p>
</section>
</section>
<section id="ending-the-journey" class="level2">
<h2 class="anchored" data-anchor-id="ending-the-journey">Ending the journey</h2>
<p>So, this post shows the the power of the {osrm} package for travel distance, duration and routing information.</p>
<p>Of course, it’s never usually as simple as having your geographic data ready to go, so I hope this post also provides a good use-case for {rvest} to help you collect information and {tidyverse} for wrangling it.</p>
<p>The plots here are pretty minimal, but they hopefully give a flavour of how to use {leaflet} for plotting points and the routing between them according to {osrm}.</p>
<p>This post was initially written before the travel restrictions brought about by the 2020 pandemic. Of course, the maps would have been much simpler during for the 2020 playoffs, which all took place in <a href="https://en.wikipedia.org/wiki/2020_NBA_Bubble">a ‘bubble’ at Disney World, Florida</a>.</p>
</section>


<div id="quarto-appendix" class="default"><section id="environment" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Environment</h2><div class="quarto-appendix-contents">

<details>
<summary>
Session info
</summary>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Last rendered: 2023-08-05 16:58:43 BST</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.1 (2023-06-16)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS Ventura 13.2.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Europe/London
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] plotly_4.10.2   DT_0.28         leaflet_2.1.2   osrm_4.1.1     
 [5] sf_1.0-14       janitor_2.2.0   rvest_1.0.3     lubridate_1.9.2
 [9] forcats_1.0.0   stringr_1.5.0   dplyr_1.1.2     purrr_1.0.1    
[13] readr_2.1.4     tidyr_1.3.0     tibble_3.2.1    ggplot2_3.4.2  
[17] tidyverse_2.0.0

loaded via a namespace (and not attached):
 [1] gtable_0.3.3            bslib_0.5.0             xfun_0.39              
 [4] htmlwidgets_1.6.2       tzdb_0.4.0              leaflet.providers_1.9.0
 [7] vctrs_0.6.3             tools_4.3.1             crosstalk_1.2.0        
[10] generics_0.1.3          curl_5.0.1              proxy_0.4-27           
[13] fansi_1.0.4             pkgconfig_2.0.3         KernSmooth_2.23-21     
[16] data.table_1.14.8       lifecycle_1.0.3         farver_2.1.1           
[19] compiler_4.3.1          googlePolylines_0.8.3   munsell_0.5.0          
[22] fontawesome_0.5.1       snakecase_0.11.0        sass_0.4.7             
[25] htmltools_0.5.5         class_7.3-22            yaml_2.3.7             
[28] lazyeval_0.2.2          jquerylib_0.1.4         pillar_1.9.0           
[31] ellipsis_0.3.2          classInt_0.4-9          cachem_1.0.8           
[34] tidyselect_1.2.0        digest_0.6.33           stringi_1.7.12         
[37] labeling_0.4.2          fastmap_1.1.1           grid_4.3.1             
[40] colorspace_2.1-0        cli_3.6.1               magrittr_2.0.3         
[43] utf8_1.2.3              e1071_1.7-13            RcppSimdJson_0.1.10    
[46] withr_2.5.0             scales_1.2.1            timechange_0.2.0       
[49] rmarkdown_2.23          httr_1.4.6              hms_1.1.3              
[52] evaluate_0.21           knitr_1.43.1            viridisLite_0.4.2      
[55] rlang_1.1.1             Rcpp_1.0.11             isoband_0.2.7          
[58] glue_1.6.2              DBI_1.1.3               xml2_1.3.5             
[61] mapiso_0.3.0            rstudioapi_0.15.0       jsonlite_1.8.7         
[64] R6_2.5.1                units_0.8-2            </code></pre>
</div>
</div>
</details>


</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div>CC BY-NC-SA 4.0</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>